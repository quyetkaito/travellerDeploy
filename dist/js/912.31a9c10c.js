(self["webpackChunktraveller"]=self["webpackChunktraveller"]||[]).push([[912,976,248],{3051:function(e,t,i){i(1703),function(t,i){e.exports=i()}(0,(function(){var e="__v-click-outside",t="undefined"!=typeof window,i="undefined"!=typeof navigator,s=t&&("ontouchstart"in window||i&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"],a=function(e){var t=e.event,i=e.handler;(0,e.middleware)(t)&&i(t)},n=function(t,i){var n=function(e){var t="function"==typeof e;if(!t&&"object"!=typeof e)throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,middleware:e.middleware||function(e){return e},events:e.events||s,isActive:!(!1===e.isActive),detectIframe:!(!1===e.detectIframe),capture:Boolean(e.capture)}}(i.value),r=n.handler,o=n.middleware,c=n.detectIframe,l=n.capture;if(n.isActive){if(t[e]=n.events.map((function(e){return{event:e,srcTarget:document.documentElement,handler:function(e){return function(e){var t=e.el,i=e.event,s=e.handler,n=e.middleware,r=i.path||i.composedPath&&i.composedPath();(r?r.indexOf(t)<0:!t.contains(i.target))&&a({event:i,handler:s,middleware:n})}({el:t,event:e,handler:r,middleware:o})},capture:l}})),c){var h={event:"blur",srcTarget:window,handler:function(e){return function(e){var t=e.el,i=e.event,s=e.handler,n=e.middleware;setTimeout((function(){var e=document.activeElement;e&&"IFRAME"===e.tagName&&!t.contains(e)&&a({event:i,handler:s,middleware:n})}),0)}({el:t,event:e,handler:r,middleware:o})},capture:l};t[e]=[].concat(t[e],[h])}t[e].forEach((function(i){var s=i.event,a=i.srcTarget,n=i.handler;return setTimeout((function(){t[e]&&a.addEventListener(s,n,l)}),0)}))}},r=function(t){(t[e]||[]).forEach((function(e){return e.srcTarget.removeEventListener(e.event,e.handler,e.capture)})),delete t[e]},o=t?{beforeMount:n,updated:function(e,t){var i=t.value,s=t.oldValue;JSON.stringify(i)!==JSON.stringify(s)&&(r(e),n(e,{value:i}))},unmounted:r}:{};return{install:function(e){e.directive("click-outside",o)},directive:o}}))},195:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return ke}});var s=i(3396);const a={class:"navbar-container"},n={class:"main-content-container"},r={class:"flex"},o={class:"filter-container w-1/4"},c=(0,s._)("i",{class:"fas fa-book-open my-post"},null,-1),l=(0,s._)("div",null,"Bài viết của bạn",-1),h=[c,l],d=(0,s._)("i",{class:"fab fa-hotjar hot-place"},null,-1),u=(0,s._)("div",null,"Các địa điểm đang hot",-1),g=[d,u],m=(0,s._)("div",{class:"filter-item"},[(0,s._)("i",{class:"fas fa-map-marker-alt location"}),(0,s._)("div",null,"Lọc theo khu vực")],-1),v={class:"post-container"},p={class:"w-1/4 more-content"},f=(0,s._)("div",{class:"title"},"Kinh nghiệm du lịch",-1),w={class:"new-container"};function _(e,t,i,c,l,d){const u=(0,s.up)("nav-bar"),_=(0,s.up)("router-view"),y=(0,s.up)("post-item"),k=(0,s.up)("post-image-viewer");return(0,s.wg)(),(0,s.iD)("div",{id:"landingPage",ref:"landingPage",class:"landing-page",onScroll:t[5]||(t[5]=(...e)=>d.lazyLoading&&d.lazyLoading(...e))},[(0,s._)("div",a,[(0,s.Wm)(u)]),(0,s._)("div",n,[(0,s._)("div",r,[(0,s._)("div",o,[(0,s._)("div",{class:"filter-item",onClick:t[0]||(t[0]=(...e)=>d.gotoMyPost&&d.gotoMyPost(...e))},h),(0,s._)("div",{class:"filter-item",onClick:t[1]||(t[1]=(...e)=>d.getHotPlace&&d.getHotPlace(...e))},g),m,(0,s._)("div",{class:"filter-item",onClick:t[2]||(t[2]=(...e)=>d.test&&d.test(...e))},"Lọc theo tỉnh huyện"),(0,s._)("div",{class:"filter-item",onClick:t[3]||(t[3]=(...e)=>d.test&&d.test(...e))},"Lịch sử tìm kiếm"),e.$session.get("UserRole")==e.$enum.UserRole.Admin?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"filter-item",onClick:t[4]||(t[4]=(...e)=>d.gotoAdmin&&d.gotoAdmin(...e))},"Cài đặt")):(0,s.kq)("",!0)]),(0,s._)("div",v,[((0,s.wg)(),(0,s.j4)(_,{key:e.$route}))]),(0,s._)("div",p,[f,(0,s._)("div",w,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.listNews,((e,t)=>((0,s.wg)(),(0,s.j4)(y,{key:t,post:e},null,8,["post"])))),128))])])])]),(0,s.Wm)(k,{ref:"postImageViewer"},null,512)],544)}var y=i(3051),k=i.n(y),b=i(9242),S=i(7139),C=i(2035);const I={id:"navbarComponent",class:"navbar-component flex flex-grow"},x={class:"navbar__left flex align-y-center w-1/3"},D={ref:"searchPreview",class:"search-preview"},$={key:0},T={key:1,class:"search-title flex justify-between align-y-center"},L=(0,s._)("div",{class:"search-cache"},"Tìm kiếm gần đây",-1),P=["onClick"],B={class:"flex justify-between"},N={class:"flex"},O=(0,s._)("div",{class:"icon-history"},[(0,s._)("i",{class:"fas fa-history"})],-1),E=["onClick"],R=(0,s._)("i",{class:"far fa-times-circle"},null,-1),M=[R],Z={class:"navbar-item-container flex w-1/3"},H=(0,s._)("div",{class:"navbar-item"},"Miền trung",-1),j=(0,s._)("div",{class:"navbar-item"},"Miền nam",-1),q=(0,s._)("div",{class:"navbar-item"},"Trekking",-1),z={class:"login-area flex w-1/3"},A=(0,s.Uk)("Xin chào ");function K(e,t,i,a,n,r){return(0,s.wg)(),(0,s.iD)("div",I,[(0,s._)("div",x,[(0,s._)("img",{src:C,alt:"",class:"logo-page",onClick:t[0]||(t[0]=(...e)=>r.logoClick&&r.logoClick(...e))}),(0,s.wy)((0,s._)("input",{ref:"searchInput",type:"text",class:"search-input",placeholder:"Tìm kiếm","onUpdate:modelValue":t[1]||(t[1]=e=>n.textSearch=e),onInput:t[2]||(t[2]=(...e)=>r.searchInput&&r.searchInput(...e)),onKeyup:t[3]||(t[3]=(0,b.D2)(((...e)=>r.searchData&&r.searchData(...e)),["enter"])),onClick:t[4]||(t[4]=(...e)=>r.openSearchBox&&r.openSearchBox(...e))},null,544),[[b.nr,n.textSearch]]),(0,s._)("div",D,[0==n.listOldSearch.length?((0,s.wg)(),(0,s.iD)("div",$,"Không có tìm kiếm nào gần đây")):(0,s.kq)("",!0),n.listOldSearch.length>0?((0,s.wg)(),(0,s.iD)("div",T,[L,(0,s._)("div",{class:"delete-cache",onClick:t[5]||(t[5]=(...e)=>r.deleteCache&&r.deleteCache(...e))},"Xóa lịch sử tìm kiếm")])):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.listOldSearch,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"search-result-item",key:e,onClick:t=>r.searchItemClick(e)},[(0,s._)("div",B,[(0,s._)("div",N,[O,(0,s._)("div",null,(0,S.zw)(e.search_content),1)]),(0,s._)("div",{class:"delete-icon",onClick:t=>r.deleteHistory(e)},M,8,E)])],8,P)))),128))],512)]),(0,s._)("div",Z,[(0,s._)("div",{class:"navbar-item",onClick:t[6]||(t[6]=(...e)=>r.gotoTop&&r.gotoTop(...e))},"Trang chủ"),(0,s._)("div",{class:"navbar-item",onClick:t[7]||(t[7]=e=>r.filterByLocation(1))},"Miền bắc"),H,j,q]),(0,s._)("div",z,[n.isLogged?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",{key:0,class:"login-button",onClick:t[8]||(t[8]=(...e)=>r.gotoLogin&&r.gotoLogin(...e))},(0,S.zw)(e.$t("Login")),1)),n.isLogged?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",{key:1,class:"register-button",onClick:t[9]||(t[9]=(...e)=>r.gotoRegister&&r.gotoRegister(...e))},(0,S.zw)(e.$t("Register")),1)),n.isLogged?((0,s.wg)(),(0,s.iD)("div",{key:2,class:"user-info",onClick:t[10]||(t[10]=(...e)=>r.gotoInfo&&r.gotoInfo(...e))},[A,(0,s._)("b",null,(0,S.zw)(n.full_name),1)])):(0,s.kq)("",!0)])])}var U=i(6856),F={data(){return{full_name:"bạn",isLogged:!1,textSearch:"",listOldSearch:[],userID:this.$session.get("UserID")}},created(){this.initStaticData()},methods:{searchItemClick(e){e&&(this.textSearch=e.search_content,this.searchData(),this.hideResult())},filterByLocation(e){this.$router.push({name:"postFilterList",params:{title:"Miền Bắc"}})},async getSearchData(){try{let e=this;if(e.userID){let t=await U.Z.request(U.Z.urlName+`/history_by_user/${e.userID}`,"GET");t&&t.data&&(this.listOldSearch=[],this.listOldSearch=t.data.filter(((e,t)=>t<5)))}}catch(e){console.error(e)}},deleteCache(){let e=this;e.userID?(this.$router.push("/search-history"),this.hideResult()):(this.$cache.remove("searchData"),this.listOldSearch=[])},async deleteHistory(e){if(e)try{let t=await U.Z.request(U.Z.urlName,"DELETE",[e.id]);t&&t.data&&console.log(t.data.UserMsg)}catch(t){console.error(t)}},initStaticData(){let e=this.$session.get("FullName");e&&(this.full_name=e,this.isLogged=!0)},gotoLogin(){this.$router.push({name:"login"})},gotoRegister(){},gotoInfo(){this.$router.push({name:"UserInfo"})},searchData(){let e=this;e.textSearch&&(this.$router.push("/home"),e.$store.textSearch=e.textSearch,e.$eventBus.emit("test",e.textSearch),this.hideResult(),e.userID?this.insertHistory():this.openSearchBox())},async insertHistory(){try{let e=this;if(e.userID){let t={user_id:e.userID,search_content:e.textSearch,search_date:e.$commonFunc.setTimeZone(new Date)},i=await U.Z.request(U.Z.urlName,"POST",t);i&&i.data&&201==i.data.StatusCode&&console.log("Lưu lịch sử thành công")}}catch(e){console.error(e)}},openSearchBox(){let e=this;if(e.$refs.searchInput){let t=e.$refs.searchInput.getBoundingClientRect(),i=e.$refs.searchPreview;i.style.left="0px",i.style.width=t.right+"px",i.style.top=t.bottom+"px",i.style.display="block"}e.userID&&this.getSearchData()},hideResult(){let e=this,t=e.$refs.searchPreview;t.style.display="none"},searchInput(e){e||this.hideResult();let t=this;if(t.$refs.searchInput){let e=t.$refs.searchInput.getBoundingClientRect(),i=t.$refs.searchPreview;i.style.left="0px",i.style.width=e.right+"px",i.style.top=e.bottom+"px",i.style.display="block"}},gotoTop(){this.$eventBus.emit("gotoTop"),this.$router.push("/home")},logoClick(){}}},J=i(89);const V=(0,J.Z)(F,[["render",K]]);var W=V;const X={class:"post-item m-card"},G={class:"flex"},Y={class:"post-thumb w-1/3"},Q=["src"],ee={class:"post-title ml-2"},te={class:"post-description"},ie=(0,s._)("div",{class:"view-detail-button"},"Xem chi tiết",-1);function se(e,t,i,a,n,r){return(0,s.wg)(),(0,s.iD)("div",X,[(0,s._)("div",G,[(0,s._)("div",Y,[(0,s._)("img",{src:r.getSrc(n.listImage[0])},null,8,Q)]),(0,s._)("div",ee,(0,S.zw)(i.post.post_content.substring(0,50))+"...",1)]),(0,s._)("div",te,(0,S.zw)(i.post.post_content.substring(0,90))+"...",1),ie])}var ae={props:{post:{type:Object,default:()=>{}}},data(){return{currentItem:null,listImage:this.post.post_image?JSON.parse(this.post.post_image):[]}},created(){this.initStaticData()},methods:{initStaticData(){this.currentItem={imageSrc:"",title:"Kinh nghiệm chuẩn bị đồ đi cắm trại",description:"Trong thời gian gần đây, cùng với sự phát triển chung của ngành du lịch thì những chuyến đi chơi với bạn bè, gia đình cũng dần được mở rộng thêm với nhiều hình thức mới lạ, độc đáo."},this.listImage=this.post.post_image?JSON.parse(this.post.post_image):[]},getSrc(e){return e||i(5580)}}};const ne=(0,J.Z)(ae,[["render",se]]);var re=ne,oe=i(1561),ce=i(8918);const le=e=>((0,s.dD)("data-v-1834343a"),e=e(),(0,s.Cn)(),e),he={class:"image-viewer__header flex justify-end"},de={class:"close-button"},ue=le((()=>(0,s._)("div",{class:"m-card-gray-bottom image-viewer__body"},[(0,s._)("img",{src:ce,alt:""})],-1)));function ge(e,t,i,a,n,r){return(0,s.wg)(),(0,s.iD)("div",{class:(0,S.C_)(["m-image-viewer",{show:n.isShow}]),ref:"dialog"},[(0,s._)("div",he,[(0,s._)("div",de,[(0,s._)("div",{class:"m-icon m-icon-24 m-close",onClick:t[0]||(t[0]=(...e)=>r.closeCarousel&&r.closeCarousel(...e))})])]),ue],2)}var me=i(1658),ve={components:{Carousel:me.lr,Slide:me.Mi,Pagination:me.tl,Navigation:me.W_},props:{listImage:{type:String}},data(){return{isShow:!1,listImage_tmp:this.listImage?JSON.parse(this.listImage):[]}},methods:{closeCarousel(){this.isShow=!1},getSrc(e){return e}}};const pe=(0,J.Z)(ve,[["render",ge],["__scopeId","data-v-1834343a"]]);var fe=pe,we=i(6514),_e={name:"LandingPage",components:{"post-item":re,"nav-bar":W,"post-list":oe["default"],"post-image-viewer":fe},directives:{clickOutside:k().directive},data(){return{listNews:[]}},mounted(){this.$eventBus.on("gotoTop",(e=>{this.scrollTop(e)})),this.getNews()},methods:{test(){this.$router.push("search-history")},getHotPlace(){this.$router.push({name:"postFilterList",params:{title:"Các địa điểm đang hot",filterKey:"hotPlace"}})},async getNews(){try{let e=await we.Z.request(we.Z.urlName+"/experience_post","GET");e&&e.data&&(this.listNews=e.data)}catch(e){console.error(e)}},gotoMyPost(){},back(){this.$router.push("/post")},gotoAdmin(){this.$router.push("/dashboard")},async lazyLoading(){if(this.$route&&"postList"==this.$route.name){var e=document.getElementById("landingPage"),t=e.clientHeight+Math.floor(e.scrollTop);t!=e.scrollHeight&&t!=e.scrollHeight-1||await this.$eventBus.emit("nextPage",this.textSearch)}},scrollTop(){document.getElementById("landingPage").scrollTo(0,0)}}};const ye=(0,J.Z)(_e,[["render",_]]);var ke=ye},5580:function(e,t,i){"use strict";e.exports=i.p+"img/image-test-1.8f0513c0.jpg"},8918:function(e,t,i){"use strict";e.exports=i.p+"img/traveler.1cf14b69.jpg"}}]);
//# sourceMappingURL=912.31a9c10c.js.map