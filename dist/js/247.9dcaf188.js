"use strict";(self["webpackChunktraveller"]=self["webpackChunktraveller"]||[]).push([[247],{6247:function(e,t,i){i.r(t),i.d(t,{default:function(){return L}});var o=i(3396),a=i(7139),l=i(9242),n=i(7933);const s={class:"content"},r={class:"employee-top"},h={class:"content-top"},d={class:"page-title"},c={class:"employee-bottom"},u={class:"content-bottom"},m={class:"filter-area flex"},p={class:"flex align-x-y-center"},g=(0,o._)("button",{class:"m-btn-dropdown"},[(0,o._)("div",{class:"m-btn-text text-dropdown"},"Thực hiện hàng loạt"),(0,o._)("div",{class:"m-icon m-icon-16 m-icon-dropdown"})],-1),w={key:0,class:"dropdown-button"},S={class:"content-filter flex align-y-center justify-end"},D={style:{width:"240px"}},b={style:{position:"relative"}},f={style:{position:"relative"}},v={class:"content-grid"},y={class:"table-container"},F={class:"flex align-center",style:{width:"100%","flex-direction":"column"}},x=(0,o._)("img",{src:n,alt:"",width:"100",height:"100"},null,-1),_=(0,o._)("p",{style:{margin:"0px",padding:"0px"}},"Không có dữ liệu",-1),k=[x,_],M={class:"m-paging"},C=(0,o._)("div",{class:"paging-left"},null,-1),T={class:"paging-right"};function $(e,t,i,n,x,_){const $=(0,o.up)("m-button"),N=(0,o.up)("m-input"),E=(0,o.up)("m-grid"),V=(0,o.up)("v-multiselect");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",r,[(0,o._)("div",h,[(0,o._)("div",d,(0,a.zw)(e.$t("VoucherList")),1),(0,o.Wm)($,{text:e.$t("common.add_new"),onClick:_.showToast},null,8,["text","onClick"])])]),(0,o._)("div",c,[(0,o._)("div",u,[(0,o._)("div",m,[(0,o._)("div",p,[g,x.isShowMultiAction&&x.listEmployeeChecked.length>0?((0,o.wg)(),(0,o.iD)("div",w,[(0,o._)("div",{class:"m-dropdown-item",onClick:t[0]||(t[0]=(...t)=>e.handleMultiDelete&&e.handleMultiDelete(...t))},(0,a.zw)(x.multiDeleteText),1)])):(0,o.kq)("",!0)]),(0,o._)("div",S,[(0,o._)("div",D,[(0,o.Wm)(N,{ref:"searchInput",showLabel:!1,maxlength:255,width:240,isHasIcon:!0,modelValue:x.dataFilter,"onUpdate:modelValue":t[1]||(t[1]=e=>x.dataFilter=e),placeholder:"Tìm kiếm",onInput:t[2]||(t[2]=t=>_.lodashDelay(e.value)),onFindData:_.filterDataServer},null,8,["modelValue","onFindData"])]),(0,o._)("div",b,[(0,o._)("div",{class:"m-icon m-icon-24 m-refresh btn-refresh",onClick:t[3]||(t[3]=e=>_.loadData())})]),(0,o._)("div",f,[(0,o._)("div",{class:"m-icon m-icon-24 m-excel__nav btn-export",onClick:t[4]||(t[4]=(...e)=>_.exportData&&_.exportData(...e))})])])]),(0,o._)("div",v,[(0,o._)("div",y,[(0,o.Wm)(E,{ref:"mygrid",listData:x.storeVoucher,columns:x.columns,pageSize:x.pageSize,isShowSkeleton:x.isShowSkeleton,functionText:"Sửa",onOnUpdate:_.handleUpdate,onOnDelete:_.handleDelete,onEShowFunc:_.showFunction,onHandleHideFunc:_.hideFunction,onEMultiSelect:_.getitemSelected,onDelete:_.handleDelete},null,8,["listData","columns","pageSize","isShowSkeleton","onOnUpdate","onOnDelete","onEShowFunc","onHandleHideFunc","onEMultiSelect","onDelete"])])]),(0,o.wy)((0,o._)("div",F,k,512),[[l.F8,0===Object.keys(x.storeVoucher).length&&""!=x.dataFilter]]),(0,o.wy)((0,o._)("div",M,[C,(0,o._)("div",T,[(0,o.Wm)(V,{ref:"comboPaging",style:{width:"250px !important"},modelValue:x.pageSize,"onUpdate:modelValue":t[5]||(t[5]=e=>x.pageSize=e),options:x.pagingOptions,label:"label","close-on-select":!0,clearOnSelect:!0,searchable:!1,noResultsText:"Không có dữ liệu hiển thị",disabled:!1,canClear:!1,canDeselect:!1,openDirection:"top"},null,8,["modelValue","options"])])],512),[[l.F8,0!==Object.keys(x.storeVoucher).length]])])])])}var N=i(89);i(6265);var E=i(4806),V=i.n(E),P=i(9810),z=i(2482),A=i(1181),O=i(2091);class I extends O.Z{constructor(){super(),(0,z.Z)(this,"urlName",A.Z.voucher)}}var H=new I,U={name:"EmployeeList",components:{"v-multiselect":P.Z},created(){this.loadData()},data(){return{pageTitle:"Mã giảm giá",storeVoucher:[],isShowDialog:!1,isShowPopup:!1,isShowFunc:!1,isShowMultiAction:!1,isShowSkeleton:!1,itemSelected:{},formMode:0,popupText:null,popupType:null,isMultiDelete:!1,toastText:"toast-text",toastType:0,pagingOptions:[{label:"10 bản ghi trên 1 trang",value:10},{label:"20 bản ghi trên 1 trang",value:20},{label:"30 bản ghi trên 1 trang",value:30},{label:"50 bản ghi trên 1 trang",value:50},{label:"100 bản ghi trên 1 trang",value:100}],disableComboboxPaging:!1,pageNumber:1,pageSize:10,totalPage:null,totalEmp:null,dataFilter:"",multiDeleteText:"Xóa",columns:[{title:"Mã giảm giá",key:"voucher_code",width:200},{title:"Mô tả",key:"description",width:200},{title:"Ngày bắt đầu",key:"start_date",width:200,dataType:"date",titleAlign:"center"},{title:"Ngày hết hạn",key:"expiration_date",dataType:"date",titleAlign:"center",width:200},{title:"Số lượng mã",key:"quantity",width:50,titleAlign:"right"},{title:"Phần trăm giảm trên đơn hàng(%)",key:"discount_rate",width:50,titleAlign:"right"},{title:"Số tiền giảm trực tiếp",key:"discount_amount",width:200,titleAlign:"right"}],tableFunction:[{title:"Nhân bản",value:this.$enum.TableFunction.Clone},{title:"Xóa",value:this.$enum.TableFunction.Delete},{title:"Ngừng sử dụng",value:this.$enum.TableFunction.Stop}],listEmployeeChecked:[]}},methods:{onConfirm(){this.showLogo.value=!1},showToast(){},closeDialog(){this.itemSelected={},this.formMode=0,this.isShowDialog=!1},exportData(){let e=this;e.$refs.mLoading.show();let t={};t.tableInfos=e.listHeader,t.dataFilter=e.dataFilter},getitemSelected(e){try{e.forEach((e=>{this.listEmployeeChecked.push(e.employee_id)}))}catch(t){console.error(t)}},toggleMultiAction(){this.isShowMultiAction=!this.isShowMultiAction},hideMultiAction(){this.isShowMultiAction=!1},lodashDelay:V().debounce((function(){this.filterDataServer()}),1200),filterDataServer(){let e=this;e.loadData()},async loadData(){try{let e,t=this;t.disableComboboxPaging=!0,t.storeVoucher=[],t.formMode=0,t.pageSize||(t.pageSize=10),t.pageNumber&&1==t.pageNumber||(t.pageNumber=1),t.isShowSkeleton=!0,t.dataFilter&&this.$commonFunc.convertToBase64(t.dataFilter),e||(e="");let i=await H.request(`${H.urlName}/filter?textFilter=${e}`,"get");i&&i.data&&i.data.Data&&i.data.Data.length>0&&(t.storeVoucher=i.data.Data),t.isShowSkeleton=!1,t.disableComboboxPaging=!1}catch(e){this.showDefaultErrorNotify(),this.isShowSkeleton=!1,console.error(e)}},openDialog({data:e,formMode:t}){try{this.formMode=t,t!=this.$enum.FormMode.Post&&t!=this.$enum.FormMode.Clone||this.$refs.addDialog.getNewEmployeeCode(),this.itemSelected=e,this.itemSelected.DateOfBirth&&(this.itemSelected.DateOfBirth=new Date(this.itemSelected.DateOfBirth)),this.itemSelected.IdentityDate&&(this.itemSelected.IdentityDate=new Date(this.itemSelected.IdentityDate)),this.isShowDialog=!0}catch(i){this.showDefaultErrorNotify(),console.error(i)}},handleUpdate({data:e,formMode:t}){},handleDelete(e){e&&(this.itemSelected=e)},showDefaultErrorNotify(){this.$store.commit("showError",{message:"lỗi rồi"})},handleException(e){let t=this,i=e.response;if(i.status)switch(e.response.status){case this.$enum.StatusCode.InternalServerError:i.data.userMsg?t.showPopup(this.$enum.PopupType.DataError,i.data.userMsg):t.showDefaultErrorNotify();break;case this.$enum.StatusCode.BadRequest:t.showDefaultErrorNotify();break;default:break}else t.showDefaultErrorNotify()},showPopup(e,t){e&&(this.popupType=e),t&&(this.popupText=t),this.showMessagebox(!0),this.$refs.popup.focus()},showMessagebox(e){this.isShowPopup=e},showFunction(e){this.isShowFunc?this.isShowFunc=!1:(this.isShowFunc=!0,this.itemSelected=e,this.formMode=this.$enum.FormMode.Clone)},hideFunction(){this.isShowFunc=!1},async getValueFromDropdown(e){e==this.$enum.TableFunction.Delete&&(this.handleDelete(this.itemSelected),this.isShowFunc=!1),e==this.$enum.TableFunction.Clone&&(this.openDialog({data:this.itemSelected,formMode:this.$enum.FormMode.Clone}),await this.$refs.addDialog.getDepartment(),this.$refs.addDialog.setDepartment(),this.$refs.addDialog.autoFocus(),this.isShowFunc=!1)},setCurrentPage(e){this.pageNumber=e,this.filterDataServer(this.pageNumber)},reset(){this.pageNumber=1,this.pageSize=10}},computed:{},watch:{pageSize:function(){this.pageNumber=1,""!=this.dataFilter?this.filterDataServer(this.pageNumber):this.loadData()},dataFilter:function(){this.pageNumber=1}}};const B=(0,N.Z)(U,[["render",$]]);var L=B},7933:function(e,t,i){e.exports=i.p+"img/bg_report_nodata.76e50bd8.33eab636.svg"}}]);
//# sourceMappingURL=247.9dcaf188.js.map