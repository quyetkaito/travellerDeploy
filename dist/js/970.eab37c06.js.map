{"version":3,"file":"js/970.eab37c06.js","mappings":"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","sources":["webpack://traveller/./src/views/category/CategoryDetail.vue","webpack://traveller/./src/views/category/CategoryDetail.vue?701e","webpack://traveller/./src/views/category/CategoryList.vue","webpack://traveller/./src/views/category/CategoryList.vue?793d"],"sourcesContent":["<template>\r\n     <!-- Dialog thêm mới -->\r\n  <div class=\"m-popup\" v-bind:class=\"{ show: isShow }\" ref=\"categoryDialog\">\r\n    <div class=\"m-popup-box\">\r\n      <!-- Header -->\r\n      <div class=\"m-popup-header\">\r\n        <div>\r\n            <div class=\"popup-title-text\">{{titleForm}}</div>              \r\n        </div>\r\n        <div>          \r\n            <div class=\"popup-close m-icon m-icon-24 m-close\" @click=\"hide\"></div>            \r\n        </div>\r\n      </div>\r\n      <!-- Header end-->\r\n      <!-- Form -->\r\n      <div class=\"m-popup-body\">\r\n        <!-- Detail -->\r\n        <div class=\"form-container\" v-if=\"editMode!='QuickAdd'\">\r\n            <m-input \r\n              ref=\"categoryName\"\r\n              :labelText=\"$t('category.category_name')\"\r\n              v-model=\"currentItem.category_name\"\r\n              @keyup.enter=\"saveCategory\"\r\n            />\r\n        </div>\r\n        <div class=\"form-container\" v-if=\"editMode=='QuickAdd'\">\r\n          <m-label text=\"Tìm danh mục\" />                    \r\n          <v-multiselect\r\n            ref=\"categoryList\"\r\n            mode=\"tags\"\r\n            v-model=\"categoryValue\"\r\n            :options=\"storeCategory\"\r\n            label=\"label\"\r\n            :close-on-select=\"true\"\r\n            :clearOnSelect=\"true\"\r\n            :searchable=\"true\"\r\n            placeholder=\"Bấm vào để tìm kiếm\"\r\n            noResultsText=\"Không có dữ liệu hiển thị\"                                  \r\n            :canClear=\"false\"\r\n            :canDeselect=\"false\"\r\n            @select=\"comboCategorySelected\"\r\n            @deselect=\"comboCategoryDeSelected\"\r\n          />\r\n          <div class=\"quick-add-action\" v-if=\"editMode=='QuickAdd'\">Không tìm thấy danh mục?\r\n             <span class=\"quick-add-text\" @click=\"changeModeAdd\">Tạo mới</span>\r\n          </div>\r\n        </div>\r\n        <!-- Detail end-->\r\n\r\n        <!-- Footer -->\r\n        <div class=\"footer-container flex-grow\">\r\n          <div class=\"footer-line\">\r\n            <m-button \r\n                v-if=\"editMode!='QuickAdd'\"\r\n                :text=\"$t('Save')\" \r\n                class=\"w-full\"                                 \r\n                @click=\"saveCategory\"\r\n            />\r\n            <m-button \r\n                v-if=\"editMode=='QuickAdd'\"\r\n                :text=\"$t('category.add_button')\" \r\n                class=\"w-full\"                                 \r\n                @click=\"sendToPost\"\r\n            />            \r\n          </div>\r\n        </div>\r\n        <!-- Footer end-->\r\n      </div>\r\n      <!-- Form end -->\r\n    </div>\r\n  </div>  \r\n</template>\r\n\r\n<script>\r\nimport CategoryAPI from \"@/api/CategoryAPI\"\r\n//multi vue 3\r\nimport vMultiselect from \"@vueform/multiselect\";\r\nimport \"@vueform/multiselect/themes/default.css\";\r\nexport default {\r\n  components:{\r\n    /* eslint-disable vue/no-unused-components */\r\n    \"v-multiselect\": vMultiselect,\r\n  },\r\n    data() {\r\n        return {\r\n            isShow: false,\r\n            currentItem: {},\r\n            titleForm: this.$t('category.add'),\r\n            editMode: 'Add',\r\n            storeCategory:[],\r\n            categoryValue: null,\r\n            openFromPost: false,\r\n        }\r\n    },\r\n    created(){\r\n      this.initData();\r\n    },\r\n    methods:{\r\n        initData(){\r\n          this.currentItem = {};\r\n          this.categoryValue = null;\r\n          this.titleForm = this.$t('category.add');\r\n          this.editMode = 'Add';\r\n        },\r\n\r\n        async saveCategory(){\r\n          let me = this;\r\n          try {\r\n            let method = 'POST';\r\n            if(me.editMode == 'Edit') method = 'PUT';\r\n            if(!await me.validate()) return;\r\n            let res = await CategoryAPI.request(CategoryAPI.urlName, method, me.currentItem);\r\n            if(res && res.data){\r\n              if(res.data.StatusCode == 201){\r\n                if(!me.openFromPost){\r\n                  me.$store.commit(\"showSuccess\", {message: me.$t(\"message.success_add\")});\r\n                }\r\n                me.afterSave(res.data.Data);\r\n              }else if(res.data.StatusCode == 200){\r\n                me.$store.commit(\"showSuccess\", {message: me.$t(\"message.success\")});\r\n                me.afterSave();\r\n              }\r\n            }\r\n          } catch (error) {\r\n            console.error(error);\r\n          }\r\n        },\r\n\r\n        async validate(){\r\n          let me = this;\r\n          if(!me.currentItem.category_name){\r\n             if(me.$refs.categoryName && typeof me.$refs.categoryName.focus == \"function\"){\r\n              me.$refs.categoryName.focus();\r\n             }\r\n             me.$store.commit(\"showError\", {message: \"Tên danh mục không được bỏ trống.\"});\r\n             return false;\r\n          }\r\n          return true;\r\n        },\r\n\r\n        hide(){\r\n            this.isShow = false;\r\n            this.initData();\r\n        },\r\n\r\n        show(){\r\n          this.isShow = true;\r\n          this.editMode = 'Add'; //mặc định gọi vào hàm này là thêm mới\r\n          this.focusFirstControl();\r\n        },\r\n\r\n        /**\r\n         * show form thêm nhanh , tìm kiếm tại form thêm bài viết\r\n         */\r\n        showQuickAdd(){\r\n            this.editMode = 'QuickAdd';\r\n            this.isShow = true;            \r\n            this.$nextTick(()=>{\r\n              if(this.$refs.categoryList && this.$refs.categoryList.$el && typeof this.$refs.categoryList.$el.focus == \"function\"){\r\n                // this.$refs.categoryList.$el.focus(); //tạm thời ko focus vì auto xổ combo xấu quá\r\n              }\r\n            })\r\n            this.titleForm = this.$t('category.quick_add');\r\n            //lấy dữ liệu danh mục\r\n            if(!this.storeCategory || this.storeCategory.length == 0){\r\n              this.getCategoryData();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Hàm xử lý binding lên khi sửa\r\n         */\r\n        bindingData(listData){          \r\n          let me = this;\r\n          debugger\r\n          if(listData && listData.length > 0){\r\n             this.categoryValue = null;\r\n             this.categoryValue = listData.map(x=>x.category_id);\r\n          }\r\n        },\r\n\r\n        comboCategorySelected(option){\r\n            // this.storeCategory.push(option);\r\n        },\r\n\r\n        comboCategoryDeSelected(option){\r\n            // this.storeCategory.splice(this.storeCategory.indexOf(option),1);\r\n        },\r\n\r\n        /**\r\n         * Hàm lấy dữ lệu danh mục\r\n         */\r\n        async getCategoryData(){\r\n            let res = await CategoryAPI.request(CategoryAPI.urlName, 'GET');\r\n            if(res && res.data){              \r\n              if(res.data.length > 0){\r\n                this.categoryOriginData = res.data;\r\n                this.storeCategory = [];\r\n                for(let i = 0 ; i< res.data.length ; i++){\r\n                  this.storeCategory.push({\r\n                    label: res.data[i].category_name,\r\n                    value: res.data[i].category_id,\r\n                  })\r\n                }\r\n                //lưu cache để tránh gọi nhiều lần\r\n                //todo\r\n              }              \r\n            }\r\n        },\r\n\r\n        /**\r\n         * Gửi giá trị được chọn tới bài viết\r\n         */\r\n        sendToPost(){\r\n           debugger                      \r\n           let listObject = this.categoryOriginData.filter(x=>this.categoryValue.includes(x.category_id)); //tìm ra các bản ghi trùng id, do hiện tại value chỉ chứa mỗi id\r\n           this.$emit(\"changeValue\", listObject);\r\n           this.isShow = false;\r\n        },\r\n\r\n        focusFirstControl(){\r\n            this.$nextTick(()=>{\r\n              if(this.$refs.categoryName && typeof this.$refs.categoryName.focus == \"function\"){\r\n                this.$refs.categoryName.focus();\r\n              }\r\n            })\r\n        },\r\n\r\n        afterSave(callbackData){\r\n          this.hide();\r\n          if(this.openFromPost){//nếu là mở từ form bài viết\r\n               this.$emit(\"changeValue\", [callbackData]);\r\n          }else{\r\n            this.$parent.loadData();\r\n          }\r\n        },\r\n\r\n        showEdit(object){\r\n          let me = this;\r\n          me.editMode = 'Edit';\r\n          me.titleForm = me.$t('category.edit');\r\n          if(object){            \r\n            me.currentItem = JSON.parse(JSON.stringify(object));\r\n            me.isShow = true;\r\n            me.focusFirstControl();\r\n          }\r\n        },\r\n\r\n        /**\r\n         * Chuyển sang mode thêm mới\r\n         */\r\n        changeModeAdd(){\r\n            let me = this;\r\n            me.editMode = 'Add';\r\n            me.titleForm = me.$t('category.add');  \r\n            me.$nextTick(()=>{\r\n              me.$refs.categoryName.focus();\r\n            });\r\n            me.openFromPost = true;\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@import url(\"/src/style/common/dialog.css\");\r\n.quick-add-action{\r\n  color: #000;\r\n  margin-right: 9px;\r\n  text-align: center;\r\n  margin-top: 10px;\r\n}\r\n\r\n.quick-add-action .quick-add-text{\r\n  color: var(--default-color);\r\n  text-decoration: underline;\r\n  font-weight: 400;\r\n  cursor: pointer;\r\n}\r\n</style>","import { render } from \"./CategoryDetail.vue?vue&type=template&id=161dcab3&scoped=true\"\nimport script from \"./CategoryDetail.vue?vue&type=script&lang=js\"\nexport * from \"./CategoryDetail.vue?vue&type=script&lang=js\"\n\nimport \"./CategoryDetail.vue?vue&type=style&index=0&id=161dcab3&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\Traveller\\\\Traveller-Frontend\\\\traveller-ui\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-161dcab3\"]])\n\nexport default __exports__","<template>\r\n  <!-- Content riêng của trang Employee -->\r\n  <div class=\"content\">\r\n    <div class=\"content-top-container\">\r\n      <div class=\"content-top\">\r\n        <div class=\"page-title\">{{ $t('category.CategoryManager') }}</div>\r\n        <m-button :text=\"$t('common.add_new')\" @click=\"buttonClick('Add')\" />\r\n      </div>\r\n    </div>\r\n    <div class=\"\">\r\n      <div class=\"content-bottom\">\r\n        <div class=\"filter-area flex\">\r\n          <!-- Xóa nhiều -->\r\n          <div class=\"flex align-center\" v-if=\"selected >= 1\">\r\n            <button class=\"m-btn-dropdown\" disabled :class=\"{'disabled' : selected < 1}\">\r\n              <div class=\"m-btn-text text-dropdown\">Xóa hàng loạt</div>\r\n            </button>           \r\n          </div>\r\n          <!-- Các component filter dữ liệu -->\r\n          <div class=\"content-filter flex align-y-center justify-center\">\r\n            <!-- Input Search -->\r\n            <div style=\"width: 240px\">\r\n              <m-input\r\n                ref=\"searchInput\"\r\n                :showLabel=\"false\"\r\n                :maxlength=\"255\"\r\n                :width=\"240\"\r\n                v-model=\"dataFilter\"\r\n                placeholder=\"Tìm kiếm\"\r\n                @input=\"lodashDelay(value)\"\r\n                @findData=\"filterData\"\r\n              />\r\n            </div>\r\n\r\n            <div style=\"position: relative\">\r\n              <div\r\n                title=\"Lấy lại dữ liệu\"\r\n                class=\"m-icon m-icon-24 m-refresh btn-refresh\"\r\n                @click=\"loadData\"\r\n              ></div>              \r\n            </div>            \r\n          </div>\r\n        </div>\r\n\r\n        <!-- Bảng -->\r\n        <div class=\"content-grid\">\r\n          <div class=\"table-container\">\r\n            <m-grid\r\n              ref=\"mygrid\"\r\n              :listData=\"storeCategory\"\r\n              :columns=\"columns\"\r\n              :pageSize=\"pageSize\"\r\n              :isShowSkeleton=\"isShowSkeleton\"\r\n              functionText=\"Sửa\"\r\n              @eShowFunc=\"showFunction\"\r\n              @handleHideFunc=\"hideFunction\"\r\n              @eMultiSelect=\"getItemSelected\"\r\n              @eDoubleClick=\"edit\"\r\n              @gridAction=\"handleGridAction\"\r\n              :tableFunction=\"tableFunction\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Ảnh hiển thị nếu không có dữ liệu -->\r\n        <div\r\n          class=\"flex align-center\"\r\n          style=\"width: 100%; flex-direction: column\"\r\n          v-show=\"Object.keys(storeCategory).length === 0 && dataFilter != ''\"\r\n        >\r\n          <img\r\n            src=\"@/assets/img/bg_report_nodata.76e50bd8.svg\"\r\n            alt=\"\"\r\n            width=\"100\"\r\n            height=\"100\"\r\n          />\r\n          <p style=\"margin: 0px; padding: 0px\">Không có dữ liệu </p>\r\n        </div>\r\n\r\n        <!-- Paging -->\r\n        <div class=\"m-paging\" v-show=\"Object.keys(storeCategory).length !== 0\">\r\n          <div class=\"paging-left\">\r\n            <!-- Paging action -->\r\n            <m-pagination\r\n              :totalPage=\"totalPage\"\r\n              :currentPage=\"pageNumber\"\r\n              :pageSize=\"pageSize\"\r\n              @changeCurrentPage=\"setCurrentPage\"\r\n            />\r\n          </div>\r\n          <div class=\"paging-right\">\r\n            <!-- <v-multiselect\r\n              ref=\"comboPaging\"\r\n              style=\"width: 250px !important\"\r\n              v-model=\"pageSize\"\r\n              :options=\"$commonConfig.pagingOptions\"\r\n              label=\"label\"\r\n              :close-on-select=\"true\"\r\n              :clearOnSelect=\"true\"\r\n              :searchable=\"false\"\r\n              noResultsText=\"Không có dữ liệu hiển thị\"\r\n              :disabled=\"false\"\r\n              :canClear=\"false\"\r\n              :canDeselect=\"false\"\r\n              openDirection=\"top\"\r\n            /> -->\r\n            \r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <category-detail ref=\"categoryDetail\"/>\r\n</template>\r\n\r\n<script>\r\nimport CategoryAPI from \"@/api/CategoryAPI\";\r\n//multi vue 3\r\nimport vMultiselect from \"@vueform/multiselect\";\r\nimport \"@vueform/multiselect/themes/default.css\";\r\n//lodash\r\nimport _ from \"lodash\";\r\n//\r\nimport CategoryDetail from \"@/views/category/CategoryDetail.vue\";\r\n\r\nexport default {\r\n  components :{\r\n      // \"v-multiselect\": vMultiselect,\r\n      \"category-detail\": CategoryDetail,\r\n  },\r\n  data() {\r\n    return {\r\n        storeCategory: [], //dữ liệu danh mục\r\n        pageSize:10 ,\r\n        dataFilter: '',\r\n        isShowSkeleton: false,     \r\n        selected: 0,  \r\n        storeAll: [], \r\n        totalPage: 0,\r\n        pageNumber: 1,        \r\n    }\r\n  },\r\n  created(){\r\n      this.initStaticData();\r\n      this.loadData();\r\n  },\r\n  methods:{\r\n    initStaticData(){\r\n      this.columns = [\r\n          {\r\n            title: 'Tên danh mục',            \r\n            key: 'category_name',\r\n            titleAlign: 'left',            \r\n          },          \r\n      ];\r\n      this.tableFunction = {          \r\n          isShow: true,\r\n          viewButton: false,\r\n          editButton: true,\r\n          deleteButton: true,\r\n      }\r\n    },\r\n    async loadData(){\r\n        let me = this;\r\n        try {\r\n          // me.$commonFunc.load();\r\n          this.isShowSkeleton = true;\r\n          this.storeCategory = [];\r\n          let res = await CategoryAPI.request(CategoryAPI.urlName, 'GET');\r\n          if(res && res.data){\r\n              this.storeCategory = JSON.parse(JSON.stringify(res.data));\r\n              this.storeAll = JSON.parse(JSON.stringify(res.data));  \r\n              this.totalPage = Math.round(res.data.length/10);      \r\n          }\r\n          this.isShowSkeleton = false;\r\n          // me.$commonFunc.unload();\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n    },\r\n\r\n    setCurrentPage(page){\r\n      if(this.pageNumber == page) return;\r\n       this.pageNumber = page;\r\n      //thực hiện filter lại\r\n      // this.filterDataServer(this.pageNumber);\r\n    },\r\n\r\n    handleGridAction(options){\r\n       if(options){\r\n            if(options.object){\r\n                if(options.action == 'View'){\r\n                    // this.view(options.object);\r\n                }\r\n                else if(options.action == 'Delete'){\r\n                  this.deleteObject(options.object);\r\n                }\r\n                else if(options.action == 'Edit'){\r\n                    this.edit(options.object);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    getItemSelected(selectedRow){\r\n        if(selectedRow && selectedRow.length > 0){\r\n            this.selected = selectedRow.length;\r\n        }else{\r\n          this.selected = 0;\r\n        }\r\n    },\r\n    hideFunction(){\r\n\r\n    },\r\n    showFunction(){\r\n\r\n    },\r\n\r\n    lodashDelay: _.debounce(function () {\r\n      this.filterData();\r\n    }, 1200),\r\n\r\n    async filterData(){\r\n        //hiện tại chỉ đáp ứng filter local do dữ liệu ít\r\n        let me = this;\r\n        me.isShowSkeleton = true;\r\n        me.storeCategory = await me.storeAll.filter(x=>x.category_name.toLowerCase().includes(this.dataFilter.toLowerCase()));\r\n        me.isShowSkeleton = false;\r\n    },\r\n    view(){\r\n\r\n    },\r\n    buttonClick(action){\r\n        switch (action) {\r\n          case 'Add':\r\n            this.openCategoryDetail();\r\n            break;\r\n        \r\n          default:\r\n            break;\r\n        }\r\n    },\r\n\r\n    openCategoryDetail(){\r\n      this.$refs.categoryDetail.show();\r\n    },\r\n\r\n    edit(object){\r\n      this.$refs.categoryDetail.showEdit(object);\r\n    },\r\n\r\n    async deleteObject(object){\r\n      let me = this;\r\n      if(object && object.category_id){\r\n          if(confirm(this.$t('message.delete_confirm'))){\r\n            try {\r\n              me.$commonFunc.load();\r\n              let res = await CategoryAPI.request(CategoryAPI.urlName, 'DELETE', [object.category_id]);\r\n              if(res && res.data){\r\n               if(res.data.StatusCode == 200){\r\n                 me.$store.commit(\"showSuccess\", {message: me.$t('message.success_delete')});\r\n                 me.loadData();\r\n               }else{  \r\n                  me.$store.commit(\"showError\", {message: res.data.DevMsg});\r\n                  console.log(res.data.DevMsg);\r\n               }\r\n              }             \r\n              me.$commonFunc.unload();\r\n            } catch (error) {\r\n              me.$store.commit(\"showError\", {message: me.$t('common.error_message')});\r\n              console.error(error);\r\n              me.$commonFunc.unload();     \r\n            }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n@import url(\"/src/style/page/base-page.css\");\r\n</style>","import { render } from \"./CategoryList.vue?vue&type=template&id=7e9625e0\"\nimport script from \"./CategoryList.vue?vue&type=script&lang=js\"\nexport * from \"./CategoryList.vue?vue&type=script&lang=js\"\n\nimport \"./CategoryList.vue?vue&type=style&index=0&id=7e9625e0&lang=css\"\n\nimport exportComponent from \"D:\\\\Traveller\\\\Traveller-Frontend\\\\traveller-ui\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","show","$data","ref","_createElementVNode","_toDisplayString","onClick","$options","_createVNode","_component_m_input","labelText","_ctx","category_name","$event","onKeyup","_component_m_label","text","_component_v_multiselect","mode","options","label","clearOnSelect","searchable","placeholder","noResultsText","canClear","canDeselect","onSelect","onDeselect","_createBlock","_component_m_button","components","vMultiselect","data","isShow","currentItem","titleForm","this","$t","editMode","storeCategory","categoryValue","openFromPost","created","initData","methods","async","me","method","validate","res","CategoryAPI","StatusCode","$store","commit","message","afterSave","Data","error","console","$refs","categoryName","focus","hide","focusFirstControl","showQuickAdd","$nextTick","categoryList","$el","length","getCategoryData","bindingData","listData","map","x","category_id","comboCategorySelected","option","comboCategoryDeSelected","categoryOriginData","i","push","value","sendToPost","listObject","filter","includes","$emit","callbackData","$parent","loadData","showEdit","object","JSON","parse","stringify","changeModeAdd","__exports__","render","_hoisted_9","style","src","_imports_0","alt","width","height","_hoisted_17","_hoisted_18","disabled","showLabel","maxlength","onInput","onFindData","title","_component_m_grid","columns","pageSize","isShowSkeleton","functionText","onEShowFunc","onHandleHideFunc","onEMultiSelect","onEDoubleClick","onGridAction","tableFunction","_hoisted_19","Object","keys","_component_m_pagination","totalPage","currentPage","onChangeCurrentPage","_hoisted_22","_component_category_detail","CategoryDetail","dataFilter","selected","storeAll","pageNumber","initStaticData","key","titleAlign","viewButton","editButton","deleteButton","Math","round","setCurrentPage","page","handleGridAction","action","deleteObject","edit","getItemSelected","selectedRow","hideFunction","showFunction","lodashDelay","_","filterData","toLowerCase","view","buttonClick","openCategoryDetail","categoryDetail","confirm","$commonFunc","load","DevMsg","log","unload"],"sourceRoot":""}