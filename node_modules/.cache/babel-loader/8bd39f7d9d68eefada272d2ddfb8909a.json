{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock, createVNode as _createVNode, withKeys as _withKeys } from \"vue\";\nconst _hoisted_1 = {\n  class: \"m-card post-card\"\n};\nconst _hoisted_2 = {\n  class: \"post__header flex\"\n};\nconst _hoisted_3 = {\n  class: \"author-info flex\"\n};\nconst _hoisted_4 = {\n  class: \"post-author-image rounded-full\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  class: \"post-author\"\n};\nconst _hoisted_7 = {\n  class: \"post-date\"\n};\nconst _hoisted_8 = {\n  key: 1,\n  class: \"flex align-center\"\n};\n\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"m-icon m-icon-24 m-extension\",\n  title: \"tính năng mở rộng\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_10 = {\n  class: \"post__content\"\n};\nconst _hoisted_11 = {\n  class: \"post_category flex\"\n};\nconst _hoisted_12 = {\n  key: 3\n};\nconst _hoisted_13 = {\n  key: 0,\n  class: \"m-card-gray-bottom post__image\"\n};\nconst _hoisted_14 = [\"src\", \"onDblclick\"];\nconst _hoisted_15 = {\n  class: \"post__action_counter flex\"\n};\nconst _hoisted_16 = {\n  class: \"flex\"\n};\n\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"m-icon-like m-icon-24\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_18 = {\n  class: \"reaction-counter\"\n};\nconst _hoisted_19 = {\n  class: \"flex\"\n};\n\nconst _hoisted_20 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"share-counter\"\n}, \"2 lượt chia sẻ\", -1\n/* HOISTED */\n);\n\nconst _hoisted_21 = {\n  class: \"post_action\"\n};\nconst _hoisted_22 = {\n  key: 0,\n  class: \"flex\"\n};\nconst _hoisted_23 = {\n  key: 0,\n  class: \"m-like mr-1\"\n};\nconst _hoisted_24 = {\n  key: 1,\n  class: \"m-liked mr-1\"\n};\n\nconst _hoisted_25 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"m-fb-icon m-comment m-icon-24 mr-1\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_26 = /*#__PURE__*/_createElementVNode(\"div\", null, \"Bình luận\", -1\n/* HOISTED */\n);\n\nconst _hoisted_27 = [_hoisted_25, _hoisted_26];\n\nconst _hoisted_28 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"button-action button-share w-1/3 p-1 flex align-center\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"m-fb-icon m-share m-icon-24 mr-1\"\n}), /*#__PURE__*/_createElementVNode(\"div\", null, \"Chia sẻ\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_29 = {\n  key: 1\n};\nconst _hoisted_30 = {\n  class: \"flex\"\n};\nconst _hoisted_31 = {\n  key: 1,\n  class: \"post__comment\"\n};\nconst _hoisted_32 = {\n  class: \"comment-write flex align-center\"\n};\nconst _hoisted_33 = {\n  key: 0,\n  class: \"comment-write flex align-center\"\n};\nconst _hoisted_34 = {\n  class: \"user-avatar rounded-full mr-2\"\n};\nconst _hoisted_35 = [\"src\"];\nconst _hoisted_36 = {\n  class: \"comment-list\"\n};\nconst _hoisted_37 = {\n  class: \"user-avatar rounded-full\"\n};\nconst _hoisted_38 = [\"src\"];\nconst _hoisted_39 = {\n  class: \"comment-box ml-1\"\n};\nconst _hoisted_40 = {\n  class: \"user-name\"\n};\nconst _hoisted_41 = {\n  class: \"user-comment\"\n};\nconst _hoisted_42 = {\n  class: \"comment-action flex\"\n};\n\nconst _hoisted_43 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"btn-reply mr-3\"\n}, \"Phản hồi\", -1\n/* HOISTED */\n);\n\nconst _hoisted_44 = [\"onClick\"];\nconst _hoisted_45 = [\"onClick\"];\nconst _hoisted_46 = {\n  class: \"comment-time\"\n};\n\nconst _hoisted_47 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"\"\n}, null, -1\n/* HOISTED */\n);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_slide = _resolveComponent(\"slide\");\n\n  const _component_navigation = _resolveComponent(\"navigation\");\n\n  const _component_pagination = _resolveComponent(\"pagination\");\n\n  const _component_Carousel = _resolveComponent(\"Carousel\");\n\n  const _component_m_button = _resolveComponent(\"m-button\");\n\n  const _component_m_message = _resolveComponent(\"m-message\");\n\n  const _component_image_view_full = _resolveComponent(\"image-view-full\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"img\", {\n    src: $options.getSrc($props.post.user_avatar_img),\n    alt: \"\",\n    class: \"img-author rounded-full\"\n  }, null, 8\n  /* PROPS */\n  , _hoisted_5)]), _createElementVNode(\"div\", null, [_createElementVNode(\"div\", _hoisted_6, _toDisplayString($props.post.author_name), 1\n  /* TEXT */\n  ), _createElementVNode(\"div\", _hoisted_7, _toDisplayString(_ctx.$commonFunc.formatDateTime($props.post.posted_date)), 1\n  /* TEXT */\n  ), _createCommentVNode(\"nếu là ngày hôm nay thì hiện giờ, nếu khác thì hiện ngày tháng\")])]), $data.isExpand ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: \"collapse-button flex align-center\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.collapseContent && $options.collapseContent(...args))\n  }, \"Thu gọn nội dung\")) : _createCommentVNode(\"v-if\", true), $data.userID == $props.post.author ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [$data.editMode != 'Edit' ? (_openBlock(), _createElementBlock(\"i\", {\n    key: 0,\n    class: \"fas fa-edit edit_icon mr-1\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.handleEdit && $options.handleEdit(...args))\n  })) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"i\", {\n    class: \"fas fa-trash-alt trash-icon action_icon\",\n    style: {\n      \"color\": \"red\"\n    },\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.handleDelete && $options.handleDelete(...args))\n  }), _hoisted_9])) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [_createCommentVNode(\" <div class=\\\"post-category-item\\\">Tây Bắc</div> \"), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($props.listCategory, (category, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"post-category-item\",\n      key: index\n    }, _toDisplayString(category.category_name), 1\n    /* TEXT */\n    );\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))]), $data.editMode != 'Edit' ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: _normalizeClass([\"post-content-text\", {\n      'non-max-height': $data.isExpand\n    }]),\n    style: {\n      \"white-space\": \"pre-wrap\"\n    }\n  }, _toDisplayString($props.post.post_content), 3\n  /* TEXT, CLASS */\n  )) : _createCommentVNode(\"v-if\", true), !$data.isExpand && $props.post.post_content.length > 500 ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 1,\n    class: \"expand-button\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.expandContent && $options.expandContent(...args))\n  }, \"Đọc tiếp\")) : _createCommentVNode(\"v-if\", true), $data.isExpand ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 2,\n    class: \"collapse-button\",\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.collapseContent && $options.collapseContent(...args))\n  }, \"Thu gọn\")) : _createCommentVNode(\"v-if\", true), $data.editMode == 'Edit' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_withDirectives(_createElementVNode(\"textarea\", {\n    ref: \"postContent\",\n    name: \"postContent\",\n    class: \"post-content-editor\",\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.post_temp.post_content = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.post_temp.post_content]])])) : _createCommentVNode(\"v-if\", true)]), $data.listPostImage.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [_createVNode(_component_Carousel, {\n    \"items-to-show\": 1\n  }, {\n    addons: _withCtx(() => [$data.listPostImage.length > 1 ? (_openBlock(), _createBlock(_component_navigation, {\n      key: 0\n    })) : _createCommentVNode(\"v-if\", true), $data.listPostImage.length > 1 ? (_openBlock(), _createBlock(_component_pagination, {\n      key: 1\n    })) : _createCommentVNode(\"v-if\", true)]),\n    default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.listPostImage, image => {\n      return _openBlock(), _createBlock(_component_slide, {\n        key: image\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"img\", {\n          src: $options.getSrc(image),\n          alt: \"\",\n          class: \"img-slide\",\n          onDblclick: $event => $options.zoomImage(image),\n          title: \"click đúp để xem ảnh to\"\n        }, null, 40\n        /* PROPS, HYDRATE_EVENTS */\n        , _hoisted_14)]),\n        _: 2\n        /* DYNAMIC */\n\n      }, 1024\n      /* DYNAMIC_SLOTS */\n      );\n    }), 128\n    /* KEYED_FRAGMENT */\n    ))]),\n    _: 1\n    /* STABLE */\n\n  })])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"div\", _hoisted_16, [_hoisted_17, _createElementVNode(\"div\", _hoisted_18, _toDisplayString($data.post_temp.like_count > 0 ? $data.post_temp.like_count : 'Bày tỏ cảm xúc'), 1\n  /* TEXT */\n  )]), _createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"div\", {\n    class: \"comment-counter\",\n    onClick: _cache[6] || (_cache[6] = (...args) => $options.commentClick && $options.commentClick(...args))\n  }, _toDisplayString($data.listComment_temp.length) + \" bình luận\", 1\n  /* TEXT */\n  ), _hoisted_20])]), _createElementVNode(\"div\", _hoisted_21, [$data.editMode != 'Edit' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, [_createElementVNode(\"div\", {\n    class: \"button-action button-like w-1/3 p-1 flex align-center\",\n    onClick: _cache[7] || (_cache[7] = $event => $options.handleLike())\n  }, [!$data.isLiked ? (_openBlock(), _createElementBlock(\"div\", _hoisted_23)) : _createCommentVNode(\"v-if\", true), $data.isLiked ? (_openBlock(), _createElementBlock(\"div\", _hoisted_24)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", {\n    ref: \"buttonLike\",\n    class: _normalizeClass([\"button-like-text\", {\n      'liked': $data.isLiked\n    }])\n  }, \"Thích\", 2\n  /* CLASS */\n  )]), _createElementVNode(\"div\", {\n    class: \"button-action button-comment w-1/3 p-1 flex align-center\",\n    onClick: _cache[8] || (_cache[8] = (...args) => $options.commentClick && $options.commentClick(...args))\n  }, _hoisted_27), _hoisted_28])) : _createCommentVNode(\"v-if\", true), $data.editMode == 'Edit' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_29, [_createElementVNode(\"div\", _hoisted_30, [_createVNode(_component_m_button, {\n    ref: \"buttonSave\",\n    type: \"info\",\n    text: \"Lưu\",\n    class: \"button-save mr-2\",\n    onClick: $options.handleSave\n  }, null, 8\n  /* PROPS */\n  , [\"onClick\"]), _createVNode(_component_m_button, {\n    ref: \"buttonSave\",\n    type: \"secondary\",\n    text: \"Hủy\",\n    class: \"button-save\",\n    onClick: $options.handleCancel\n  }, null, 8\n  /* PROPS */\n  , [\"onClick\"])])])) : _createCommentVNode(\"v-if\", true)]), $data.editMode != 'Edit' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_31, [_createElementVNode(\"div\", _hoisted_32, [_withDirectives(_createElementVNode(\"input\", {\n    ref: \"inputComment\",\n    \"onUpdate:modelValue\": _cache[9] || (_cache[9] = $event => $data.newComment = $event),\n    type: \"text\",\n    class: \"input-comment\",\n    placeholder: \"Viết bình luận...\",\n    onKeyup: [_cache[10] || (_cache[10] = _withKeys((...args) => $options.enterComment && $options.enterComment(...args), [\"enter\"])), _cache[11] || (_cache[11] = (...args) => $options.handleTyping && $options.handleTyping(...args))]\n  }, null, 544\n  /* HYDRATE_EVENTS, NEED_PATCH */\n  ), [[_vModelText, $data.newComment]])]), $data.editCommentMode ? (_openBlock(), _createElementBlock(\"div\", _hoisted_33, [_createElementVNode(\"div\", _hoisted_34, [_createElementVNode(\"img\", {\n    src: $options.getSrc($data.userAvatar),\n    alt: \"\",\n    class: \"comment-avatar rounded-full\"\n  }, null, 8\n  /* PROPS */\n  , _hoisted_35)]), _withDirectives(_createElementVNode(\"input\", {\n    ref: \"inputCommentEdit\",\n    \"onUpdate:modelValue\": _cache[12] || (_cache[12] = $event => $data.commentContent = $event),\n    type: \"text\",\n    class: \"input-comment\",\n    placeholder: \"Viết bình luận...\",\n    onKeyup: [_cache[13] || (_cache[13] = _withKeys((...args) => $options.updateComment && $options.updateComment(...args), [\"enter\"])), _cache[14] || (_cache[14] = (...args) => $options.handleTyping && $options.handleTyping(...args))]\n  }, null, 544\n  /* HYDRATE_EVENTS, NEED_PATCH */\n  ), [[_vModelText, $data.commentContent]]), _createElementVNode(\"div\", {\n    class: \"btn-cancel\",\n    onClick: _cache[15] || (_cache[15] = (...args) => $options.cancelEditComment && $options.cancelEditComment(...args))\n  }, \"Hủy bỏ\")])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_36, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.listComment_temp, comment => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"comment-item flex\",\n      key: comment.comment_id\n    }, [_createElementVNode(\"div\", _hoisted_37, [_createElementVNode(\"img\", {\n      src: $options.getSrc(comment.user_avatar_img),\n      alt: \"\",\n      class: \"comment-avatar rounded-full\"\n    }, null, 8\n    /* PROPS */\n    , _hoisted_38)]), _createElementVNode(\"div\", null, [_createElementVNode(\"div\", _hoisted_39, [_createElementVNode(\"div\", _hoisted_40, _toDisplayString(comment.full_name ? comment.full_name : 'Ẩn danh'), 1\n    /* TEXT */\n    ), _createElementVNode(\"div\", _hoisted_41, _toDisplayString(comment.comment_content), 1\n    /* TEXT */\n    )]), _createElementVNode(\"div\", _hoisted_42, [_createElementVNode(\"div\", {\n      class: \"btn-like-comment mr-2\",\n      onClick: _cache[16] || (_cache[16] = (...args) => $options.likeComment && $options.likeComment(...args))\n    }, \"Thích\"), _hoisted_43, $data.userID == comment.user_id ? (_openBlock(), _createElementBlock(\"div\", {\n      key: 0,\n      class: \"btn-reply mr-3\",\n      onClick: $event => $options.editComment(comment)\n    }, \"Chỉnh sửa\", 8\n    /* PROPS */\n    , _hoisted_44)) : _createCommentVNode(\"v-if\", true), $data.userID == $props.post.author ? (_openBlock(), _createElementBlock(\"div\", {\n      key: 1,\n      class: \"btn-reply mr-3\",\n      onClick: $event => $options.deleteComment(comment)\n    }, \"Xóa\", 8\n    /* PROPS */\n    , _hoisted_45)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" <div class=\\\"comment-time\\\">{{$commonFunc.formatDateTime(comment.created_date)}}</div> \"), _createElementVNode(\"div\", _hoisted_46, _toDisplayString(_ctx.$commonFunc.formatDateTime(comment.modified_date)), 1\n    /* TEXT */\n    )])]), _hoisted_47]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])])) : _createCommentVNode(\"v-if\", true)]), _createVNode(_component_m_message, {\n    ref: \"mMessage\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), _createVNode(_component_image_view_full, {\n    ref: \"imageViewer\"\n  }, null, 512\n  /* NEED_PATCH */\n  )], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","title","_hoisted_25","_hoisted_26","src","$options","$props","user_avatar_img","alt","_toDisplayString","author_name","_ctx","formatDateTime","posted_date","_createCommentVNode","$data","_createElementBlock","onClick","author","style","_hoisted_9","_Fragment","_renderList","category","index","key","category_name","post_content","length","_hoisted_12","ref","name","$event","_createVNode","_component_Carousel","addons","_createBlock","_component_navigation","_component_pagination","image","_component_slide","onDblclick","_hoisted_17","like_count","_hoisted_20","_hoisted_28","_hoisted_29","_component_m_button","type","text","placeholder","onKeyup","comment","comment_id","full_name","comment_content","_hoisted_43","user_id","_hoisted_44","_hoisted_45","modified_date","_hoisted_47","_component_m_message","_component_image_view_full"],"sourceRoot":"","sources":["D:\\Traveller\\Traveller-Frontend\\traveller-ui\\src\\views\\post\\PostCard.vue"],"sourcesContent":["<template>\r\n  <div class=\"m-card post-card\">\r\n    <div class=\"post__header flex\">\r\n        <div class=\"author-info flex\">\r\n            <div class=\"post-author-image rounded-full\"><img :src=\"getSrc(post.user_avatar_img)\" alt=\"\" class=\"img-author rounded-full\"></div>\r\n            <div>\r\n                <div class=\"post-author\">{{post.author_name}}</div>\r\n                <div class=\"post-date\">{{$commonFunc.formatDateTime(post.posted_date)}}</div> <!--nếu là ngày hôm nay thì hiện giờ, nếu khác thì hiện ngày tháng-->\r\n            </div>\r\n        </div>\r\n        <div class=\"collapse-button flex align-center\" v-if=\"isExpand\" @click=\"collapseContent\">Thu gọn nội dung</div>\r\n        <div class=\"flex align-center\" v-if=\"userID == post.author\">\r\n            <i class=\"fas fa-edit edit_icon mr-1\" @click=\"handleEdit\" v-if=\"editMode!='Edit'\"></i>\r\n            <i class=\"fas fa-trash-alt trash-icon action_icon\" style=\"color: red;\" @click=\"handleDelete\"></i>\r\n            <div class=\"m-icon m-icon-24 m-extension\" title=\"tính năng mở rộng\"></div>            \r\n        </div>\r\n    </div>\r\n    <div class=\"post__content\">\r\n        <div class=\"post_category flex\">            \r\n            <!-- <div class=\"post-category-item\">Tây Bắc</div> -->\r\n            <div class=\"post-category-item\" v-for=\"(category, index) in listCategory\" :key=\"index\">{{category.category_name}}</div>\r\n        </div>\r\n        <div v-if=\"editMode!='Edit'\" class=\"post-content-text\" style=\"white-space: pre-wrap;\" :class=\"{'non-max-height': isExpand}\">{{post.post_content}}</div>\r\n        <div class=\"expand-button\" @click=\"expandContent\" v-if=\"!isExpand && post.post_content.length > 500\">Đọc tiếp</div>\r\n         <div class=\"collapse-button\" v-if=\"isExpand\" @click=\"collapseContent\">Thu gọn</div>\r\n        <div v-if=\"editMode=='Edit'\">\r\n            <textarea ref=\"postContent\" name=\"postContent\" class=\"post-content-editor\" v-model=\"post_temp.post_content\"></textarea>    \r\n        </div>        \r\n    </div>\r\n    <div class=\"m-card-gray-bottom post__image\" v-if=\"listPostImage.length > 0\">\r\n        <Carousel :items-to-show=\"1\">\r\n            <slide v-for=\"image in listPostImage\" :key=\"image\">                                        \r\n                <img :src=\"getSrc(image)\" alt=\"\" class=\"img-slide\" @dblclick=\"zoomImage(image)\" title=\"click đúp để xem ảnh to\">      \r\n            </slide>                  \r\n            <template #addons>\r\n            <navigation v-if=\"listPostImage.length > 1\" />\r\n            <pagination v-if=\"listPostImage.length > 1\" />\r\n            </template>\r\n        </Carousel>\r\n    </div>  \r\n    <div class=\"post__action_counter flex\">\r\n        <div class=\"flex\">\r\n            <div class=\"m-icon-like m-icon-24\"></div>\r\n            <div class=\"reaction-counter\">{{post_temp.like_count >0 ? post_temp.like_count : 'Bày tỏ cảm xúc'}}</div>\r\n        </div>\r\n        <div class=\"flex\">\r\n            <div class=\"comment-counter\" @click=\"commentClick\">{{listComment_temp.length}} bình luận</div>\r\n            <div class=\"share-counter\">2 lượt chia sẻ</div>\r\n        </div>        \r\n    </div>\r\n    <div class=\"post_action\">\r\n        <div class=\"flex\" v-if=\"editMode!='Edit'\">\r\n            <div class=\"button-action button-like w-1/3 p-1 flex align-center\" @click=\"handleLike()\">\r\n                <div class=\"m-like mr-1\" v-if=\"!isLiked\"></div>\r\n                <div class=\"m-liked mr-1\" v-if=\"isLiked\"></div>\r\n                <div ref=\"buttonLike\" class=\"button-like-text\" :class=\"{'liked': isLiked}\">Thích</div>\r\n            </div>\r\n            <div class=\"button-action button-comment w-1/3 p-1 flex align-center\" @click=\"commentClick\">\r\n                <div class=\"m-fb-icon m-comment m-icon-24 mr-1\"></div>\r\n                <div>Bình luận</div>\r\n            </div>\r\n            <div class=\"button-action button-share w-1/3 p-1 flex align-center\">\r\n                <div class=\"m-fb-icon m-share m-icon-24 mr-1\"></div>\r\n                <div>Chia sẻ</div>\r\n            </div>\r\n        </div>\r\n        <div v-if=\"editMode == 'Edit'\">\r\n            <div class=\"flex\">\r\n                <m-button\r\n                    ref=\"buttonSave\"\r\n                    type=\"info\"\r\n                    text=\"Lưu\"\r\n                    class=\"button-save mr-2\"\r\n                    @click=\"handleSave\"\r\n                />\r\n                <m-button\r\n                    ref=\"buttonSave\"\r\n                    type=\"secondary\"\r\n                    text=\"Hủy\"\r\n                    class=\"button-save\"\r\n                    @click=\"handleCancel\"\r\n                />\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"post__comment\" v-if=\"editMode!='Edit'\">\r\n        <div class=\"comment-write flex align-center\">            \r\n            <input                 \r\n                ref=\"inputComment\" \r\n                v-model=\"newComment\"\r\n                type=\"text\"\r\n                class=\"input-comment\"\r\n                placeholder=\"Viết bình luận...\"\r\n                @keyup.enter=\"enterComment\"\r\n                @keyup=\"handleTyping\"/>\r\n        </div>\r\n        <div class=\"comment-write flex align-center\" v-if=\"editCommentMode\">  \r\n            <div class=\"user-avatar rounded-full mr-2\">\r\n                <img :src=\"getSrc(userAvatar)\" alt=\"\" class=\"comment-avatar rounded-full\">\r\n            </div>         \r\n            <input                 \r\n                ref=\"inputCommentEdit\" \r\n                v-model=\"commentContent\"\r\n                type=\"text\"\r\n                class=\"input-comment\"\r\n                placeholder=\"Viết bình luận...\"\r\n                @keyup.enter=\"updateComment\"\r\n                @keyup=\"handleTyping\"/>\r\n            <div class=\"btn-cancel\" @click=\"cancelEditComment\">Hủy bỏ</div>\r\n        </div>\r\n        <div class=\"comment-list\">\r\n            <div class=\"comment-item flex\" v-for=\"comment in listComment_temp\" v-bind:key=\"comment.comment_id\">\r\n                <div class=\"user-avatar rounded-full\">\r\n                    <img :src=\"getSrc(comment.user_avatar_img)\" alt=\"\" class=\"comment-avatar rounded-full\">\r\n                </div>\r\n                <div>\r\n                    <div class=\"comment-box ml-1\">\r\n                        <div class=\"user-name\">{{comment.full_name? comment.full_name : 'Ẩn danh'}}</div>\r\n                        <div class=\"user-comment\">{{comment.comment_content}}</div>\r\n                    </div>\r\n                    <div class=\"comment-action flex\">\r\n                        <div class=\"btn-like-comment mr-2\" @click=\"likeComment\">Thích</div>\r\n                        <div class=\"btn-reply mr-3\">Phản hồi</div>\r\n                        <div class=\"btn-reply mr-3\" @click=\"editComment(comment)\" v-if=\"userID == comment.user_id\">Chỉnh sửa</div>\r\n                        <div class=\"btn-reply mr-3\" @click=\"deleteComment(comment)\" v-if=\"userID == post.author\">Xóa</div>\r\n                        <!-- <div class=\"comment-time\">{{$commonFunc.formatDateTime(comment.created_date)}}</div> -->\r\n                        <div class=\"comment-time\">{{$commonFunc.formatDateTime(comment.modified_date)}}</div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"\"></div>\r\n            </div>\r\n        </div>\r\n    </div>    \r\n  </div>  \r\n  <m-message ref=\"mMessage\"/>\r\n  <image-view-full ref=\"imageViewer\"/>\r\n</template>\r\n\r\n<script>\r\nimport PostAPI from \"@/api/PostAPI\";\r\nimport CommentAPI from \"@/api/CommentAPI\"\r\nimport 'vue3-carousel/dist/carousel.css'\r\nimport { Carousel, Slide, Pagination, Navigation } from 'vue3-carousel';\r\nimport ImageViewFull from \"@/views/post/ImageViewFull.vue\";\r\nexport default {\r\n    emits:[\r\n        \"removeItem\"\r\n    ],\r\n    components:{\r\n        /* eslint-disable vue/no-unused-components */        \r\n        Carousel,        \r\n        Slide,        \r\n        Pagination,        \r\n        Navigation,\r\n        \"image-view-full\": ImageViewFull,\r\n    },\r\n    props:{\r\n        post:{\r\n            type: Object,\r\n            default: ()=>{}\r\n        },\r\n        listComment:{\r\n            type: Array,\r\n            default: ()=>[]\r\n        },\r\n        listCategory:{\r\n            type: Array,\r\n            default: ()=>[]\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            isLiked: false,\r\n            editMode: 'View',\r\n            post_temp: this.post ? this.post : {},\r\n            newComment: \"\",\r\n            listComment_temp: this.listComment? this.listComment : [],\r\n            userID: this.$session.get('UserID'),\r\n            userAvatar: this.$session.get(\"UserAvatar\"),\r\n            fullName: this.$session.get('FullName'),\r\n            listPostImage: this.post.post_image? JSON.parse(this.post.post_image) : [],            \r\n            //listPostImage: [\"https://picsum.photos/200/300\", \"https://picsum.photos/id/237/200/300\"]        \r\n            editCommentMode: false,    \r\n            commentContent: '', // vmodel cho chỉnh sửa comment\r\n            currentComment: {},\r\n            isExpand: false,            \r\n        }\r\n    },\r\n    methods:{\r\n        /**\r\n        * Hàm thu gọn nội dung bài viết\r\n        * @created : quyetkaito 06/11/2022\r\n        */\r\n        collapseContent(){\r\n            this.isExpand = false;\r\n        },\r\n\r\n        /**\r\n        * Hàm mở rộng nội dung bài viết\r\n        * @created : quyetkaito 06/11/2022\r\n        */\r\n        expandContent(){\r\n            this.isExpand = true;\r\n        },\r\n\r\n        /**\r\n         * hàm hủy chỉnh sửa comment\r\n         */\r\n        cancelEditComment(){\r\n            this.listComment_temp.unshift(this.currentComment);\r\n            this.editCommentMode = false;\r\n        },\r\n\r\n        /**\r\n        * Hàm chỉnh sửa comment\r\n        * @created : quyetkaito 28/10/2022\r\n        * @param {Object} comment : comment đang chỉnh sửa\r\n        */\r\n        editComment(comment){\r\n            if(comment){\r\n                let me = this;\r\n                //chuyển thành dạng input\r\n                me.editCommentMode = true;\r\n                me.commentContent = comment.comment_content;                \r\n                me.$nextTick(()=>{\r\n                    me.$refs.inputCommentEdit.focus();\r\n                });\r\n                me.currentComment = comment;\r\n                //bỏ comment đó trong list hiện tại đi\r\n                this.listComment_temp.splice(this.listComment_temp.indexOf(comment), 1);\r\n            }\r\n        },\r\n\r\n        async updateComment(){\r\n            let me = this;\r\n            me.editCommentMode = false;\r\n            let obj = {\r\n                comment_id: me.currentComment.comment_id,\r\n                comment_content: me.commentContent, //nội dung\r\n                post_id: me.post.post_id, //id bài viết\r\n                user_id: me.userID,   \r\n                modified_date: me.$commonFunc.setTimeZone(new Date()),  \r\n                full_name: me.fullName,   \r\n                user_avatar_img: me.userAvatar,\r\n                created_date: me.currentComment.created_date,            \r\n            };\r\n            //gọi api post comment này     \r\n            try {\r\n                let res = await CommentAPI.request(CommentAPI.urlName, 'PUT', obj);\r\n                if(res && res.data){\r\n                    debugger\r\n                    if(res.data.StatusCode == 200){\r\n                        console.log(\"Bình luận thành công\");\r\n                        //clear text ở ô bình luận\r\n                        this.newComment = \"\";\r\n                        //push một đối tượng comment vào ô bình luận\r\n                        let newObj = Object.assign({comment_id: res.data.Data.comment_id}, obj); \r\n                        this.listComment_temp.unshift(newObj); //callback để lấy thông tin id\r\n                    }else{\r\n                        console.log(\"Bình luận thất bại\");\r\n                        console.log(res.data.DevMsg);\r\n                    }\r\n                }                    \r\n            } catch (error) {\r\n                console.error(error);\r\n            }       \r\n        },\r\n\r\n        /**\r\n         * Like bình luận\r\n         */\r\n        likeComment(){\r\n            //đổi text thành màu xanh\r\n            let me = this;            \r\n            // this.$refs.mMessage.showConfirm(\"hí\");\r\n        },\r\n\r\n        /**\r\n         * Xóa bình luận\r\n         */\r\n        async deleteComment(comment){\r\n            if(comment){\r\n                try {\r\n                    let me = this;\r\n                    if(confirm(\"Bạn có chắc chắn muốn xóa\")){\r\n                        let res = await CommentAPI.request(CommentAPI.urlName, 'DELETE', [comment.comment_id]);\r\n                        if(res && res.data && res.data.StatusCode == 200){                            \r\n                            console.log(\"xóa bình luận thành công\");\r\n                            //loại bỏ comment khỏi bài viết này                            \r\n                            this.listComment_temp.splice(this.listComment_temp.indexOf(comment), 1);\r\n                        }\r\n                    }\r\n                } catch (error) {\r\n                    console.error(error);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n        * Phóng to ảnh khi bấm vào\r\n        * @param {Link} src : link ảnh\r\n        * @created : quyetkaito 23/10/2022\r\n        */\r\n        zoomImage(src){\r\n            //bản chất là mở một postcard full màn hình\r\n            if(src){\r\n                this.$refs.imageViewer.show(src);\r\n            }\r\n        },\r\n        /**\r\n        * Binding image source\r\n        * @created : quyetkaito 16/10/2022\r\n        */\r\n        getSrc(src){\r\n            if(src){\r\n                return src;\r\n            }else{\r\n                return require(\"@/assets/img/default-avatar.jpg\");\r\n            }\r\n        },\r\n\r\n        getListSrc(){\r\n\r\n        },\r\n\r\n        handleTyping(){\r\n            //thực hiện resize text-area\r\n            let textarea = this.$refs.inputComment;\r\n            textarea.style.height = textarea.scrollHeight; \r\n        },\r\n        handleCancel(){\r\n            this.editMode = 'View';\r\n        },\r\n\r\n        checkLogin(){\r\n            if(this.$session.get('UserID')){\r\n                return true;\r\n            }else{\r\n                return false;\r\n            }\r\n        },\r\n\r\n        /**\r\n        * Hàm xủ lý khi enter ở ô input bình luận\r\n        * @created : quyetkaito 15/10/2022\r\n        */\r\n        async enterComment(){\r\n            let me = this;\r\n            if(!me.checkLogin()){\r\n                this.$store.commit('showInfo', {message: \"Vui lòng đăng nhập để thực hiện tính năng này.\"})\r\n                return;\r\n            }\r\n            if(me.newComment){\r\n                let obj = {\r\n                    comment_content: me.newComment, //nội dung\r\n                    post_id: me.post.post_id, //id bài viết\r\n                    user_id: me.$session.get('UserID'),   \r\n                    full_name: me.$session.get('FullName'),   \r\n                    user_avatar_img: me.$session.get('UserAvatar'),            \r\n                };\r\n                //gọi api post comment này     \r\n                try {\r\n                    let res = await CommentAPI.request(CommentAPI.urlName, 'POST', obj);\r\n                    if(res && res.data){\r\n                        if(res.data.StatusCode == 201){\r\n                            console.log(\"Bình luận thành công\");\r\n                            //clear text ở ô bình luận\r\n                            this.newComment = \"\";\r\n                            //push một đối tượng comment vào ô bình luận\r\n                            let newObj = Object.assign(res.data.Data, obj); \r\n                            this.listComment_temp.unshift(newObj); //callback để lấy thông tin id\r\n                        }else{\r\n                            console.log(\"Bình luận thất bại\");\r\n                            console.log(res.data.DevMsg);\r\n                        }\r\n                    }                    \r\n                } catch (error) {\r\n                    console.error(error);\r\n                }           \r\n            }\r\n        },\r\n\r\n        /**\r\n        * Xử lý khi click vào nút bình luận\r\n        * @created : quyetkaito 15/10/2022\r\n        */\r\n        commentClick(){\r\n            //show ra danh sách bình luận. lúc này mới gọi api cho chuẩn\r\n            //focus vào ô viết bình luận\r\n            this.$refs.inputComment.focus();\r\n        },\r\n\r\n        /**\r\n        * Xử lý chỉnh sửa bài viết\r\n        * @created : quyetkaito 15/10/2022\r\n        */\r\n        async handleEdit(){\r\n            let me =  this;\r\n            // this.editMode = 'Edit';\r\n            // me.$nextTick(()=>{\r\n            //     this.$refs.postContent.focus();\r\n            // })            \r\n            //đổi sang dùng popup, gọi tới post list yêu cầu hiển thị popup\r\n            this.$parent.openPostEdit(this.post, this.listCategory);\r\n        },\r\n\r\n        async handleSave(){\r\n            let me = this;\r\n            if(me.post_temp){\r\n                try {\r\n                    let res = await PostAPI.request(PostAPI.urlName, 'PUT', me.post_temp);\r\n                    if(res && res.data){\r\n                        if(res.data.StatusCode == 200){\r\n                            console.log(\"Câp nhật thành công\");\r\n                            this.editMode = 'View';\r\n                        }else{\r\n                            console.error(\"Cập nhật thất bại.\", res.data.DevMsg);\r\n                        }\r\n                    }\r\n                } catch (error) {\r\n                    console.error(error)\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n        * Hàm xử lý khi bấm nút like\r\n        * @created : quyetkaito 15/10/2022\r\n        */\r\n        async handleLike(){\r\n            let me = this;\r\n            this.isLiked  = !this.isLiked;\r\n            if(!this.isLiked){\r\n                if(this.$refs.buttonLike){\r\n                    this.$refs.buttonLike.classList.remove('liked'); \r\n                    if(this.post_temp.like_count > 0){\r\n                        this.post_temp.like_count -= 1;\r\n                        await me.handleSave();                   \r\n                    }\r\n                }\r\n            }else{\r\n                if(this.$refs.buttonLike){\r\n                    this.$refs.buttonLike.classList.add('liked');\r\n                    this.post_temp.like_count += 1;                   \r\n                    await me.handleSave();\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n        * Hàm thực hiện xóa \r\n        * @created : quyetkaito 15/10/2022\r\n        */\r\n        async handleDelete(){\r\n            if(confirm(\"Bạn có chắc chắn muốn xóa bài viết này?\")){\r\n                let me = this;\r\n                if(me.post.post_id){\r\n                    try {\r\n                        let res = await PostAPI.request(PostAPI.urlName+`/${me.post.post_id}`, 'DELETE');                        \r\n                        if(res && res.data){\r\n                            if(res.data.StatusCode == 200){\r\n                                console.log(\"Xóa thành công:\", me.post.post_id);\r\n                                this.$parent.loadData();\r\n                                me.$emit('removeItem', me.post);\r\n                            }else{\r\n                                console.error(\"Xóa không thành công:\", me.post.post_id);\r\n                            }\r\n                        }\r\n                    } catch (error) {\r\n                        console.error(error);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.post-card{\r\n    .post__header{\r\n        justify-content: space-between;\r\n        .author-info{\r\n            align-items: center;\r\n        }\r\n        .post-author-image{\r\n            width: 50px;\r\n            height: 50px;    \r\n            border: 2px solid var(--info-color);\r\n            margin-right: 10px;\r\n    \r\n            .img-author{\r\n                object-fit: cover;\r\n                width: 100%;\r\n                height: 100%;    \r\n            }\r\n        }\r\n        .post-date{\r\n            font-size: 12px;\r\n        }\r\n        .collapse-button{\r\n            color: var(--info-color);\r\n            font-style: italic;\r\n            cursor: pointer;\r\n        }\r\n    }\r\n\r\n    .post__content{\r\n        padding: 5px 10px 10px 10px;\r\n        .post-content-editor{\r\n            width: 100%;\r\n            outline: none;\r\n            min-height: 18px;\r\n        }\r\n        .post-content-text{\r\n            max-height: 145px;\r\n            overflow: hidden;\r\n        }\r\n        .expand-button,\r\n        .collapse-button{\r\n            color: var(--info-color);\r\n            font-style: italic;\r\n            cursor: pointer;\r\n        }\r\n    }\r\n    .post__action_counter{\r\n        padding-top: 10px;\r\n        padding-bottom: 10px;\r\n        justify-content: space-between;\r\n        .reaction-counter{\r\n            margin-left: 5px;\r\n        }\r\n        .share-counter{\r\n        \r\n        }\r\n        .share-counter:hover{\r\n            text-decoration: underline;\r\n            cursor: pointer;\r\n        }\r\n        .comment-counter{\r\n            margin-right: 10px;\r\n        }\r\n        .comment-counter:hover{\r\n            text-decoration: underline;\r\n            cursor: pointer;\r\n        }\r\n    }\r\n    \r\n    .post_action{\r\n        .button-action{\r\n            border-radius: 8px;\r\n            text-align: center;\r\n            cursor: pointer;\r\n            padding-top: 10px;\r\n            padding-bottom: 10px;\r\n        }\r\n        .button-action:hover{\r\n            background: #F2F2F2;\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n.button-like-text.liked{\r\n    color: var(--info-color);\r\n    font-weight: bold;\r\n}\r\n.post_category .post-category-item{\r\n    border-radius: 3px;\r\n    background: #e5e5e5;\r\n    font-size: 11px;\r\n    cursor: pointer;\r\n    padding: 3px 5px 3px 5px;\r\n    margin-right: 2px;\r\n}\r\n.edit_icon{\r\n    width: 24px;\r\n    height: 24px;      \r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border-radius: 3px;\r\n    cursor: pointer;\r\n    color: var(--info-color);\r\n}\r\n.edit_icon:hover{\r\n    background: #e5e5e5;\r\n    color: var(--info-color);\r\n}\r\n.trash-icon{\r\n    width: 24px;\r\n    height: 24px;\r\n    background: #e5e5e5;    \r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border-radius: 3px;\r\n    cursor: pointer;\r\n}\r\n.trash-icon:hover{\r\n    background: var(--border-color);\r\n}\r\n\r\n.m-extension{\r\n    width: 24px;\r\n    height: 24px;       \r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border-radius: 3px;\r\n    cursor: pointer;\r\n}\r\n.post_action .button-save{\r\n    width: 100%!important;\r\n}\r\n.post_action .button-save button{\r\n    width: 100%!important;\r\n}\r\n\r\n.post__comment .comment-write{\r\n    padding-top:5px;\r\n    textarea{\r\n        resize: none;\r\n        height: fit-content;     \r\n        max-height: 100px;\r\n        overflow: auto;\r\n    }\r\n    .btn-cancel{\r\n        margin-left: 8px;\r\n        white-space: nowrap;\r\n        cursor: pointer;\r\n    }\r\n}\r\n.input-comment{\r\n    padding-left: 10px;\r\n    outline: none;    \r\n    height: 36px;\r\n    border-radius: 10px;\r\n    background: #F0F2F5;\r\n    font-size: 15px;\r\n    width: 100%;    \r\n}\r\n.input-comment::placeholder{\r\n    font-size: 15px;\r\n}\r\n.comment-item{\r\n    padding: 10px;\r\n}\r\n.comment-write .user-avatar,\r\n.comment-item .user-avatar{\r\n    width: 40px;\r\n    height: 40px; \r\n    min-width: 40px;   \r\n    min-height: 40px;   \r\n    border: 2px solid var(--info-color);  \r\n    margin-top: 10px;\r\n    cursor: pointer;\r\n}\r\n.comment-write .user-avatar .comment-avatar,\r\n.comment-item .user-avatar .comment-avatar{\r\n    width:100%;\r\n    height: 100%;\r\n    object-fit: cover;\r\n}\r\n.comment-box{\r\n    background: #F0F2F5;\r\n    border-radius: 10px;    \r\n    padding: 10px;\r\n}\r\n.comment-box .user-name{\r\n    font-weight: 500;\r\n    cursor: pointer;\r\n}\r\n.comment-box .user-name:hover{\r\n    text-decoration: underline;\r\n}\r\n.comment-item .comment-action{\r\n    margin-left: 10px;\r\n    .btn-like-comment{\r\n        font-size: 13px;\r\n        cursor: pointer;\r\n        font-weight: 500;\r\n    }\r\n    .btn-like-comment:hover{\r\n        text-decoration: underline;\r\n    }\r\n    .btn-reply{\r\n        font-size: 13px;\r\n        cursor: pointer;\r\n        font-weight: 500;\r\n    }\r\n    .btn-reply:hover{\r\n        text-decoration: underline;\r\n    }\r\n    .comment-time{\r\n        font-size: 12px;    \r\n        cursor: pointer;\r\n    }\r\n    .comment-time:hover{\r\n        text-decoration: underline;\r\n    }\r\n}\r\n\r\n.non-max-height{\r\n    max-height: unset!important;\r\n}\r\n\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}