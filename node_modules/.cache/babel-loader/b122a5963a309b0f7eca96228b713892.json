{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, vShow as _vShow, withDirectives as _withDirectives, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nimport _imports_0 from '@/assets/img/bg_report_nodata.76e50bd8.svg';\nconst _hoisted_1 = {\n  class: \"content\"\n};\nconst _hoisted_2 = {\n  class: \"content-top-container\"\n};\nconst _hoisted_3 = {\n  class: \"content-top\"\n};\nconst _hoisted_4 = {\n  class: \"page-title\"\n};\nconst _hoisted_5 = {\n  class: \"\"\n};\nconst _hoisted_6 = {\n  class: \"content-bottom\"\n};\nconst _hoisted_7 = {\n  class: \"filter-area flex\"\n};\nconst _hoisted_8 = {\n  class: \"flex align-x-y-center\"\n};\nconst _hoisted_9 = [\"disabled\"];\nconst _hoisted_10 = {\n  class: \"m-btn-text text-dropdown\"\n};\nconst _hoisted_11 = {\n  class: \"content-filter flex align-y-center justify-end\"\n};\nconst _hoisted_12 = {\n  style: {\n    \"width\": \"240px\"\n  }\n};\nconst _hoisted_13 = {\n  style: {\n    \"position\": \"relative\"\n  }\n};\nconst _hoisted_14 = {\n  style: {\n    \"position\": \"relative\"\n  }\n};\nconst _hoisted_15 = {\n  class: \"content-grid\"\n};\nconst _hoisted_16 = {\n  class: \"table-container\"\n};\nconst _hoisted_17 = {\n  class: \"flex align-center\",\n  style: {\n    \"width\": \"100%\",\n    \"flex-direction\": \"column\"\n  }\n};\n\nconst _hoisted_18 = /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  alt: \"\",\n  width: \"100\",\n  height: \"100\"\n}, null, -1);\n\nconst _hoisted_19 = /*#__PURE__*/_createElementVNode(\"p\", {\n  style: {\n    \"margin\": \"0px\",\n    \"padding\": \"0px\"\n  }\n}, \"Không có dữ liệu\", -1);\n\nconst _hoisted_20 = [_hoisted_18, _hoisted_19];\nconst _hoisted_21 = {\n  class: \"m-paging\"\n};\nconst _hoisted_22 = {\n  class: \"paging-left\"\n};\nconst _hoisted_23 = {\n  class: \"m-table-counter flex\"\n};\n\nconst _hoisted_24 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"m-table-counter__label\"\n}, \"Tổng số: \", -1);\n\nconst _hoisted_25 = {\n  class: \"m-table-counter__number mr-1 ml-1 font-semibold\"\n};\n\nconst _hoisted_26 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"m-table-counter__record\"\n}, \"bản ghi\", -1);\n\nconst _hoisted_27 = {\n  class: \"paging-right\"\n};\nconst _hoisted_28 = {\n  class: \"pagination-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_m_button = _resolveComponent(\"m-button\");\n\n  const _component_m_input = _resolveComponent(\"m-input\");\n\n  const _component_m_grid = _resolveComponent(\"m-grid\");\n\n  const _component_v_multiselect = _resolveComponent(\"v-multiselect\");\n\n  const _component_m_pagination = _resolveComponent(\"m-pagination\");\n\n  const _component_user_detail = _resolveComponent(\"user-detail\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, _toDisplayString(_ctx.$t('UserManager')), 1), _createVNode(_component_m_button, {\n    text: _ctx.$t('common.add_new'),\n    onClick: _cache[0] || (_cache[0] = $event => $options.buttonClick('Add'))\n  }, null, 8, [\"text\"])])]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"button\", {\n    class: \"m-btn-dropdown\",\n    disabled: $data.itemSelected < 2,\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.multiDelete && $options.multiDelete(...args))\n  }, [_createElementVNode(\"div\", _hoisted_10, _toDisplayString(_ctx.$t(\"MultiDelete\")), 1)], 8, _hoisted_9)]), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_createVNode(_component_m_input, {\n    ref: \"searchInput\",\n    showLabel: false,\n    maxlength: 255,\n    width: 240,\n    isHasIcon: true,\n    modelValue: $data.dataFilter,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.dataFilter = $event),\n    placeholder: \"Tìm kiếm\",\n    onInput: _cache[3] || (_cache[3] = $event => $options.lodashDelay(_ctx.value)),\n    onFindData: $options.filterDataServer\n  }, null, 8, [\"modelValue\", \"onFindData\"])]), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"div\", {\n    title: \"Lấy lại dữ liệu\",\n    class: \"m-icon m-icon-24 m-refresh btn-refresh\",\n    onClick: _cache[4] || (_cache[4] = $event => $options.buttonClick('Refresh'))\n  })]), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", {\n    title: \"Xuất ra excel\",\n    class: \"m-icon m-icon-24 m-excel__nav btn-export\",\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.exportData && $options.exportData(...args))\n  })])])]), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"div\", _hoisted_16, [_createVNode(_component_m_grid, {\n    ref: \"mygrid\",\n    listData: $data.storeUser,\n    columns: $data.columns,\n    pageSize: $data.pageSize,\n    isShowSkeleton: $data.isShowSkeleton,\n    functionText: \"Sửa\",\n    onEShowFunc: $options.showFunction,\n    onHandleHideFunc: $options.hideFunction,\n    onEMultiSelect: $options.getitemSelected,\n    onEDoubleClick: $options.view,\n    onGridAction: $options.handleGridAction\n  }, null, 8, [\"listData\", \"columns\", \"pageSize\", \"isShowSkeleton\", \"onEShowFunc\", \"onHandleHideFunc\", \"onEMultiSelect\", \"onEDoubleClick\", \"onGridAction\"])])]), _withDirectives(_createElementVNode(\"div\", _hoisted_17, _hoisted_20, 512), [[_vShow, Object.keys($data.storeUser).length === 0 && $data.dataFilter != '']]), _withDirectives(_createElementVNode(\"div\", _hoisted_21, [_createElementVNode(\"div\", _hoisted_22, [_createElementVNode(\"div\", _hoisted_23, [_hoisted_24, _createElementVNode(\"div\", _hoisted_25, _toDisplayString(_ctx.$commonFunc.formatNumber($data.totalRecord)), 1), _hoisted_26])]), _createElementVNode(\"div\", _hoisted_27, [_createVNode(_component_v_multiselect, {\n    ref: \"comboPaging\",\n    style: {\n      \"width\": \"250px !important\"\n    },\n    modelValue: $data.pageSize,\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.pageSize = $event),\n    options: $data.pagingOptions,\n    label: \"label\",\n    \"close-on-select\": true,\n    clearOnSelect: true,\n    searchable: false,\n    noResultsText: \"Không có dữ liệu hiển thị\",\n    disabled: false,\n    canClear: false,\n    canDeselect: false,\n    openDirection: \"top\",\n    onSelect: $options.comboPagingSelected\n  }, null, 8, [\"modelValue\", \"options\", \"onSelect\"]), _createElementVNode(\"div\", _hoisted_28, [_createVNode(_component_m_pagination, {\n    totalPage: $data.totalPage,\n    currentPage: $data.pageNumber,\n    pageSize: $data.pageSize,\n    onChangeCurrentPage: $options.setCurrentPage\n  }, null, 8, [\"totalPage\", \"currentPage\", \"pageSize\", \"onChangeCurrentPage\"])])])], 512), [[_vShow, Object.keys($data.storeUser).length !== 0]])])])]), _createVNode(_component_user_detail, {\n    ref: \"userDialog\"\n  }, null, 512)], 64);\n}","map":{"version":3,"mappings":"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","names":["_imports_0","class","style","_createElementVNode","src","alt","width","height","_hoisted_18","_hoisted_19","_toDisplayString","_ctx","_createVNode","_component_m_button","text","onClick","$options","disabled","$data","_component_m_input","ref","showLabel","maxlength","isHasIcon","$event","placeholder","onInput","onFindData","title","_component_m_grid","listData","columns","pageSize","isShowSkeleton","functionText","onEShowFunc","onHandleHideFunc","onEMultiSelect","onEDoubleClick","onGridAction","_hoisted_20","Object","keys","length","_hoisted_24","formatNumber","_hoisted_26","_component_v_multiselect","options","label","clearOnSelect","searchable","noResultsText","canClear","canDeselect","openDirection","onSelect","_component_m_pagination","totalPage","currentPage","onChangeCurrentPage","_component_user_detail"],"sourceRoot":"","sources":["D:\\Traveller\\Traveller-Frontend\\traveller-ui\\src\\views\\user\\UserList.vue"],"sourcesContent":["<template>\r\n  <!-- Content riêng của trang Employee -->\r\n  <div class=\"content\">\r\n    <div class=\"content-top-container\">\r\n      <div class=\"content-top\">\r\n        <div class=\"page-title\">{{ $t('UserManager') }}</div>\r\n        <m-button :text=\"$t('common.add_new')\" @click=\"buttonClick('Add')\" />\r\n      </div>\r\n    </div>\r\n    <div class=\"\">\r\n      <div class=\"content-bottom\">\r\n        <div class=\"filter-area flex\">\r\n          <!-- Xóa nhiều -->\r\n          <div class=\"flex align-x-y-center\">\r\n            <button class=\"m-btn-dropdown\" :disabled=\"itemSelected<2\" @click=\"multiDelete\">\r\n              <div class=\"m-btn-text text-dropdown\">{{$t(\"MultiDelete\")}}</div>              \r\n            </button>            \r\n          </div>\r\n          <!-- Các component filter dữ liệu -->\r\n          <div class=\"content-filter flex align-y-center justify-end\">\r\n            <!-- Input Search -->\r\n            <div style=\"width: 240px\">\r\n              <m-input\r\n                ref=\"searchInput\"\r\n                :showLabel=\"false\"\r\n                :maxlength=\"255\"\r\n                :width=\"240\"\r\n                :isHasIcon=\"true\"\r\n                v-model=\"dataFilter\"\r\n                placeholder=\"Tìm kiếm\"\r\n                @input=\"lodashDelay(value)\"\r\n                @findData=\"filterDataServer\"\r\n              />\r\n            </div>\r\n\r\n            <div style=\"position: relative\">\r\n              <div\r\n                title=\"Lấy lại dữ liệu\"\r\n                class=\"m-icon m-icon-24 m-refresh btn-refresh\"\r\n                @click=\"buttonClick('Refresh')\"\r\n              ></div>              \r\n            </div>\r\n            <div style=\"position: relative\">\r\n              <div\r\n              title=\"Xuất ra excel\"\r\n                class=\"m-icon m-icon-24 m-excel__nav btn-export\"\r\n                @click=\"exportData\"\r\n              ></div>              \r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Bảng -->\r\n        <div class=\"content-grid\">\r\n          <div class=\"table-container\">\r\n            <m-grid\r\n              ref=\"mygrid\"\r\n              :listData=\"storeUser\"\r\n              :columns=\"columns\"\r\n              :pageSize=\"pageSize\"\r\n              :isShowSkeleton=\"isShowSkeleton\"\r\n              functionText=\"Sửa\"\r\n              @eShowFunc=\"showFunction\"\r\n              @handleHideFunc=\"hideFunction\"\r\n              @eMultiSelect=\"getitemSelected\"\r\n              @eDoubleClick=\"view\"\r\n              @gridAction=\"handleGridAction\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Ảnh hiển thị nếu không có dữ liệu -->\r\n        <div\r\n          class=\"flex align-center\"\r\n          style=\"width: 100%; flex-direction: column\"\r\n          v-show=\"Object.keys(storeUser).length === 0 && dataFilter != ''\"\r\n        >\r\n          <img\r\n            src=\"@/assets/img/bg_report_nodata.76e50bd8.svg\"\r\n            alt=\"\"\r\n            width=\"100\"\r\n            height=\"100\"\r\n          />\r\n          <p style=\"margin: 0px; padding: 0px\">Không có dữ liệu</p>\r\n        </div>\r\n\r\n        <!-- Paging -->\r\n        <div class=\"m-paging\" v-show=\"Object.keys(storeUser).length !== 0\">\r\n          <div class=\"paging-left\">\r\n            <div class=\"m-table-counter flex\">\r\n              <div class=\"m-table-counter__label\">Tổng số: </div>\r\n              <div class=\"m-table-counter__number mr-1 ml-1 font-semibold\">{{$commonFunc.formatNumber(totalRecord)}}</div>\r\n              <div class=\"m-table-counter__record\">bản ghi</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"paging-right\">\r\n            <!-- Combobox Paging -->\r\n            <!-- <vue-select\r\n              ref=\"comboPaging\"\r\n              style=\"width: 200px !important\"\r\n              :options=\"pagingOptions\"\r\n              v-model=\"pageSize\"\r\n              :label-by=\"(pagingOptions) => pagingOptions.label\"\r\n              :value-by=\"(pagingOptions) => pagingOptions.value\"\r\n              placeholder=\"\"\r\n              close-on-select\r\n              :disabled=\"disableComboboxPaging\"\r\n            >\r\n            </vue-select> -->\r\n            <v-multiselect\r\n              ref=\"comboPaging\"\r\n              style=\"width: 250px !important\"\r\n              v-model=\"pageSize\"\r\n              :options=\"pagingOptions\"\r\n              label=\"label\"\r\n              :close-on-select=\"true\"\r\n              :clearOnSelect=\"true\"\r\n              :searchable=\"false\"\r\n              noResultsText=\"Không có dữ liệu hiển thị\"\r\n              :disabled=\"false\"\r\n              :canClear=\"false\"\r\n              :canDeselect=\"false\"\r\n              openDirection=\"top\"\r\n              @select=\"comboPagingSelected\"\r\n            />\r\n            <!-- Paging action -->\r\n            <div class=\"pagination-container\">\r\n              <m-pagination\r\n                :totalPage=\"totalPage\"\r\n                :currentPage=\"pageNumber\"\r\n                :pageSize=\"pageSize\"\r\n                @changeCurrentPage=\"setCurrentPage\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- <ms-employee-dialog\r\n      ref=\"addDialog\"\r\n      :isShow=\"isShowDialog\"\r\n      @showDialog=\"showEmployeeDialog(value)\"\r\n      @eCloseDialog=\"closeDialog\"\r\n      @loadData=\"loadData()\"\r\n      :itemSelected=\"itemSelected\"\r\n      :formMode=\"formMode\"\r\n    /> -->\r\n    <!-- <ms-popup\r\n      ref=\"popup\"\r\n      :popupType=\"popupType\"\r\n      :isShow=\"isShowPopup\"\r\n      :itemSelected=\"itemSelected\"\r\n      @showPopup=\"showMessagebox(isShow)\"\r\n      @deleteComfirm=\"deleteEmployee(itemSelected)\"\r\n      @multiDeleteConfirm=\"multiDeleteEmployee\"\r\n      :text=\"popupText\"\r\n      :isMultiDelete=\"isMultiDelete\"\r\n    />    -->\r\n  </div>\r\n  <user-detail ref=\"userDialog\"/>\r\n</template>\r\n\r\n<script>\r\n//import Library\r\nimport _ from \"lodash\";\r\n// const FileDownload = require(\"js-file-download\");\r\n//multi vue 3\r\nimport vMultiselect from \"@vueform/multiselect\";\r\nimport \"@vueform/multiselect/themes/default.css\";\r\n\r\nimport UserAPI from \"@/api/UserAPI\";\r\nimport UserDetail from \"@/views/user/UserDetail.vue\";\r\n\r\nexport default {\r\n  name: \"EmployeeList\",\r\n  components: {\r\n    // \"ms-employee-dialog\": EmployeeDetail,\r\n    // \"ms-pagination\": MSPagination,\r\n    \"v-multiselect\": vMultiselect,\r\n    \"user-detail\": UserDetail\r\n  },\r\n  //   directives: {\r\n  //     clickOutside: vClickOutside.directive,\r\n  //   },\r\n\r\n  /**---------------------------\r\n   * Giai đoạn 2: có thể truy cập vào data, event, chưa truy cập dc DOM\r\n   -----------------------------*/\r\n  created() {\r\n    this.loadData();\r\n  },\r\n\r\n  /**--------------\r\n   * Data\r\n  -----------------*/\r\n  data() {\r\n    return {\r\n      storeUser: [], //danh sách người dùng\r\n      isShowDialog: false, //dialog có hiện không?\r\n      isShowPopup: false, //popup có hiện không?\r\n\r\n      isShowFunc: false, //function của table có hiện không?\r\n      isShowMultiAction: false, //dropdown của thực hiện hàng loạt có hiện không?\r\n      isShowSkeleton: false, //có đang hiện skeleton ko?\r\n      itemSelected: {}, //đối tượng đang được chọn để thao tác.\r\n      formMode: 0, //trạng thái form đang là gì?\r\n      //set text,type cho popup\r\n      popupText: null,\r\n      popupType: null,\r\n      isMultiDelete: false, //có đang xóa nhiều không?\r\n      //thông tin của toast\r\n      toastText: \"toast-text\",\r\n      toastType: 0,\r\n      //các option cho paging\r\n      pagingOptions: [\r\n        {\r\n          label: \"10 bản ghi trên 1 trang\",\r\n          value: 10,\r\n        },\r\n        {\r\n          label: \"20 bản ghi trên 1 trang\",\r\n          value: 20,\r\n        },\r\n        {\r\n          label: \"30 bản ghi trên 1 trang\",\r\n          value: 30,\r\n        },\r\n        {\r\n          label: \"50 bản ghi trên 1 trang\",\r\n          value: 50,\r\n        },\r\n        {\r\n          label: \"100 bản ghi trên 1 trang\",\r\n          value: 100,\r\n        },\r\n      ],\r\n      disableComboboxPaging: false,\r\n      pageNumber: 1, //trang số bao nhiêu\r\n      pageSize: 10, //số bản ghi trên 1 trang\r\n      totalPage: null, //tổng số trang\r\n      totalRecord: null, //tổng số bản ghi dữ liệu\r\n      dataFilter: \"\", //giá trị để tìm kiếm\r\n      multiDeleteText: \"Xóa\",\r\n      //thông tin khởi tạo table\r\n      //danh sách các tiêu đề và fieldName của bảng\r\n      columns: [\r\n        {\r\n          title: \"Họ và tên\",\r\n          key: \"full_name\",\r\n          width: 200,\r\n        },\r\n        {\r\n          title: \"email\",\r\n          key: \"email\",\r\n          width: 200,\r\n        },\r\n        {\r\n          title: \"Ngày sinh\",\r\n          key: \"date_of_birth\",\r\n          width: 200,\r\n          dataType: \"date\",\r\n          titleAlign: \"center\",\r\n        },\r\n        {\r\n          title: \"Tên đăng nhập\",\r\n          key: \"username\",                    \r\n          width: 200,\r\n        },\r\n        {\r\n          title: \"Vai trò\",\r\n          key: \"role_name\",                    \r\n          width: 70,                  \r\n        },\r\n        {\r\n          title: \"Số điện thoại\",\r\n          key: \"phone\",\r\n          width: 150,\r\n          titleAlign: \"left\",\r\n        },\r\n        {\r\n          title: \"Giới tính\",\r\n          key: \"gender_name\",\r\n          width: 70,\r\n          titleAlign: \"left\",\r\n        }       \r\n      ],\r\n      //các function của table\r\n      tableFunction: [\r\n        {\r\n          title: \"Nhân bản\",\r\n          value: this.$enum.TableFunction.Clone,\r\n        },\r\n        {\r\n          title: \"Xóa\",\r\n          value: this.$enum.TableFunction.Delete,\r\n        },\r\n        {\r\n          title: \"Ngừng sử dụng\",\r\n          value: this.$enum.TableFunction.Stop,\r\n        },\r\n      ],\r\n      listEmployeeChecked: [],\r\n    };\r\n  },\r\n\r\n  /**-----------------\r\n   * Các phương thức\r\n   -------------------*/\r\n  methods: {\r\n    /**\r\n     * Xử lý combo paging thay đổi\r\n     */\r\n    comboPagingSelected(option){        \r\n        if(option){\r\n          this.pageSize = option;\r\n          this.loadData();\r\n        }\r\n    },\r\n    /**\r\n    * Hàm nhận sự kiện gửi từ grid ra\r\n    * @created : quyetkaito 07/10/2022\r\n    */\r\n    handleGridAction(options){\r\n        if(options){\r\n            if(options.object){\r\n                if(options.action == 'View'){\r\n                    this.view(options.object);\r\n                }\r\n                else if(options.action == 'Delete'){\r\n                    this.deleteObject(options.object);\r\n                }\r\n                else if(options.action == 'Edit'){\r\n                    this.edit(options.object);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    /**\r\n    * Hàm xử lý sự kiện cho các button trên màn hình\r\n    * @created : quyetkaito 04/10/2022\r\n    * @param {string} action : tên hành đông\r\n    */\r\n    buttonClick(action){\r\n        if(!action) return;\r\n        let me = this;\r\n        switch(action){\r\n            case 'Add':\r\n                me.add();\r\n                break;\r\n            case 'Edit':\r\n                me.edit();\r\n                break;\r\n            case 'View':\r\n                me.view();\r\n                break;\r\n            case 'Refresh':\r\n                me.loadData();\r\n                break;\r\n            default: \r\n            break;\r\n        }\r\n    },\r\n\r\n    view(object){\r\n        if(object){\r\n            let me = this;            \r\n            if(me.$refs.userDialog && typeof me.$refs.userDialog.show == \"function\"){\r\n                me.$refs.userDialog.show();\r\n                //bắn dữ liệu lên form\r\n                if(typeof me.$refs.userDialog.bindData == \"function\"){\r\n                    me.$refs.userDialog.bindData(object, 'View');                    \r\n                }\r\n            }           \r\n        }\r\n    },\r\n\r\n    /**\r\n    * Hàm xử lý sửa đối tượng\r\n    * @created : quyetkaito 06/10/2022\r\n    */\r\n    edit(object){\r\n        if(object){\r\n            let me = this;            \r\n            if(me.$refs.userDialog && typeof me.$refs.userDialog.show == \"function\"){\r\n                me.$refs.userDialog.show();\r\n                //bắn dữ liệu lên form\r\n                if(typeof me.$refs.userDialog.bindData == \"function\"){\r\n                    me.$refs.userDialog.bindData(object, 'Edit');                    \r\n                }\r\n            }           \r\n        }\r\n    },\r\n\r\n    /**\r\n    * hàm xử lý xóa đối tượng\r\n    * @created : quyetkaito 07/10/2022\r\n    */\r\n    async deleteObject(object){\r\n        if(object){\r\n            //cảnh báo có thực sự muốn xóa không\r\n            let me = this;\r\n            if(confirm(\"bạn có thực sự muốn xóa ko\")){\r\n                if(object.user_id){\r\n                    me.$commonFunc.load();\r\n                    try {\r\n                        await UserAPI.request(`${UserAPI.urlName}/${object.user_id}`, 'DELETE').then(res=>{\r\n                            console.log(`res`, res);\r\n                            me.$commonFunc.unload();\r\n                            me.buttonClick('Refresh');\r\n                        })        \r\n                    } catch (error) {\r\n                        me.handleException(error);\r\n                    }                    \r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n    * Hàm xử lý thêm mới đối tượng\r\n    * @created : quyetkaito 04/10/2022\r\n    */\r\n    add(){  \r\n        //mở form\r\n        let me = this;\r\n        if(me.$refs.userDialog && typeof me.$refs.userDialog.show == \"function\"){\r\n            me.$refs.userDialog.show('Add');\r\n        }\r\n        //khởi tạo dữ liệu ban đầu\r\n    },\r\n\r\n    showToast() {\r\n        //show toast\r\n        //   this.$store.commit(\"showError\", {\r\n        //     message: \"Lỗi rồi em ei\",\r\n        //   });\r\n        // this.$store.commit(\"setLang\", \"en\");\r\n        //thay đổi ngôn ngữ\r\n        // this.$i18n.changeLocale('en');\r\n\r\n    },\r\n\r\n    /**--------------------------\r\n     * Hàm thực hiện đóng dialog\r\n     * Author: quyetnv(22/03/2022)\r\n     -----------------------------*/\r\n    closeDialog() {\r\n      this.itemSelected = {};\r\n      this.formMode = 0;\r\n      this.isShowDialog = false;\r\n    },\r\n\r\n    /**----------------------------------\r\n     * Hàm gọi API xuất dữ liệu.\r\n     * Author: quyetkaito (15/03/2022)\r\n    -------------------------------*/\r\n    exportData() {\r\n      let me = this;\r\n      me.$refs.mLoading.show();\r\n      let object = {};\r\n      object.tableInfos = me.listHeader;\r\n      object.dataFilter = me.dataFilter;\r\n      //gửi lên server danh sách các header\r\n    //   axios\r\n    //     .post(`${LOCAL_EMPLOYEE_API_URL}/export`, object, {\r\n    //       responseType: \"blob\",\r\n    //     })\r\n    //     .then((response) => {\r\n    //       FileDownload(response.data, \"Danh_sach_nhan_vien.xlsx\");\r\n    //       me.$refs.mLoading.hide();\r\n    //     })\r\n    //     .catch(() => {\r\n    //       me.$refs.mLoading.hide();\r\n    //     });\r\n    },\r\n\r\n    /**--------------------------------------\r\n     * Xử lý khi nút [Xóa hàng loạt] được chọn\r\n     * Author: quyetkaito (14/03/2022)\r\n    ----------------------------------*/\r\n    multiDelete() {\r\n      this.isMultiDelete = true;\r\n      //show cảnh báo xóa nhiều\r\n      // this.showPopup(this.$enum.PopupType.DataDelete);\r\n    },\r\n\r\n    /**----------------------------\r\n     * Thực hiện gọi API xóa nhiều.\r\n     * Author: quyetkaito (14/03/2022)\r\n     ------------------------------*/\r\n    // multiDeleteEmployee() {\r\n    //   let me = this;\r\n    //   //hiện loading\r\n    //   me.$refs.mLoading.show();\r\n    //   //gọi API xóa nhiều\r\n    //   axios\r\n    //     .delete(`${LOCAL_EMPLOYEE_API_URL}`, { data: me.listEmployeeChecked })\r\n    //     .then(() => {\r\n    //       //đóng popup\r\n    //       me.showMessagebox(false);\r\n    //       //thông báo thành công\r\n    //     //   me.toastText = Resource.SuccessDelete;\r\n    //       me.$refs.msToast.show();\r\n    //       //reset lại danh sách employee được chọn\r\n    //       me.listEmployeeChecked = [];\r\n    //       me.isMultiDelete = false;\r\n    //       //ẩn loading\r\n    //       me.$refs.mLoading.hide();\r\n\r\n    //       //load lại dữ liệu\r\n    //       me.loadData();\r\n    //       //bỏ dấu check all\r\n    //       this.$refs.mygrid.unCheckAll();\r\n    //     })\r\n    //     .catch((error) => {\r\n    //       me.handleException(error);\r\n    //       //reset lại danh sách employee được chọn\r\n    //       me.listEmployeeChecked = [];\r\n    //       me.isMultiDelete = false;\r\n    //       me.$refs.mLoading.hide();\r\n    //     });\r\n    // },\r\n\r\n    /**-----------------------------------------------------\r\n     * Lấy danh sách id của các employee được chọn từ bảng.\r\n     * @param {Array} listChecked - mảng các đối tượng được chọn.\r\n     * Author: quyetkaito (14/03/2022)\r\n     -------------------------------------------------------*/\r\n    getitemSelected(listChecked) {\r\n      try {\r\n        //lấy ra id của đối tượng\r\n        listChecked.forEach((employee) => {\r\n          //push vào mảng các id \r\n          this.listEmployeeChecked.push(employee.employee_id);\r\n        });\r\n      } catch (error) {\r\n        //log ra lỗi\r\n        console.error(error);\r\n      }\r\n    },\r\n\r\n    /**-----------------------------------\r\n     * Thực hiện ẩn/ hiện nút \"Xóa nhiều\".\r\n     * Author: quyetkaito (14/03/2022)\r\n     -------------------------------------*/\r\n    toggleMultiAction() {\r\n      this.isShowMultiAction = !this.isShowMultiAction;\r\n    },\r\n\r\n    /**--------------------------------\r\n     * Thực hiện ẩn nút \"Xóa nhiều\".\r\n     * Author: quyetkaito (14/03/2022)\r\n     ---------------------------------*/\r\n    hideMultiAction() {\r\n      this.isShowMultiAction = false;\r\n    },\r\n\r\n    /**-------------------------------------\r\n     * Thực hiện delay call API khi tìm kiếm.\r\n     * Author: quyetkaito (15/03/2022)\r\n    ---------------------------------*/\r\n    lodashDelay: _.debounce(function () {\r\n      this.filterDataServer();\r\n    }, 1200),\r\n\r\n    /**--------------------------------\r\n     * Hàm gọi API tìm kiếm dữ liệu từ server.\r\n     * Author: quyetkaito (03/03/2022)\r\n     ----------------------------------*/\r\n    filterDataServer() {\r\n      let me = this;    \r\n      me.loadData();\r\n    },\r\n\r\n    /**----------------------------------------\r\n     * Hàm thực hiện load data (đã phân trang) binding vào bảng.\r\n     * Author: quyetkaito (25/02/2022)\r\n     ------------------------------------------*/\r\n    async loadData() {\r\n      try {\r\n        let me = this;\r\n        //không cho phân trang\r\n        me.disableComboboxPaging = true;        \r\n        me.storeUser = [];\r\n        // me.itemSelected = {};\r\n        me.formMode = 0;\r\n        if (!me.pageSize) me.pageSize = 10;\r\n        if (!me.pageNumber || me.pageNumber != 1) me.pageNumber = 1;\r\n        //show loading\r\n        me.isShowSkeleton = true;\r\n        //mã hóa dữ liệu truyền lên\r\n        let textFilter;\r\n        if(me.dataFilter){\r\n            //var buf = new Buffer(b64string, 'base64');\r\n            debugger\r\n            this.$commonFunc.convertToBase64(me.dataFilter);\r\n            // const buff = Buffer.from(me.dataFilter);\r\n            // const base64 = buff.toString('base64');            \r\n        }\r\n        if(!textFilter) textFilter=\"\";\r\n        //gọi API lấy dữ liệu\r\n        let res = await UserAPI.request(`${UserAPI.urlName}/filter`,\"get\");\r\n        if(res && res.data){            \r\n            if(res.data.Data && res.data.Data.length >0){\r\n                me.storeUser = res.data.Data;\r\n                me.totalRecord = res.data.TotalRecord;\r\n                me.totalPage = res.data.TotalPage;\r\n            }\r\n        }\r\n        me.isShowSkeleton = false;\r\n        me.disableComboboxPaging = false;        \r\n          \r\n      } catch (error) {\r\n        this.showDefaultErrorNotify();\r\n        this.isShowSkeleton = false;\r\n        console.error(error);\r\n      }\r\n    },\r\n\r\n    /**----------------------------------------------\r\n     * show thông báo lỗi mặc định cho người dùng.\r\n     * Author: quyetkaito (8/03/2022)\r\n     ------------------------------------------------*/\r\n    showDefaultErrorNotify() {\r\n      this.$store.commit(\"showError\",{\r\n        message: 'lỗi rồi'\r\n        });\r\n    },\r\n\r\n    /**-------------------------------\r\n     * Hàm xử lý exception api trả về.\r\n     * @param {Exception} error - exception từ api trả về\r\n     * Author: quyetkaito (08/03/2022)\r\n     ---------------------------------*/\r\n    handleException(error) {\r\n      let me = this;\r\n      let response = error.response;\r\n      if (response.status) {\r\n        switch (error.response.status) {\r\n          case this.$enum.StatusCode.InternalServerError: {\r\n            if (response.data.userMsg) {\r\n              me.showPopup(\r\n                this.$enum.PopupType.DataError,\r\n                response.data.userMsg\r\n              );\r\n            } else {\r\n              me.showDefaultErrorNotify();\r\n            }\r\n            break;\r\n          }\r\n          case this.$enum.StatusCode.BadRequest:\r\n            {\r\n              //400\r\n              //gán message vào popup\r\n              me.showDefaultErrorNotify();\r\n            }\r\n            break;\r\n\r\n          default:\r\n            break;\r\n        }\r\n      } else {\r\n        me.showDefaultErrorNotify();\r\n      }\r\n    },\r\n\r\n    /**----------------------------------\r\n     * Hàm gọi show popup (true).\r\n     * @param {Number} type: loại popup\r\n     * @param {String} text: nội dung popup \r\n     * Author: quyetkaito (24/02/2022)\r\n     ------------------------------------*/\r\n    showPopup(type, text) {\r\n      if (type) {\r\n        this.popupType = type;\r\n      }\r\n      if (text) {\r\n        this.popupText = text;\r\n      }\r\n      this.showMessagebox(true);\r\n      //focus vào button đầu tiên(để đóng popup = phím Enter)\r\n      this.$refs.popup.focus();\r\n    },\r\n\r\n    /**---------------------------------\r\n     * Thực hiện show/hide messsagebox.\r\n     * @param {Boolean} isShow - true là hiện/ false là ẩn.\r\n     * Author: quyetkaito (25/02/2022)\r\n     -----------------------------------*/\r\n    showMessagebox(isShow) {\r\n      this.isShowPopup = isShow;\r\n    },\r\n\r\n    /**---------------------------------------------------------------\r\n     * Hàm thực hiện show table function Xóa/Nhân bản/ Ngừng sử dụng.\r\n     * @param {Object} object - đối tượng\r\n     * Author: quyetkaito (08/03/2022)\r\n     ----------------------------------------------------------------*/\r\n    showFunction(object) {\r\n      if (this.isShowFunc) {\r\n        this.isShowFunc = false;\r\n      } else {\r\n        this.isShowFunc = true;\r\n        this.itemSelected = object;\r\n        this.formMode = this.$enum.FormMode.Clone;\r\n      }\r\n    },\r\n\r\n    /**------------------------------------\r\n     * Hàm thực hiện hide table function.\r\n     * Author: quyetkaito (08/03/2022)\r\n     -------------------------------*/\r\n    hideFunction() {\r\n      this.isShowFunc = false;\r\n    },\r\n\r\n\r\n    /**--------------------------------------\r\n     * Hàm thực hiện cập nhật trang hiện tại.\r\n     * @param {Number} page - số thứ tự của trang (từ 1)\r\n     * Author: quyetkaito (03/03/2022)\r\n    ----------------------------------------*/\r\n    setCurrentPage(page) {\r\n      this.pageNumber = page;\r\n      //thực hiện filter lại\r\n      this.filterDataServer(this.pageNumber);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n@import url(\"/src/style/page/base-page.css\");\r\n.pagination-container{\r\n  margin-left: 10px;  \r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}