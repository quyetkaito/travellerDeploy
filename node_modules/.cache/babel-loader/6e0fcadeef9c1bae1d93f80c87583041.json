{"ast":null,"code":"import firebase from \"./firebase/firebaseInit\";\nimport AuthAPI from \"@/api/AuthAPI\";\nexport default {\n  name: \"App\",\n\n  created() {// this.checkLogin();\n  },\n\n  methods: {\n    /**\r\n    * Check xem đã login hay chưa, nếu chưa thì quay về màn đăng nhập\r\n    * @created : quyetkaito 13/10/2022\r\n    */\n    async checkLogin() {\n      let me = this;\n      let refreshToken = me.$cache.get('RefreshToken');\n      let accessToken = me.$cache.get('AccessToken');\n\n      if (refreshToken && accessToken) {\n        let tokenModel = {\n          access_token: accessToken,\n          refresh_token: refreshToken\n        }; //gọi lấy accessToken mới\n\n        try {\n          let res = await AuthAPI.request(AuthAPI.urlName + `/refresh_token`, 'POST', tokenModel);\n\n          if (res && res.accessToken && res.refreshToken) {\n            alert('lấy access token mới thành công');\n          }\n        } catch (error) {\n          me.$store.commit('showInfo', {\n            message: 'Phiên làm việc của bạn đã hết hạn. Vui lòng đăng nhập lại.',\n            timeuot: 3000\n          });\n          this.$router.push({\n            name: 'login'\n          });\n        }\n      } else {\n        this.$router.push({\n          name: 'login'\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAOA,OAAOA,QAAP,MAAqB,yBAArB;AACA,OAAOC,OAAP,MAAoB,eAApB;AACA,eAAe;EACbC,IAAI,EAAE,KADO;;EAEbC,OAAO,GAAE,CACP;EACD,CAJY;;EAKbC,OAAO,EAAE;IACP;;;;IAIA,MAAMC,UAAN,GAAkB;MAChB,IAAIC,EAAC,GAAI,IAAT;MACA,IAAIC,YAAW,GAAID,EAAE,CAACE,MAAH,CAAUC,GAAV,CAAc,cAAd,CAAnB;MACA,IAAIC,WAAU,GAAIJ,EAAE,CAACE,MAAH,CAAUC,GAAV,CAAc,aAAd,CAAlB;;MACA,IAAGF,YAAW,IAAKG,WAAnB,EAA+B;QAC7B,IAAIC,UAAS,GAAI;UACfC,YAAY,EAAEF,WADC;UAEfG,aAAa,EAAEN;QAFA,CAAjB,CAD6B,CAK3B;;QACF,IAAI;UACF,IAAIO,GAAE,GAAI,MAAMb,OAAO,CAACc,OAAR,CAAgBd,OAAO,CAACe,OAAR,GAAiB,gBAAjC,EAAkD,MAAlD,EAA0DL,UAA1D,CAAhB;;UACA,IAAGG,GAAE,IAAKA,GAAG,CAACJ,WAAX,IAA0BI,GAAG,CAACP,YAAjC,EAA8C;YAC5CU,KAAK,CAAC,iCAAD,CAAL;UACF;QACF,CALA,CAKE,OAAOC,KAAP,EAAc;UACdZ,EAAE,CAACa,MAAH,CAAUC,MAAV,CAAiB,UAAjB,EAA6B;YAACC,OAAO,EAAE,4DAAV;YAAwEC,OAAM,EAAI;UAAlF,CAA7B;UACA,KAAKC,OAAL,CAAaC,IAAb,CAAkB;YAACtB,IAAI,EAAE;UAAP,CAAlB;QACF;MACD,CAfD,MAeK;QACH,KAAKqB,OAAL,CAAaC,IAAb,CAAkB;UAACtB,IAAI,EAAE;QAAP,CAAlB;MACF;IAEF;;EA5BO;AALI,CAAf","names":["firebase","AuthAPI","name","created","methods","checkLogin","me","refreshToken","$cache","get","accessToken","tokenModel","access_token","refresh_token","res","request","urlName","alert","error","$store","commit","message","timeuot","$router","push"],"sourceRoot":"","sources":["D:\\Traveller\\Traveller-Frontend\\traveller-ui\\src\\App.vue"],"sourcesContent":["<template>\r\n  <m-loading/>\r\n  <!-- <m-message/> -->\r\n  <router-view/> \r\n</template>\r\n\r\n<script>\r\nimport firebase from \"./firebase/firebaseInit\";\r\nimport AuthAPI from \"@/api/AuthAPI\";\r\nexport default {\r\n  name: \"App\",\r\n  created(){\r\n    // this.checkLogin();\r\n  },\r\n  methods: {\r\n    /**\r\n    * Check xem đã login hay chưa, nếu chưa thì quay về màn đăng nhập\r\n    * @created : quyetkaito 13/10/2022\r\n    */\r\n    async checkLogin(){\r\n      let me = this;\r\n      let refreshToken = me.$cache.get('RefreshToken');\r\n      let accessToken = me.$cache.get('AccessToken');\r\n      if(refreshToken && accessToken){\r\n        let tokenModel = {\r\n          access_token: accessToken,\r\n          refresh_token: refreshToken\r\n        };\r\n          //gọi lấy accessToken mới\r\n        try {\r\n          let res = await AuthAPI.request(AuthAPI.urlName+`/refresh_token`, 'POST', tokenModel);          \r\n          if(res && res.accessToken && res.refreshToken){\r\n            alert('lấy access token mới thành công');\r\n          }\r\n        } catch (error) {\r\n          me.$store.commit('showInfo', {message: 'Phiên làm việc của bạn đã hết hạn. Vui lòng đăng nhập lại.', timeuot : 3000});\r\n          this.$router.push({name: 'login'});    \r\n        }\r\n      }else{  \r\n        this.$router.push({name: 'login'});\r\n      }\r\n\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n/* import font */\r\n@import url('https://fonts.googleapis.com/css2?family=Roboto+Serif:opsz,wght@8..144,100;8..144,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap');\r\n@import url(\"/src/style/common/main.css\");\r\n@import url(\"/src/style/layout/header.css\");\r\n@import url(\"/src/style/common/icon.css\");\r\n@import url(\"/src/style/common/button.css\");\r\n@import url(\"/src/style/common/card.css\");\r\n@import url(\"/src/style/common/table.css\");\r\n@import url(\"/src/style/common/paging.css\");\r\n@import url(\"/src/style/common/input.css\");\r\n@import url(\"/src/style/common/checkbox.css\");\r\n@import url(\"/src/style/common/tooltip.css\");\r\n@import url(\"/src/style/common/loading.css\");\r\n@import url(\"/src/style/common/custom-dropdown.css\");\r\n@import url(\"/src/style/common/custom-combobox.css\");\r\n@import url(\"/src/style/common/custom-datepicker.css\");\r\n@import url(\"/src/style/common/custom-multiselect.css\");\r\n@import url(\"@/assets/fonts/fontawesome-5.15.1/css/all.min.css\");\r\n</style>\r\n\r\n"]},"metadata":{},"sourceType":"module"}