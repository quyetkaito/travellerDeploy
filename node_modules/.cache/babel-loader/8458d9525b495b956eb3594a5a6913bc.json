{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport _ from \"lodash\";\nimport LocationAPI from \"@/api/LocationAPI\";\nexport default {\n  data() {\n    return {\n      textSearch: null,\n      storeLocation: [],\n      //danh sách\n      storeLocationAll: []\n    };\n  },\n\n  created() {\n    let me = this;\n    this.initStaticData();\n  },\n\n  methods: {\n    searchData: _.debounce(function () {\n      let me = this;\n\n      if (me.textSearch) {\n        let _textSearch = me.textSearch.toLowerCase();\n\n        me.storeLocation = me.storeLocationAll.filter(x => x.location_code.toLowerCase().includes(_textSearch) || x.location_name.toLowerCase().includes(_textSearch));\n      } else {\n        me.storeLocation = me.storeLocationAll.filter(x => me.storeLocationAll.indexOf(x) <= 20);\n      }\n    }, 500),\n\n    /**------------------------------------------\r\n        * Nhận sự kiện khi button của function được click\r\n        * @created : quyetkaito (26/06/2022)\r\n        --------------------------------------------*/\n    handleFunctionClick(object) {\n      let me = this;\n\n      if (object) {\n        //kiểm tra xem nó là loại gì sửa hay xem hay xóa..\n        switch (me.tableFunction.mainFunction) {\n          case \"Edit\":\n            {// me.showDialog(object);\n            }\n        }\n      }\n    },\n\n    handleDoubleClick() {},\n\n    async initStaticData() {\n      //gọi api lấy tất cả danh sách tỉnh huyện xã, lưu vào cache\n      let me = this;\n      me.tableFunction = {\n        mainButtonText: \"Sửa\",\n        mainFunction: \"Edit\",\n        isShow: true\n      };\n      me.columns = [{\n        title: \"Tên địa điểm\",\n        key: \"location_name\",\n        width: 200\n      }, {\n        title: \"Mã\",\n        key: \"location_code\",\n        width: 200\n      }];\n      let storeCacheLocation = me.$cache.getCache('locationStore');\n\n      if (storeCacheLocation) {\n        me.storeLocationAll = storeCacheLocation;\n        me.storeLocation = me.storeLocationAll.filter(x => me.storeLocationAll.indexOf(x) <= 20);\n      } else {\n        let res = await LocationAPI.request(LocationAPI.urlName, \"get\");\n\n        if (res && res.data && res.data.length > 0) {\n          me.storeLocation = res.data.filter(x => x.parent_code == null);\n          me.$cache.setCache('locationStore', JSON.stringify(res.data));\n        }\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["_","LocationAPI","data","textSearch","storeLocation","storeLocationAll","created","me","initStaticData","methods","searchData","debounce","_textSearch","toLowerCase","filter","x","location_code","includes","location_name","indexOf","handleFunctionClick","object","tableFunction","mainFunction","handleDoubleClick","mainButtonText","isShow","columns","title","key","width","storeCacheLocation","$cache","getCache","res","request","urlName","length","parent_code","setCache","JSON","stringify"],"sourceRoot":"","sources":["D:\\Traveller\\Traveller-Frontend\\traveller-ui\\src\\views\\location\\LocationList.vue"],"sourcesContent":["<template>\r\n  <div><m-input labelText=\"Tìm kiếm nhanh\" v-model=\"textSearch\" @input=\"searchData\"/></div>\r\n  <div class=\"content-grid\">\r\n    <div class=\"table-container\">\r\n      <m-grid\r\n        :listData=\"storeLocation\"\r\n        :columns=\"columns\"\r\n        @dblClick=\"handleDoubleClick\"\r\n        :tableFunction=\"tableFunction\"\r\n        @eMainButtonClick=\"handleFunctionClick\"\r\n        @eDoubleClick=\"handleDoubleClick\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport _ from \"lodash\";\r\nimport LocationAPI from \"@/api/LocationAPI\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      textSearch: null,\r\n      storeLocation: [], //danh sách\r\n      storeLocationAll: [],\r\n    };\r\n  },\r\n  created() {\r\n    let me = this;\r\n    this.initStaticData();\r\n  },\r\n  methods: {\r\n    searchData: _.debounce(function () {\r\n        let me = this;\r\n        if(me.textSearch){\r\n            let _textSearch = me.textSearch.toLowerCase();        \r\n            me.storeLocation = me.storeLocationAll.filter(x=>x.location_code.toLowerCase().includes(_textSearch) || x.location_name.toLowerCase().includes(_textSearch));\r\n        }else{\r\n            me.storeLocation = me.storeLocationAll.filter(x=>me.storeLocationAll.indexOf(x) <= 20);\r\n        }\r\n    }, 500),\r\n    \r\n\r\n    /**------------------------------------------\r\n        * Nhận sự kiện khi button của function được click\r\n        * @created : quyetkaito (26/06/2022)\r\n        --------------------------------------------*/\r\n    handleFunctionClick(object) {\r\n      let me = this;\r\n      if (object) {\r\n        //kiểm tra xem nó là loại gì sửa hay xem hay xóa..\r\n        switch (me.tableFunction.mainFunction) {\r\n          case \"Edit\": {\r\n            // me.showDialog(object);\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    handleDoubleClick() {},\r\n\r\n    async initStaticData() {\r\n      //gọi api lấy tất cả danh sách tỉnh huyện xã, lưu vào cache\r\n      let me = this;\r\n      me.tableFunction = {\r\n        mainButtonText: \"Sửa\",\r\n        mainFunction: \"Edit\",\r\n        isShow: true,\r\n      };\r\n      me.columns = [\r\n        {\r\n          title: \"Tên địa điểm\",\r\n          key: \"location_name\",\r\n          width: 200,\r\n        },\r\n        {\r\n          title: \"Mã\",\r\n          key: \"location_code\",\r\n          width: 200,\r\n        },\r\n      ];\r\n      let storeCacheLocation = me.$cache.getCache('locationStore');\r\n      if(storeCacheLocation){          \r\n          me.storeLocationAll = storeCacheLocation;\r\n          me.storeLocation = me.storeLocationAll.filter(x=>me.storeLocationAll.indexOf(x) <= 20);\r\n      }else{\r\n        let res = await LocationAPI.request(LocationAPI.urlName, \"get\");\r\n        if (res && res.data && res.data.length > 0) {\r\n            me.storeLocation = res.data.filter(x=>x.parent_code == null);\r\n            me.$cache.setCache('locationStore', JSON.stringify(res.data));\r\n        }\r\n      }\r\n      \r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]},"metadata":{},"sourceType":"module"}