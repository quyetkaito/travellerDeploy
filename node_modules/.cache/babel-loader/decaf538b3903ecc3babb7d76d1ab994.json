{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-98a7d39a\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"search-history-page\"\n};\nconst _hoisted_2 = {\n  class: \"page-header flex justify-between align-y-center\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"title-page\"\n}, \"Lịch sử tìm kiếm\", -1));\n\nconst _hoisted_4 = {\n  class: \"flex justify-between\"\n};\nconst _hoisted_5 = {\n  class: \"search-date mr-2\"\n};\nconst _hoisted_6 = [\"onClick\"];\n\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-trash-alt text-red-500\"\n}, null, -1));\n\nconst _hoisted_8 = [_hoisted_7];\nconst _hoisted_9 = {\n  class: \"time\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, $data.histories.length > 0 ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: \"delete-all\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.deleteAll && $options.deleteAll(...args))\n  }, \"Xóa các tìm kiếm\")) : _createCommentVNode(\"\", true)]), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.histories, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"search-history-item\",\n      key: index\n    }, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, _toDisplayString(_ctx.$commonFunc.formatDate(item.search_date)), 1), _createElementVNode(\"div\", {\n      class: \"cursor-pointer\",\n      title: \"Xóa\",\n      onClick: $event => $options.deleteItem(item)\n    }, _hoisted_8, 8, _hoisted_6)]), _createElementVNode(\"blockquote\", null, [_createElementVNode(\"div\", null, \"Bạn đã tìm kiếm: \\\"\" + _toDisplayString(item.search_content) + \"\\\"\", 1)]), _createElementVNode(\"div\", _hoisted_9, _toDisplayString(_ctx.$commonFunc.getTimeOnly(item.search_date)), 1)]);\n  }), 128))]);\n}","map":{"version":3,"mappings":";;;;;EACKA,KAAK,EAAC;;;EACFA,KAAK,EAAC;;;gEACPC,oBAA8C,KAA9C,EAA8C;EAAzCD,KAAK,EAAC;AAAmC,CAA9C,EAAwB,kBAAxB,EAAwC,EAAxC;;;EAIKA,KAAK,EAAC;;;EACFA,KAAK,EAAC;;;;gEACuDC,oBAA6C,GAA7C,EAA6C;EAA1CD,KAAK,EAAC;AAAoC,CAA7C,EAAwC,IAAxC,EAAwC,EAAxC;;oBAAAE;;EAIjEF,KAAK,EAAC;;;uBAZnBG,oBAcM,KAdN,cAcM,CAbFF,oBAGM,KAHN,cAGM,CAFFG,UAEE,EAD+CC,gBAAUC,MAAV,GAAgB,mBAAjEH,oBAA6F,KAA7F,EAA6F;UAAA;IAAxFH,KAAK,EAAC,YAAkF;IAApEO,OAAK,yCAAEC,iDAAF;EAA+D,CAA7F,EAAuE,kBAAvE,kCACE,CAHN,CAaE,qBATFL,oBAQMM,SARN,EAQM,IARN,EAQMC,YARkDL,eAQlD,EAR2D,CAAxBM,IAAwB,EAAnBC,KAAmB,KAAd;yBAAnDT,oBAQM,KARN,EAQM;MARDH,KAAK,EAAC,qBAQL;MAR8Da,GAAG,EAAED;IAQnE,CARN,GACIX,oBAIM,KAJN,cAIM,CAHFA,oBAAgF,KAAhF,cAAgFa,iBAAhDC,iBAAYC,UAAZ,CAAuBL,IAAI,CAACM,WAA5B,CAAgD,CAAhF,EAAuE,CAAvE,CAGE,EAFFhB,oBAAqH,KAArH,EAAqH;MAAhHD,KAAK,EAAC,gBAA0G;MAAzFkB,KAAK,EAAC,KAAmF;MAA5EX,OAAK,YAAEC,oBAAWG,IAAX;IAAqE,CAArH,4BAEE,CAJN,GAKAV,oBAA8E,YAA9E,EAA8E,IAA9E,EAA8E,CAAlEA,oBAAqD,KAArD,EAAqD,IAArD,EAAK,wBAAkBa,iBAAEH,IAAI,CAACQ,cAAP,CAAlB,GAAyC,IAA9C,EAA+C,CAA/C,CAAkE,CAA9E,GACAlB,oBAAqE,KAArE,cAAqEa,iBAAjDC,iBAAYK,WAAZ,CAAwBT,IAAI,CAACM,WAA7B,CAAiD,CAArE,EAA4D,CAA5D,EAPJ;GAQM,CARN,MASE,EAdN","names":["class","_createElementVNode","_hoisted_7","_createElementBlock","_hoisted_3","$data","length","onClick","$options","_Fragment","_renderList","item","index","key","_toDisplayString","_ctx","formatDate","search_date","title","search_content","getTimeOnly"],"sourceRoot":"","sources":["D:\\Traveller\\Traveller-Frontend\\traveller-ui\\src\\views\\landing-page\\search-history\\SearchHistoryPage.vue"],"sourcesContent":["<template>\r\n<div class=\"search-history-page\">\r\n    <div class=\"page-header flex justify-between align-y-center\">\r\n        <div class=\"title-page\">Lịch sử tìm kiếm</div>\r\n        <div class=\"delete-all\" @click=\"deleteAll\" v-if=\"histories.length > 0\">Xóa các tìm kiếm</div>\r\n    </div>\r\n    <div class=\"search-history-item\" v-for=\"(item,index) in histories\" :key=\"index\">\r\n        <div class=\"flex justify-between\">\r\n            <div class=\"search-date mr-2\">{{$commonFunc.formatDate(item.search_date)}}</div>\r\n            <div class=\"cursor-pointer\" title=\"Xóa\" @click=\"deleteItem(item)\"><i class=\"fas fa-trash-alt text-red-500\"></i></div>\r\n            \r\n        </div>        \r\n        <blockquote><div>Bạn đã tìm kiếm: \"{{item.search_content}}\"</div></blockquote>\r\n        <div class=\"time\">{{$commonFunc.getTimeOnly(item.search_date)}}</div>\r\n    </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport SearchHistoryAPI from \"@/api/SearchHistoryAPI\"\r\nexport default {\r\n    name: \"SearchHistory\",\r\n    data() {\r\n        return {\r\n            histories: [],\r\n            userID: this.$session.get(\"UserID\"),\r\n        }\r\n    },\r\n    created(){\r\n        this.getData();\r\n    },\r\n    methods:{\r\n        /**\r\n        * Lấy lịch sử tìm kiếm của user này\r\n        * @created : quyetkaito 08/11/2022\r\n        */\r\n        async getData(){\r\n            try {\r\n                let me = this;\r\n                if(me.userID){\r\n                    let res = await SearchHistoryAPI.request(SearchHistoryAPI.urlName+`/history_by_user/${me.userID}`, 'GET');\r\n                    if(res && res.data){                        \r\n                        this.histories = res.data;\r\n                    }\r\n                }else{ //nếu ko có userID thì lấy trong cache\r\n\r\n                }\r\n            } catch (error) {\r\n                console.error(error)\r\n            }\r\n        },\r\n\r\n        /**\r\n        * hàm xóa lịch sử\r\n        * @created : quyetkaito 08/11/2022\r\n        */\r\n        async deleteItem(item){\r\n            let me = this;\r\n            try {\r\n                if(me.userID && item && item.id){\r\n                    let res = await SearchHistoryAPI.request(SearchHistoryAPI.urlName+`/${item.id}`, 'DELETE');\r\n                    if(res && res.data){\r\n                        if(res.data.StatusCode == 200){\r\n                            me.$store.commit(\"showSuccess\", {message: me.$t('message.success_delete')});\r\n                            this.getData();\r\n                        }\r\n                    }\r\n                }             \r\n            } catch (error) {\r\n                console.error(error)\r\n            }\r\n        },\r\n\r\n        /**\r\n        * Xóa hết lịch sử tìm kiếm\r\n        * @created : quyetkaito 08/11/2022\r\n        */\r\n        async deleteAll(){\r\n            try {\r\n                let me = this;\r\n                if(me.userID){\r\n                    let res = await SearchHistoryAPI.request(SearchHistoryAPI.urlName+`/delete_all/${me.userID}`, 'DELETE');\r\n                    if(res && res.data){\r\n                        if(res.data.StatusCode == 200){\r\n                            me.$store.commit(\"showSuccess\", {message: me.$t('message.success_delete')});\r\n                            this.getData();\r\n                        }\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                console.error(error)\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.search-history-page{\r\n    padding: 10px;\r\n\r\n    .page-header {\r\n        .title-page{\r\n            margin-top: 15px;\r\n            margin-bottom: 10px;\r\n            font-size: 20px;\r\n            font-weight: 700;\r\n        }\r\n        .delete-all{\r\n            color: var(--info-color);\r\n            cursor: pointer;\r\n        }\r\n\r\n    }\r\n}\r\n.search-history-item{\r\n    background: white;\r\n    border-radius: 5px;\r\n    padding: 15px;\r\n    margin-bottom: 10px;\r\n    @apply shadow-md;\r\n    .search-date{\r\n        font-weight: 700;\r\n        font-size: 16px;\r\n    }\r\n    .time{\r\n        font-size: 13px;        \r\n    }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}