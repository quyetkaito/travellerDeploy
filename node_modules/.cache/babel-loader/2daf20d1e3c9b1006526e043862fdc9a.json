{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"content-grid\"\n};\nconst _hoisted_2 = {\n  class: \"table-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_m_input = _resolveComponent(\"m-input\");\n\n  const _component_m_grid = _resolveComponent(\"m-grid\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", null, [_createVNode(_component_m_input, {\n    labelText: \"Tìm kiếm nhanh\",\n    modelValue: $data.textSearch,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.textSearch = $event),\n    onInput: $options.searchData\n  }, null, 8\n  /* PROPS */\n  , [\"modelValue\", \"onInput\"])]), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_m_grid, {\n    listData: $data.storeLocation,\n    columns: _ctx.columns,\n    onDblClick: $options.handleDoubleClick,\n    tableFunction: _ctx.tableFunction,\n    onEMainButtonClick: $options.handleFunctionClick,\n    onEDoubleClick: $options.handleDoubleClick\n  }, null, 8\n  /* PROPS */\n  , [\"listData\", \"columns\", \"onDblClick\", \"tableFunction\", \"onEMainButtonClick\", \"onEDoubleClick\"])])])], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":";;EAEOA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;;;;;6DAFbC,oBAAyF,KAAzF,EAAyF,IAAzF,EAAyF,CAApFC,aAA8EC,kBAA9E,EAA8E;IAArEC,SAAS,EAAC,gBAA2D;gBAAjCC,gBAAiC;+DAAjCA,mBAAUC,OAAuB;IAApBC,OAAK,EAAEC;EAAa,CAA9E;;EAAA,4BAAoF,CAAzF,GACAP,oBAWM,KAXN,cAWM,CAVJA,oBASM,KATN,cASM,CARJC,aAOEO,iBAPF,EAOE;IANCC,QAAQ,EAAEL,mBAMX;IALCM,OAAO,EAAEC,YAKV;IAJCC,UAAQ,EAAEL,0BAIX;IAHCM,aAAa,EAAEF,kBAGhB;IAFCG,kBAAgB,EAAEP,4BAEnB;IADCQ,cAAY,EAAER;EACf,CAPF;;EAAA,iGAQI,CATN,CAUI,CAXN","names":["class","_createElementVNode","_createVNode","_component_m_input","labelText","$data","$event","onInput","$options","_component_m_grid","listData","columns","_ctx","onDblClick","tableFunction","onEMainButtonClick","onEDoubleClick"],"sourceRoot":"","sources":["D:\\Traveller\\Traveller-Frontend\\traveller-ui\\src\\views\\location\\LocationList.vue"],"sourcesContent":["<template>\r\n  <div><m-input labelText=\"Tìm kiếm nhanh\" v-model=\"textSearch\" @input=\"searchData\"/></div>\r\n  <div class=\"content-grid\">\r\n    <div class=\"table-container\">\r\n      <m-grid\r\n        :listData=\"storeLocation\"\r\n        :columns=\"columns\"\r\n        @dblClick=\"handleDoubleClick\"\r\n        :tableFunction=\"tableFunction\"\r\n        @eMainButtonClick=\"handleFunctionClick\"\r\n        @eDoubleClick=\"handleDoubleClick\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport _ from \"lodash\";\r\nimport LocationAPI from \"@/api/LocationAPI\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      textSearch: null,\r\n      storeLocation: [], //danh sách\r\n      storeLocationAll: [],\r\n    };\r\n  },\r\n  created() {\r\n    let me = this;\r\n    this.initStaticData();\r\n  },\r\n  methods: {\r\n    searchData: _.debounce(function () {\r\n        let me = this;\r\n        if(me.textSearch){\r\n            let _textSearch = me.textSearch.toLowerCase();        \r\n            me.storeLocation = me.storeLocationAll.filter(x=>x.location_code.toLowerCase().includes(_textSearch) || x.location_name.toLowerCase().includes(_textSearch));\r\n        }else{\r\n            me.storeLocation = me.storeLocationAll.filter(x=>me.storeLocationAll.indexOf(x) <= 20);\r\n        }\r\n    }, 500),\r\n    \r\n\r\n    /**------------------------------------------\r\n        * Nhận sự kiện khi button của function được click\r\n        * @created : quyetkaito (26/06/2022)\r\n        --------------------------------------------*/\r\n    handleFunctionClick(object) {\r\n      let me = this;\r\n      if (object) {\r\n        //kiểm tra xem nó là loại gì sửa hay xem hay xóa..\r\n        switch (me.tableFunction.mainFunction) {\r\n          case \"Edit\": {\r\n            // me.showDialog(object);\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    handleDoubleClick() {},\r\n\r\n    async initStaticData() {\r\n      //gọi api lấy tất cả danh sách tỉnh huyện xã, lưu vào cache\r\n      let me = this;\r\n      me.tableFunction = {\r\n        mainButtonText: \"Sửa\",\r\n        mainFunction: \"Edit\",\r\n        isShow: true,\r\n      };\r\n      me.columns = [\r\n        {\r\n          title: \"Tên địa điểm\",\r\n          key: \"location_name\",\r\n          width: 200,\r\n        },\r\n        {\r\n          title: \"Mã\",\r\n          key: \"location_code\",\r\n          width: 200,\r\n        },\r\n      ];\r\n      let storeCacheLocation = me.$cache.getCache('locationStore');\r\n      if(storeCacheLocation){          \r\n          me.storeLocationAll = storeCacheLocation;\r\n          me.storeLocation = me.storeLocationAll.filter(x=>me.storeLocationAll.indexOf(x) <= 20);\r\n      }else{\r\n        let res = await LocationAPI.request(LocationAPI.urlName, \"get\");\r\n        if (res && res.data && res.data.length > 0) {\r\n            me.storeLocation = res.data.filter(x=>x.parent_code == null);\r\n            me.$cache.setCache('locationStore', JSON.stringify(res.data));\r\n        }\r\n      }\r\n      \r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]},"metadata":{},"sourceType":"module"}