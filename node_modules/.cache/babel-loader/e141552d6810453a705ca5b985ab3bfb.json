{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-b1abdedc\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"userinfo-container flex\"\n};\nconst _hoisted_2 = {\n  class: \"w-1/3 overview\"\n};\nconst _hoisted_3 = {\n  class: \"flex align-x-center\"\n};\nconst _hoisted_4 = {\n  class: \"user-avatar mt-10 rounded-full\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  class: \"name flex align-x-center mt-4\"\n};\nconst _hoisted_7 = {\n  class: \"w-2/3 info-detail\"\n};\nconst _hoisted_8 = {\n  class: \"form-title flex align-y-center\"\n};\n\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"mr-10 title\"\n}, \"Thông tin cá nhân\", -1\n/* HOISTED */\n));\n\nconst _hoisted_10 = {\n  class: \"btn-save\"\n};\nconst _hoisted_11 = {\n  class: \"m-form-field\"\n};\nconst _hoisted_12 = {\n  class: \"form-item\",\n  style: {\n    \"width\": \"50%\",\n    \"margin-right\": \"10px\"\n  }\n};\nconst _hoisted_13 = {\n  class: \"form-item\",\n  style: {\n    \"width\": \"50%\"\n  }\n};\nconst _hoisted_14 = {\n  class: \"m-form-field\"\n};\nconst _hoisted_15 = {\n  class: \"form-item\",\n  style: {\n    \"width\": \"100%\"\n  }\n};\nconst _hoisted_16 = {\n  class: \"m-form-field\"\n};\nconst _hoisted_17 = {\n  class: \"form-item\",\n  style: {\n    \"padding-right\": \"6px\",\n    \"width\": \"40%\"\n  }\n};\nconst _hoisted_18 = {\n  class: \"form-item\",\n  style: {\n    \"width\": \"60%\",\n    \"padding-left\": \"6px\"\n  }\n};\nconst _hoisted_19 = {\n  class: \"mt-3 m-field-gender\"\n};\nconst _hoisted_20 = {\n  class: \"m-form-field\"\n};\nconst _hoisted_21 = {\n  class: \"form-item\",\n  style: {\n    \"width\": \"100%\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_m_button = _resolveComponent(\"m-button\");\n\n  const _component_m_input = _resolveComponent(\"m-input\");\n\n  const _component_m_label = _resolveComponent(\"m-label\");\n\n  const _component_v_date_picker = _resolveComponent(\"v-date-picker\");\n\n  const _component_m_radio = _resolveComponent(\"m-radio\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"input\", {\n    type: \"file\",\n    style: {\n      \"display\": \"none\"\n    },\n    id: \"choose-avt\",\n    ref: \"chooseAvt\",\n    onChange: _cache[0] || (_cache[0] = (...args) => $options.changeAvatar && $options.changeAvatar(...args))\n  }, null, 544\n  /* HYDRATE_EVENTS, NEED_PATCH */\n  ), _createElementVNode(\"img\", {\n    id: \"userAvatar\",\n    ref: \"userAvatar\",\n    src: $data.imgSrc,\n    alt: \"\",\n    class: \"rounded-full\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.chooseAvatar && $options.chooseAvatar(...args))\n  }, null, 8\n  /* PROPS */\n  , _hoisted_5)])]), _createElementVNode(\"div\", _hoisted_6, _toDisplayString($data.currentItem.full_name), 1\n  /* TEXT */\n  )]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_hoisted_9, _createElementVNode(\"div\", _hoisted_10, [_createVNode(_component_m_button, {\n    text: _ctx.$t('Save'),\n    type: $data.typeButton,\n    onClick: $options.saveInfo\n  }, null, 8\n  /* PROPS */\n  , [\"text\", \"type\", \"onClick\"])])]), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_createVNode(_component_m_input, {\n    labelText: _ctx.$t('Email'),\n    modelValue: $data.currentItem.email,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.currentItem.email = $event),\n    readonly: true,\n    isAutoFocus: true,\n    maxlength: 20,\n    placeholder: \"\",\n    style: {\n      width: '100%'\n    },\n    ref: \"email\"\n  }, null, 8\n  /* PROPS */\n  , [\"labelText\", \"modelValue\"])]), _createElementVNode(\"div\", _hoisted_13, [_createVNode(_component_m_input, {\n    labelText: _ctx.$t('Phone'),\n    modelValue: $data.currentItem.phone,\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.currentItem.phone = $event),\n    readonly: $data.isViewing,\n    isAutoFocus: true,\n    maxlength: 20,\n    placeholder: \"\",\n    style: {\n      width: '100%'\n    },\n    ref: \"email\"\n  }, null, 8\n  /* PROPS */\n  , [\"labelText\", \"modelValue\", \"readonly\"])])]), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, [_createVNode(_component_m_input, {\n    labelText: _ctx.$t('FullName'),\n    modelValue: $data.currentItem.full_name,\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.currentItem.full_name = $event),\n    readonly: $data.isViewing,\n    isAutoFocus: true,\n    maxlength: 20,\n    placeholder: \"\",\n    style: {\n      width: '100%'\n    },\n    ref: \"email\"\n  }, null, 8\n  /* PROPS */\n  , [\"labelText\", \"modelValue\", \"readonly\"])])]), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"div\", _hoisted_17, [_createVNode(_component_m_label, {\n    text: \"Ngày sinh\"\n  }), _createVNode(_component_v_date_picker, {\n    value: $data.currentItem.date_of_birth,\n    \"onUpdate:value\": _cache[5] || (_cache[5] = $event => $data.currentItem.date_of_birth = $event),\n    format: _ctx.$store.state.dateFormat,\n    placeholder: _ctx.$store.state.dateFormat,\n    lang: _ctx.$store.state.langString,\n    \"disabled-date\": $options.disabledDateBeforeToday,\n    clearable: false,\n    \"title-format\": \"DD/MM/YYYY\"\n  }, null, 8\n  /* PROPS */\n  , [\"value\", \"format\", \"placeholder\", \"lang\", \"disabled-date\"])]), _createElementVNode(\"div\", _hoisted_18, [_createVNode(_component_m_label, {\n    text: \"Giới tính\"\n  }), _createElementVNode(\"div\", _hoisted_19, [_createVNode(_component_m_radio, {\n    modelValue: $data.currentItem.gender,\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.currentItem.gender = $event),\n    value: 1,\n    label: \"Nam\"\n  }, null, 8\n  /* PROPS */\n  , [\"modelValue\"]), _createVNode(_component_m_radio, {\n    modelValue: $data.currentItem.gender,\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $data.currentItem.gender = $event),\n    value: 0,\n    label: \"Nữ\"\n  }, null, 8\n  /* PROPS */\n  , [\"modelValue\"]), _createVNode(_component_m_radio, {\n    modelValue: $data.currentItem.gender,\n    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $data.currentItem.gender = $event),\n    value: 2,\n    label: \"Khác\"\n  }, null, 8\n  /* PROPS */\n  , [\"modelValue\"])])])]), _createElementVNode(\"div\", _hoisted_20, [_createElementVNode(\"div\", _hoisted_21, [_createVNode(_component_m_input, {\n    labelText: \"Địa chỉ\",\n    maxlength: 255,\n    readonly: $data.isViewing,\n    modelValue: $data.currentItem.address,\n    \"onUpdate:modelValue\": _cache[9] || (_cache[9] = $event => $data.currentItem.address = $event),\n    placeholder: \"\",\n    style: {\n      width: '100%'\n    },\n    ref: \"address\"\n  }, null, 8\n  /* PROPS */\n  , [\"readonly\", \"modelValue\"])])])])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","style","_createElementBlock","type","id","ref","onChange","$options","src","$data","alt","onClick","_toDisplayString","full_name","_hoisted_9","_createVNode","_component_m_button","text","_ctx","_component_m_input","labelText","email","$event","readonly","isAutoFocus","maxlength","placeholder","width","phone","_component_m_label","_component_v_date_picker","value","date_of_birth","format","state","dateFormat","lang","langString","clearable","_component_m_radio","gender","label","address"],"sourceRoot":"","sources":["D:\\Traveller\\Traveller-Frontend\\traveller-ui\\src\\views\\user-info\\UserInfo.vue"],"sourcesContent":["<template>\r\n  <div class=\"userinfo-container flex\">\r\n    <div class=\"w-1/3 overview\">\r\n      <div class=\"flex align-x-center\">\r\n        <div class=\"user-avatar mt-10 rounded-full\">\r\n           <input type=\"file\" style=\"display: none;\" id=\"choose-avt\" ref=\"chooseAvt\" @change=\"changeAvatar\">\r\n           <img id=\"userAvatar\" ref=\"userAvatar\" :src=\"imgSrc\" alt=\"\" class=\"rounded-full\" @click=\"chooseAvatar\">\r\n        </div>\r\n      </div>\r\n      <div class=\"name flex align-x-center mt-4\">{{currentItem.full_name}}</div>\r\n    </div>  \r\n    <div class=\"w-2/3 info-detail\">\r\n      <div class=\" form-title flex align-y-center\">\r\n        <div class=\"mr-10 title\">Thông tin cá nhân</div>\r\n        <div class=\"btn-save\">\r\n          <m-button\r\n            :text=\"$t('Save')\"\r\n            :type=\"typeButton\"\r\n            @click=\"saveInfo\"\r\n          ></m-button>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"m-form-field\">\r\n        <div class=\"form-item\" style=\"width: 50%; margin-right: 10px;\">\r\n          <m-input\r\n            :labelText=\"$t('Email')\"\r\n            v-model=\"currentItem.email\"            \r\n            :readonly=\"true\"\r\n            :isAutoFocus=\"true\"\r\n            :maxlength=\"20\"\r\n            placeholder=\"\"\r\n            :style=\"{ width: '100%' }\"\r\n            ref=\"email\"            \r\n          />\r\n        </div>    \r\n        <div class=\"form-item\" style=\"width: 50%\">\r\n          <m-input\r\n            :labelText=\"$t('Phone')\"\r\n            v-model=\"currentItem.phone\"            \r\n            :readonly=\"isViewing\"\r\n            :isAutoFocus=\"true\"\r\n            :maxlength=\"20\"\r\n            placeholder=\"\"\r\n            :style=\"{ width: '100%' }\"\r\n            ref=\"email\"            \r\n          />\r\n        </div>              \r\n      </div>\r\n      <div class=\"m-form-field\">\r\n        <div class=\"form-item\" style=\"width: 100%\">\r\n          <m-input\r\n            :labelText=\"$t('FullName')\"\r\n            v-model=\"currentItem.full_name\"            \r\n            :readonly=\"isViewing\"\r\n            :isAutoFocus=\"true\"\r\n            :maxlength=\"20\"\r\n            placeholder=\"\"\r\n            :style=\"{ width: '100%' }\"\r\n            ref=\"email\"            \r\n          />\r\n        </div>                  \r\n      </div>\r\n      <div class=\"m-form-field\">\r\n          <div class=\"form-item\" style=\"padding-right: 6px; width: 40%\">\r\n            <m-label text=\"Ngày sinh\" />\r\n            <v-date-picker\r\n              v-model:value=\"currentItem.date_of_birth\"\r\n              :format=\"$store.state.dateFormat\"\r\n              :placeholder=\"$store.state.dateFormat\"\r\n              :lang=\"$store.state.langString\"\r\n              :disabled-date=\"disabledDateBeforeToday\"\r\n              :clearable=\"false\"\r\n              title-format=\"DD/MM/YYYY\"\r\n            />\r\n          </div>\r\n          <div class=\"form-item\" style=\"width: 60%; padding-left: 6px\">\r\n            <m-label text=\"Giới tính\" />\r\n            <div class=\"mt-3 m-field-gender\">\r\n              <m-radio v-model=\"currentItem.gender\" :value=\"1\" label=\"Nam\"/>\r\n              <m-radio v-model=\"currentItem.gender\" :value=\"0\" label=\"Nữ\" />\r\n              <m-radio v-model=\"currentItem.gender\" :value=\"2\" label=\"Khác\"/>                      \r\n            </div>\r\n          </div>\r\n      </div>\r\n      <div class=\"m-form-field\">\r\n        <div class=\"form-item\" style=\"width: 100%\">\r\n          <m-input\r\n            labelText=\"Địa chỉ\"\r\n            :maxlength=\"255\"\r\n            :readonly=\"isViewing\"\r\n            v-model=\"currentItem.address\"\r\n            placeholder=\"\"\r\n            :style=\"{ width: '100%' }\"\r\n            ref=\"address\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport UserAPI from '@/api/UserAPI';\r\n// import DatePicker\r\nimport NextDatePicker from \"vue-datepicker-next\";\r\nimport \"vue-datepicker-next/index.css\";\r\nimport \"vue-datepicker-next/locale/vi\";\r\nimport { getStorage, ref, uploadBytes, getMetadata, getDownloadURL } from \"firebase/storage\";\r\nconst storage = getStorage();\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nexport default {\r\n  components: {\r\n    \"v-date-picker\": NextDatePicker,\r\n  },\r\n  data() {\r\n    return {\r\n      currentItem: {}, //thông tin user\r\n      isViewing: false,\r\n      originalItem: {}, //lưu lại để so sánh sự thay đổi\r\n      typeButton: 'info',\r\n      imgSrc: \"\",\r\n    }\r\n  }, \r\n  created(){\r\n    this.getUserInfo();\r\n  },\r\n  mounted(){    \r\n    this.imgSrc = this.currentItem.user_avatar_img ?this.currentItem.user_avatar_img :require(`@/assets/img/default-avatar.jpg`);\r\n  },\r\n  /**\r\n  * Hàm xác nhận chuyển màn hình. Nếu chưa lưu thì hỏi có muốn lưu hay không.\r\n  * @created : quyetkaito 12/10/2022\r\n  */\r\n  beforeRouteLeave(to, from, next){      \r\n    let me = this;\r\n    if(!me.$commonFunc.isDeepEqual(me.currentItem, me.originalItem)){\r\n      if(confirm(\"bạn chưa lưu, có muốn chuyển không?\")){\r\n        next();\r\n      }else{\r\n        next(false);\r\n      }\r\n    }else{\r\n      next();\r\n    }\r\n  },\r\n  methods:{\r\n    /**\r\n    * Xử lý khi ảnh thay đổi\r\n    * @created : quyetkaito 13/10/2022\r\n    */\r\n    changeAvatar(e){\r\n        let me = this;\r\n        const metadata = {\r\n          contentType: 'image/jpeg',\r\n        };\r\n        if(me.$commonFunc.validateInputImage(e.target)){\r\n          const storageRef = ref(storage, `image/${uuidv4()}.jpeg`);\r\n          // Upload the file and metadata\r\n          debugger\r\n          const uploadTask = uploadBytes(storageRef, e.target.files[0], metadata).then(()=>{\r\n            getDownloadURL(storageRef).then((x)=>{                    \r\n               document.getElementById('userAvatar').style.display = 'block';           \r\n               document.getElementById('userAvatar').src = x;\r\n               me.$store.state.userAvatar = x;\r\n               me.currentItem.user_avatar_img = x;\r\n            })            \r\n          });        \r\n        }      \r\n    },\r\n\r\n    chooseAvatar(){\r\n      let me = this;\r\n      if(me.$refs.chooseAvt){\r\n        me.$refs.chooseAvt.click();\r\n      }\r\n    },\r\n    disabledDateBeforeToday(date){\r\n        return date > new Date();\r\n    },\r\n    /**\r\n    * Gọi APi lưu thông tin người dùng\r\n    * @created : quyetkaito 12/10/2022\r\n    */\r\n    async saveInfo(){\r\n      let me = this;\r\n      if(me.currentItem && this.currentItem.user_id){\r\n          //build object\r\n          me.currentItem.date_of_birth = me.$commonFunc.setTimeZone(me.currentItem.date_of_birth);\r\n          let res = await UserAPI.request(UserAPI.urlName, 'PUT', this.currentItem);\r\n          if(res && res.data){                            \r\n              me.$store.commit('showInfo', {message: res.data.UserMsg, timeout: 1200});\r\n              me.typeButton = 'gray';\r\n              me.currentItem.date_of_birth = new Date(me.currentItem.date_of_birth);\r\n              me.$session.set('UserAvatar', me.currentItem.user_avatar_img);\r\n          }else{\r\n              me.$store.commit('showError', {message: res.data.UserMsg, timeout: 1200});\r\n          }\r\n      }\r\n    },\r\n\r\n    /**\r\n    * Hàm lấy thông tin người dùng\r\n    * @created : quyetkaito 12/10/2022\r\n    */\r\n    async getUserInfo(){\r\n        try {\r\n          let me = this;\r\n          //lấy trong sesstion nếu có\r\n          let userInfo = me.$session.get(\"UserInfo\");\r\n          if(userInfo){\r\n              me.currentItem = userInfo;\r\n              debugger\r\n              if(me.currentItem.hasOwnProperty('date_of_birth')){\r\n                  me.currentItem.date_of_birth = new Date(me.currentItem.date_of_birth);\r\n              }\r\n              if(me.currentItem.user_avatar_img){\r\n                if(this.$refs.userAvatar){\r\n                  this.$refs.userAvatar.src = me.currentItem.user_avatar_img;\r\n                }\r\n                me.$store.state.userAvatar = me.currentItem.user_avatar_img;\r\n              }\r\n              me.originalItem = JSON.parse(JSON.stringify(me.currentItem));\r\n          }else{ //lấy tươi\r\n            let userId = me.$session.get('UserID');          \r\n            if(userId){\r\n              let res = await UserAPI.request(UserAPI.urlName+`/${userId}`, 'GET');\r\n              if(res && res.data){       \r\n                 me.$session.set(\"UserInfo\", res.data);                     \r\n                 me.currentItem = JSON.parse(JSON.stringify(res.data));\r\n                 if(me.currentItem.hasOwnProperty('date_of_birth')){\r\n                    me.currentItem.date_of_birth = new Date(me.currentItem.date_of_birth);\r\n                 }\r\n                 if(me.currentItem.user_avatar_img){\r\n                    document.getElementById('userAvatar').src = me.currentItem.user_avatar_img;\r\n                    me.$store.state.userAvatar = me.currentItem.user_avatar_img;\r\n                 }\r\n                 me.originalItem = JSON.parse(JSON.stringify(me.currentItem));\r\n              }\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.error(error)\r\n        }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.m-form-field {\r\n    display: flex;\r\n    width: 100%;\r\n    padding-bottom: 12px;\r\n}\r\n\r\n.form-item {\r\n    box-sizing: border-box;\r\n}\r\n.userinfo-container {\r\n  height: 100%;\r\n}\r\n\r\n.userinfo-container .overview{\r\n  border-right: 2px solid #918e8e;  \r\n}\r\n\r\n.userinfo-container .overview .name{\r\n  font-weight: bold;\r\n}\r\n\r\n.userinfo-container .info-detail{\r\n  padding: 10px;\r\n}\r\n\r\n.user-avatar{\r\n  width: 200px;\r\n  height: 200px;\r\n  border: 5px solid #16d6e4;  \r\n}\r\n.info-detail .form-title{\r\n  margin-bottom: 10px;\r\n}\r\n.info-detail .btn-save{\r\n  text-align: left;\r\n}\r\n.info-detail .title{\r\n  font-weight: bold;\r\n  font-size: 30px;\r\n}\r\n.user-avatar img{\r\n  object-fit: cover;\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}