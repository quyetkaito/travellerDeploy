{"ast":null,"code":"import * as base from \"@/script/base\";\nexport default {\n  name: \"MInput\",\n  emits: [\"update:modelValue\", \"checkBlur\", \"blur\", \"onChange\"],\n\n  data() {\n    return {\n      full: \"width:100%\"\n    };\n  },\n\n  props: {\n    //input có label hay không?\n    isHasLabel: {\n      type: Boolean,\n      default: true\n    },\n    //label của input là gì\n    labelText: {\n      type: String,\n      default: \"label-text\"\n    },\n    //label đầy đủ của input là gì\n    labelTextFull: {\n      type: String,\n      default: \"\"\n    },\n    //hiện title khi hover cho label viết tắt\n    labelTitle: {\n      type: String,\n      default: null\n    },\n    //loại input\n    type: {\n      type: String,\n      default: \"text\"\n    },\n    //placeholder của input\n    placeholder: {\n      type: String,\n      default: \"\"\n    },\n    //input này có bắt buộc không?\n    required: {\n      type: Boolean,\n      default: false\n    },\n    //kí hiệu bắt buộc là gì?\n    requiredSymbol: {\n      type: String,\n      default: \"*\"\n    },\n    //input này có icon không?\n    isHasIcon: {\n      type: Boolean,\n      default: false\n    },\n    //chiều rộng là bao nhiêu? mặc định 100% chiều dài phần tử cha\n    width: {\n      type: Number,\n      default: 200\n    },\n    //chiều cao của input là bao nhiêu?\n    height: {\n      type: [Number, String],\n      default: 40\n    },\n    //số ký tự có thể nhập là bao nhiêu?\n    maxlength: {\n      type: Number,\n      default: 255\n    },\n    //giá trị khởi tạo cho input\n    modelValue: {\n      type: [String, Number],\n      default: \"\"\n    },\n    //thêm class lỗi nếu lỗi\n    isError: {\n      type: Boolean,\n      default: false\n    },\n    //có phải input dạng số hay không?\n    isNumberInput: {\n      type: Boolean,\n      default: false\n    },\n    //có phải input dạng text area không?\n    isTextArea: {\n      type: Boolean,\n      default: false\n    },\n    //name của input\n    name: {\n      type: String,\n      default: \"\"\n    },\n    //input có bị disabled ko?\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    //binding nhiều style\n    style: {\n      type: [String, Object],\n      default: null\n    },\n    tabindex: {\n      type: [Number, String],\n      default: null\n    }\n  },\n  methods: {\n    /**----------------------------------\r\n     * Hàm gửi dữ liệu tới component cha\r\n     * và xử lý dữ liệu.\r\n     * Author: quyetkaito (25/02/2022)\r\n    -------------------------------------*/\n    sendChange(event) {\n      try {\n        //khi nhập thì bỏ error border\n        this.removeError(); //nếu là dạng số thì format\n\n        if (this.isNumberInput) {\n          //gọi hàm format định dạng số ngay khi nhập liệu từ base\n          this.onNumberInput(event);\n        }\n\n        this.$emit(\"onChange\", true);\n        this.$emit(\"update:modelValue\", event.target.value);\n      } catch (error) {\n        //log ra lỗi\n        console.log(error);\n      }\n    },\n\n    /**-----------------------------------------------------------\r\n    * Hàm thực hiện format định dạng số ngay trong khi nhập liệu.\r\n    * @param {Event} event \r\n    * Author: quyetkaito (27/03/2022).\r\n    -----------------------------------*/\n    onNumberInput(event) {\n      try {\n        //lấy ra giá trị của ô input hiện tại\n        let value = event.target.value; // console.log(\"ô input hiện tại: \", value);\n\n        if (event.data == \",\") {\n          //nếu người dùng nhập dấu ',' và không có dấu ',' nào đã tồn tại => đang nhập số thập phân\n          if ((value.match(/,/g) || []).length <= 1) {\n            // console.log(\"chưa phải số thập phân\");\n            return; //cho nhập liệu tiếp\n          }\n        } //format số\n\n\n        event.target.value = base.formatCurrency(value);\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    /**--------------------------------\r\n     * Hàm dùng để focus vào input.\r\n     * Author: quyetkaito (03/03/2022)\r\n    ----------------------------------*/\n    focus: function () {\n      this.$nextTick(function () {\n        this.$refs.input.focus();\n      });\n    },\n\n    /**------------------------------------\r\n     * Hàm dùng để thêm css lỗi cho input.\r\n     * Author: quyetkaito (03/03/2022)\r\n    --------------------------------------*/\n    addError: function () {\n      this.$refs.input.classList.add(\"error\");\n      this.$refs.input.setAttribute(\"title\", `${this.labelText} không được bỏ trống`);\n    },\n\n    /**--------------------------\r\n     * Hàm thêm border đỏ cho input\r\n     * Author: quyetkaito (20/03/2022)\r\n     -------------------------*/\n    addRedBorder: function () {\n      this.$refs.input.classList.add(\"error\");\n    },\n\n    /**------------------------------------\r\n     * Hàm dùng để bỏ css lỗi cho input.\r\n     * Author: quyetkaito (03/03/2022)\r\n    --------------------------------------*/\n    removeError: function () {\n      this.$refs.input.classList.remove(\"error\");\n      this.$refs.input.setAttribute(\"title\", \"\");\n    },\n\n    /**-------------------------------\r\n     * Hàm lấy ra label của input.\r\n     * Author: quyetkaito (03/03/2022)\r\n     ---------------------------------*/\n    getLabel: function () {\n      return this.labelText;\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["base","name","emits","data","full","props","isHasLabel","type","Boolean","default","labelText","String","labelTextFull","labelTitle","placeholder","required","requiredSymbol","isHasIcon","width","Number","height","maxlength","modelValue","isError","isNumberInput","isTextArea","disabled","style","Object","tabindex","methods","sendChange","event","removeError","onNumberInput","$emit","target","value","error","console","log","match","length","formatCurrency","focus","$nextTick","$refs","input","addError","classList","add","setAttribute","addRedBorder","remove","getLabel"],"sourceRoot":"","sources":["D:\\Traveller\\Traveller-Frontend\\traveller-ui\\src\\components\\m-input\\MInput.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <label for=\"\" class=\"m-label\" v-show=\"isHasLabel\" :title=\"labelTextFull\">\r\n      {{ labelText }}\r\n      <span class=\"require-mark\" v-show=\"required\">{{requiredSymbol}}</span>\r\n    </label>\r\n    <div style=\"position: relative\">\r\n      <!-- Nếu là input bình thường -->\r\n      <div class=\"flex align-y-center\" v-if=\"!isTextArea\">\r\n        <input\r\n          ref=\"input\"\r\n          :type=\"type\"\r\n          :name=\"name\"\r\n          :maxlength=\"maxlength\"\r\n          :disabled=\"disabled\"\r\n          :tabindex=\"tabindex\"\r\n          class=\"m-input\"\r\n          :value=\"modelValue\"\r\n          @input=\"sendChange\"\r\n          :style=\"{ height: height + 'px', style }\"\r\n          v-bind:class=\"{\r\n            'm-input-icon': isHasIcon,\r\n            error: isError,\r\n            'text-align-right': isNumberInput, //căn phải nếu là số\r\n          }\"\r\n          :placeholder=\"placeholder\"\r\n          @blur=\"$emit('blur', $event)\"\r\n          @change=\"$emit('onChange', modelValue)\"\r\n        />\r\n        <div\r\n          class=\"m-search m-icon m-icon-16 m-icon-search\"\r\n          v-show=\"isHasIcon\"\r\n          @click=\"$emit('findData')\"\r\n        ></div>\r\n      </div>\r\n\r\n      <!-- Nếu là textarea -->\r\n      <div class=\"flex align-y-center\" v-if=\"isTextArea\">\r\n        <textarea\r\n          ref=\"input\"\r\n          class=\"m-input m-textarea\"\r\n          :placeholder=\"placeholder\"\r\n          :style=\"{ height: height + 'px!important', style }\"\r\n          @input=\"sendChange\"\r\n          :value=\"modelValue\"\r\n          @change=\"$emit('onChange', modelValue)\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as base from \"@/script/base\";\r\n\r\nexport default {\r\n  name: \"MInput\",\r\n  emits: [\"update:modelValue\", \"checkBlur\", \"blur\", \"onChange\"],\r\n  data() {\r\n    return {\r\n      full: \"width:100%\",\r\n    };\r\n  },\r\n  props: {\r\n    //input có label hay không?\r\n    isHasLabel: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    //label của input là gì\r\n    labelText: {\r\n      type: String,\r\n      default: \"label-text\",\r\n    },\r\n    //label đầy đủ của input là gì\r\n    labelTextFull: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    //hiện title khi hover cho label viết tắt\r\n    labelTitle: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n    //loại input\r\n    type: {\r\n      type: String,\r\n      default: \"text\",\r\n    },\r\n    //placeholder của input\r\n    placeholder: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    //input này có bắt buộc không?\r\n    required: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    //kí hiệu bắt buộc là gì?\r\n    requiredSymbol:{\r\n      type: String,\r\n      default: \"*\",\r\n    },\r\n    //input này có icon không?\r\n    isHasIcon: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    //chiều rộng là bao nhiêu? mặc định 100% chiều dài phần tử cha\r\n    width: {\r\n      type: Number,\r\n      default: 200,\r\n    },\r\n\r\n    //chiều cao của input là bao nhiêu?\r\n    height: {\r\n      type: [Number,String],\r\n      default: 40,\r\n    },\r\n    //số ký tự có thể nhập là bao nhiêu?\r\n    maxlength: {\r\n      type: Number,\r\n      default: 255,\r\n    },\r\n    //giá trị khởi tạo cho input\r\n    modelValue: {\r\n      type: [String, Number],\r\n      default: \"\",\r\n    },\r\n    //thêm class lỗi nếu lỗi\r\n    isError: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    //có phải input dạng số hay không?\r\n    isNumberInput: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    //có phải input dạng text area không?\r\n    isTextArea: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    //name của input\r\n    name: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    //input có bị disabled ko?\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    //binding nhiều style\r\n    style:{\r\n      type: [String,Object],\r\n      default: null\r\n    },\r\n    tabindex:{\r\n      type: [Number,String],\r\n      default:null\r\n    }\r\n  },\r\n  methods: {\r\n    /**----------------------------------\r\n     * Hàm gửi dữ liệu tới component cha\r\n     * và xử lý dữ liệu.\r\n     * Author: quyetkaito (25/02/2022)\r\n    -------------------------------------*/\r\n    sendChange(event) {\r\n      try {\r\n        //khi nhập thì bỏ error border\r\n        this.removeError();\r\n        //nếu là dạng số thì format\r\n        if (this.isNumberInput) {\r\n          //gọi hàm format định dạng số ngay khi nhập liệu từ base\r\n          this.onNumberInput(event);\r\n        }\r\n        this.$emit(\"onChange\", true);\r\n        this.$emit(\"update:modelValue\", event.target.value);\r\n      } catch (error) {\r\n        //log ra lỗi\r\n        console.log(error);\r\n      }\r\n    },\r\n\r\n    /**-----------------------------------------------------------\r\n * Hàm thực hiện format định dạng số ngay trong khi nhập liệu.\r\n * @param {Event} event \r\n * Author: quyetkaito (27/03/2022).\r\n -----------------------------------*/\r\n    onNumberInput(event) {\r\n      try {\r\n        //lấy ra giá trị của ô input hiện tại\r\n        let value = event.target.value;\r\n        // console.log(\"ô input hiện tại: \", value);\r\n        if (event.data == \",\") {\r\n          //nếu người dùng nhập dấu ',' và không có dấu ',' nào đã tồn tại => đang nhập số thập phân\r\n          if ((value.match(/,/g) || []).length <= 1) {\r\n            // console.log(\"chưa phải số thập phân\");\r\n            return; //cho nhập liệu tiếp\r\n          }\r\n        }\r\n        //format số\r\n        event.target.value = base.formatCurrency(value);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n\r\n    /**--------------------------------\r\n     * Hàm dùng để focus vào input.\r\n     * Author: quyetkaito (03/03/2022)\r\n    ----------------------------------*/  \r\n    focus: function () {\r\n      this.$nextTick(function () {\r\n        this.$refs.input.focus()\r\n      });\r\n    },\r\n\r\n    /**------------------------------------\r\n     * Hàm dùng để thêm css lỗi cho input.\r\n     * Author: quyetkaito (03/03/2022)\r\n    --------------------------------------*/\r\n    addError: function () {\r\n      this.$refs.input.classList.add(\"error\");\r\n      this.$refs.input.setAttribute(\r\n        \"title\",\r\n        `${this.labelText} không được bỏ trống`\r\n      );\r\n    },\r\n\r\n    /**--------------------------\r\n     * Hàm thêm border đỏ cho input\r\n     * Author: quyetkaito (20/03/2022)\r\n     -------------------------*/\r\n    addRedBorder: function () {\r\n      this.$refs.input.classList.add(\"error\");\r\n    },\r\n\r\n    /**------------------------------------\r\n     * Hàm dùng để bỏ css lỗi cho input.\r\n     * Author: quyetkaito (03/03/2022)\r\n    --------------------------------------*/\r\n    removeError: function () {\r\n      this.$refs.input.classList.remove(\"error\");\r\n      this.$refs.input.setAttribute(\"title\", \"\");\r\n    },\r\n\r\n    /**-------------------------------\r\n     * Hàm lấy ra label của input.\r\n     * Author: quyetkaito (03/03/2022)\r\n     ---------------------------------*/\r\n    getLabel: function () {\r\n      return this.labelText;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n@import url(\"@/style/common/input.css\");\r\n</style>"]},"metadata":{},"sourceType":"module"}