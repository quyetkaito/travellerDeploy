{"ast":null,"code":"import SearchHistoryAPI from \"@/api/SearchHistoryAPI\";\nexport default {\n  data() {\n    return {\n      full_name: \"bạn\",\n      isLogged: false,\n      textSearch: '',\n      listOldSearch: [],\n      userID: this.$session.get('UserID')\n    };\n  },\n\n  created() {\n    this.initStaticData();\n  },\n\n  methods: {\n    searchItemClick(item) {\n      if (item) {\n        this.textSearch = item.search_content;\n        this.searchData();\n        this.hideResult();\n      }\n    },\n\n    filterByLocation(i) {\n      this.$router.push({\n        name: 'postFilterList',\n        params: {\n          title: 'Miền Bắc'\n        }\n      });\n    },\n\n    /**\r\n    * Lấy lịch sử tìm kiếm của user này\r\n    * @created : quyetkaito 08/11/2022\r\n    */\n    async getSearchData() {\n      try {\n        let me = this;\n\n        if (me.userID) {\n          let res = await SearchHistoryAPI.request(SearchHistoryAPI.urlName + `/history_by_user/${me.userID}`, 'GET');\n\n          if (res && res.data) {\n            this.listOldSearch = [];\n            this.listOldSearch = res.data.filter((x, index) => index < 5);\n          }\n        } else {//nếu ko có userID thì lấy trong cache\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    },\n\n    deleteCache() {\n      let me = this; //nếu ko đăng nhập thì xóa cache\n\n      if (me.userID) {\n        this.$router.push(\"/search-history\");\n        this.hideResult();\n      } else {\n        this.$cache.remove(\"searchData\");\n        this.listOldSearch = [];\n      }\n    },\n\n    async deleteHistory(item) {\n      if (item) {\n        try {\n          let res = await SearchHistoryAPI.request(SearchHistoryAPI.urlName, 'DELETE', [item.id]);\n\n          if (res && res.data) {\n            console.log(res.data.UserMsg);\n          }\n        } catch (error) {\n          console.error(error);\n        }\n      }\n    },\n\n    initStaticData() {\n      let name = this.$session.get('FullName');\n\n      if (name) {\n        this.full_name = name;\n        this.isLogged = true;\n      }\n    },\n\n    gotoLogin() {\n      this.$router.push({\n        name: \"login\"\n      });\n    },\n\n    /**\r\n    * Chuyển sang màn hình đăng ký\r\n    * @created : quyetkaito 11/10/2022\r\n    */\n    gotoRegister() {},\n\n    gotoInfo() {\n      //quay sang trang thông tin người dùng\n      this.$router.push({\n        name: \"UserInfo\"\n      });\n    },\n\n    searchData() {\n      let me = this; //tìm kiếm\n\n      if (me.textSearch) {\n        this.$router.push(\"/home\");\n        me.$store.textSearch = me.textSearch;\n        me.$eventBus.emit('test', me.textSearch);\n        this.hideResult(); //nếu có userID thì lưu vào db\n\n        if (me.userID) {\n          this.insertHistory();\n        } else {\n          //nếu ko thì lưu vào cache \n          this.openSearchBox(); //lưu lại textsearch vào cache\n          // let oldSearchData = me.$cache.get(\"searchData\");\n          // if(oldSearchData){\n          //     this.listOldSearch = oldSearchData;\n          //     if(Array.isArray(oldSearchData)){\n          //         oldSearchData.unshift(me.textSearch);\n          //         me.$cache.set(\"searchData\", oldSearchData);\n          //     }\n          // }else if(me.textSearch){\n          //     me.$cache.set(\"searchData\", [me.textSearch]);\n          // }\n        }\n      }\n    },\n\n    async insertHistory() {\n      try {\n        let me = this;\n\n        if (me.userID) {\n          let obj = {\n            user_id: me.userID,\n            search_content: me.textSearch,\n            search_date: me.$commonFunc.setTimeZone(new Date())\n          };\n          let res = await SearchHistoryAPI.request(SearchHistoryAPI.urlName, 'POST', obj);\n\n          if (res && res.data) {\n            if (res.data.StatusCode == 201) {\n              console.log(\"Lưu lịch sử thành công\");\n            }\n          }\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    },\n\n    openSearchBox() {\n      let me = this; //hiện content kết quả\n\n      if (me.$refs.searchInput) {\n        let searchPosition = me.$refs.searchInput.getBoundingClientRect();\n        let resultCmp = me.$refs.searchPreview;\n        resultCmp.style.left = 0 + \"px\";\n        resultCmp.style.width = searchPosition.right + \"px\";\n        resultCmp.style.top = searchPosition.bottom + \"px\";\n        resultCmp.style.display = \"block\";\n      }\n\n      if (me.userID) {\n        //nếu có thông tin người dùng thì lấy trong db\n        this.getSearchData();\n      } else {//nếu ko thì lấy cache\n        // let oldSearch = me.$cache.get(\"searchData\");\n        // if(oldSearch){\n        //     this.listOldSearch = oldSearch;\n        // }\n      }\n    },\n\n    hideResult() {\n      let me = this;\n      let resultCmp = me.$refs.searchPreview;\n      resultCmp.style.display = \"none\";\n    },\n\n    searchInput(e) {\n      if (!e) {\n        this.hideResult();\n      }\n\n      let me = this;\n\n      if (me.$refs.searchInput) {\n        let searchPosition = me.$refs.searchInput.getBoundingClientRect();\n        let resultCmp = me.$refs.searchPreview;\n        resultCmp.style.left = 0 + \"px\";\n        resultCmp.style.width = searchPosition.right + \"px\";\n        resultCmp.style.top = searchPosition.bottom + \"px\";\n        resultCmp.style.display = \"block\";\n      }\n    },\n\n    /**\r\n    * Sự kiện khi nhấn vào nút Trang chủ\r\n    * @created : quyetkaito 22/10/2022\r\n    */\n    gotoTop() {\n      //di chuyển lên trên cùng và reload lại trang\n      this.$eventBus.emit(\"gotoTop\");\n      this.$router.push('/home');\n    },\n\n    logoClick() {//move to top\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["SearchHistoryAPI","data","full_name","isLogged","textSearch","listOldSearch","userID","$session","get","created","initStaticData","methods","searchItemClick","item","search_content","searchData","hideResult","filterByLocation","i","$router","push","name","params","title","getSearchData","me","res","request","urlName","filter","x","index","error","console","deleteCache","$cache","remove","deleteHistory","id","log","UserMsg","gotoLogin","gotoRegister","gotoInfo","$store","$eventBus","emit","insertHistory","openSearchBox","obj","user_id","search_date","$commonFunc","setTimeZone","Date","StatusCode","$refs","searchInput","searchPosition","getBoundingClientRect","resultCmp","searchPreview","style","left","width","right","top","bottom","display","e","gotoTop","logoClick"],"sourceRoot":"","sources":["D:\\Traveller\\Traveller-Frontend\\traveller-ui\\src\\layout\\TheNavbar.vue"],"sourcesContent":["<template>\r\n  <div id=\"navbarComponent\" class=\"navbar-component flex flex-grow\">\r\n        <div class=\"navbar__left flex align-y-center w-1/3\">\r\n            <img src=\"@/assets/logo-law.png\" alt=\"\" class=\"logo-page\" @click=\"logoClick\">\r\n            <input\r\n            ref=\"searchInput\" \r\n            type=\"text\"\r\n            class=\"search-input\"\r\n            placeholder=\"Tìm kiếm\" \r\n            v-model=\"textSearch\" \r\n            @input=\"searchInput\"\r\n            @keyup.enter=\"searchData\"\r\n            @click=\"openSearchBox\"\r\n            >\r\n            <!-- @change=\"searchData\"  -->\r\n            <!-- @blur=\"hideResult\"  -->\r\n            <div\r\n                ref=\"searchPreview\"\r\n                class=\"search-preview\"               \r\n            >                \r\n                <div v-if=\"listOldSearch.length==0\">Không có tìm kiếm nào gần đây</div>\r\n                <div class=\"search-title flex justify-between align-y-center\" v-if=\"listOldSearch.length > 0\">\r\n                    <div class=\"search-cache\">Tìm kiếm gần đây</div>                \r\n                    <div class=\"delete-cache\" @click=\"deleteCache\">Xóa lịch sử tìm kiếm</div>                \r\n                </div>\r\n                <div class=\"search-result-item\" v-for=\"item in listOldSearch\" :key=\"item\" @click=\"searchItemClick(item)\">\r\n                    <div class=\"flex justify-between\">\r\n                        <div class=\"flex\">\r\n                            <div class=\"icon-history\"><i class=\"fas fa-history\"></i></div>\r\n                            <div>{{item.search_content}}</div>\r\n                        </div>\r\n                        <div class=\"delete-icon\" @click=\"deleteHistory(item)\">\r\n                            <i class=\"far fa-times-circle\"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"navbar-item-container flex w-1/3\"> \r\n           <div class=\"navbar-item\" @click=\"gotoTop\">Trang chủ</div>           \r\n           <div class=\"navbar-item\" @click=\"filterByLocation(1)\">Miền bắc</div>\r\n           <div class=\"navbar-item\">Miền trung</div>\r\n           <div class=\"navbar-item\">Miền nam</div>\r\n           <div class=\"navbar-item\">Trekking</div>             \r\n        </div>\r\n        <div class=\"login-area flex w-1/3\">\r\n            <div class=\"login-button\" @click=\"gotoLogin\" v-if=\"!isLogged\">{{$t('Login')}}</div>\r\n            <div class=\"register-button\" @click=\"gotoRegister\" v-if=\"!isLogged\">{{$t('Register')}}</div>\r\n            <div class=\"user-info\" @click=\"gotoInfo\" v-if=\"isLogged\">Xin chào <b>{{full_name}}</b></div>            \r\n        </div>        \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SearchHistoryAPI from \"@/api/SearchHistoryAPI\"\r\nexport default {\r\n    data() {\r\n        return {\r\n            full_name: \"bạn\",\r\n            isLogged: false,\r\n            textSearch : '',\r\n            listOldSearch:[],\r\n            userID: this.$session.get('UserID'),\r\n        }\r\n    },\r\n    created(){\r\n        this.initStaticData();\r\n    },\r\n    methods:{\r\n        searchItemClick(item){\r\n            if(item){\r\n                this.textSearch = item.search_content;\r\n                this.searchData();\r\n                this.hideResult();\r\n            }\r\n        },\r\n\r\n        filterByLocation(i){\r\n            this.$router.push({name:'postFilterList', params: {title: 'Miền Bắc'}});\r\n        },\r\n\r\n        /**\r\n        * Lấy lịch sử tìm kiếm của user này\r\n        * @created : quyetkaito 08/11/2022\r\n        */\r\n        async getSearchData(){\r\n            try {\r\n                let me = this;\r\n                if(me.userID){\r\n                    let res = await SearchHistoryAPI.request(SearchHistoryAPI.urlName+`/history_by_user/${me.userID}`, 'GET');\r\n                    if(res && res.data){   \r\n                        this.listOldSearch = [];                     \r\n                        this.listOldSearch = res.data.filter((x,index)=> index<5);\r\n                    }\r\n                }else{ //nếu ko có userID thì lấy trong cache\r\n\r\n                }\r\n            } catch (error) {\r\n                console.error(error)\r\n            }\r\n        },\r\n\r\n        deleteCache(){\r\n            let me = this;\r\n            //nếu ko đăng nhập thì xóa cache\r\n            if(me.userID){\r\n                this.$router.push(\"/search-history\");\r\n                this.hideResult();\r\n            }else{\r\n                this.$cache.remove(\"searchData\");\r\n                this.listOldSearch = [];\r\n            }\r\n        },\r\n\r\n        async deleteHistory(item){\r\n            if(item){\r\n                try {\r\n                  let res = await SearchHistoryAPI.request(SearchHistoryAPI.urlName, 'DELETE', [item.id]);\r\n                  if(res && res.data){\r\n                    console.log(res.data.UserMsg);\r\n                  }\r\n                } catch (error) {\r\n                console.error(error)\r\n                }\r\n            }\r\n        },\r\n\r\n        initStaticData(){            \r\n            let name = this.$session.get('FullName');\r\n            if(name){\r\n                this.full_name = name;\r\n                this.isLogged = true;\r\n            }\r\n        },\r\n        gotoLogin(){\r\n            this.$router.push({name: \"login\"});\r\n        },\r\n        \r\n        /**\r\n        * Chuyển sang màn hình đăng ký\r\n        * @created : quyetkaito 11/10/2022\r\n        */\r\n        gotoRegister(){\r\n\r\n        },\r\n        gotoInfo(){\r\n            //quay sang trang thông tin người dùng\r\n            this.$router.push({name: \"UserInfo\"});\r\n        },       \r\n        searchData() {\r\n            let me = this;\r\n            //tìm kiếm\r\n            if(me.textSearch){\r\n                this.$router.push(\"/home\");\r\n                me.$store.textSearch = me.textSearch;\r\n                me.$eventBus.emit('test', me.textSearch);\r\n                this.hideResult();\r\n                //nếu có userID thì lưu vào db\r\n                if(me.userID){\r\n                     this.insertHistory();\r\n                }else{ //nếu ko thì lưu vào cache \r\n                    this.openSearchBox();\r\n                    //lưu lại textsearch vào cache\r\n                    // let oldSearchData = me.$cache.get(\"searchData\");\r\n                    // if(oldSearchData){\r\n                    //     this.listOldSearch = oldSearchData;\r\n                    //     if(Array.isArray(oldSearchData)){\r\n                    //         oldSearchData.unshift(me.textSearch);\r\n                    //         me.$cache.set(\"searchData\", oldSearchData);\r\n                    //     }\r\n                    // }else if(me.textSearch){\r\n                    //     me.$cache.set(\"searchData\", [me.textSearch]);\r\n                    // }\r\n                }                \r\n            }\r\n        }, \r\n\r\n        async insertHistory(){\r\n            try {\r\n                let me = this;\r\n                if(me.userID){\r\n                    let obj = {\r\n                        user_id: me.userID,\r\n                        search_content: me.textSearch,\r\n                        search_date: me.$commonFunc.setTimeZone(new Date())\r\n                    };\r\n                    let res = await SearchHistoryAPI.request(SearchHistoryAPI.urlName, 'POST', obj);\r\n                    if(res && res.data){                        \r\n                        if(res.data.StatusCode == 201){\r\n                            console.log(\"Lưu lịch sử thành công\");\r\n                        }\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                console.error(error)\r\n            }\r\n        },\r\n\r\n        openSearchBox(){\r\n            let me = this;\r\n            //hiện content kết quả\r\n            if (me.$refs.searchInput) {\r\n                let searchPosition = me.$refs.searchInput.getBoundingClientRect();\r\n                let resultCmp = me.$refs.searchPreview;\r\n                resultCmp.style.left = 0 + \"px\";\r\n                resultCmp.style.width = searchPosition.right + \"px\";\r\n                resultCmp.style.top = searchPosition.bottom + \"px\";\r\n                resultCmp.style.display = \"block\";        \r\n            }\r\n            if(me.userID){ //nếu có thông tin người dùng thì lấy trong db\r\n                this.getSearchData();\r\n            }else{ //nếu ko thì lấy cache\r\n                // let oldSearch = me.$cache.get(\"searchData\");\r\n                // if(oldSearch){\r\n                //     this.listOldSearch = oldSearch;\r\n                // }\r\n            }\r\n\r\n        },\r\n\r\n        hideResult(){\r\n            let me = this;\r\n            let resultCmp = me.$refs.searchPreview;\r\n            resultCmp.style.display = \"none\";        \r\n        },\r\n\r\n        searchInput(e){\r\n            if(!e){\r\n                this.hideResult();\r\n            }\r\n            let me = this;\r\n            if (me.$refs.searchInput) {\r\n                let searchPosition = me.$refs.searchInput.getBoundingClientRect();\r\n                let resultCmp = me.$refs.searchPreview;\r\n                resultCmp.style.left = 0 + \"px\";\r\n                resultCmp.style.width = searchPosition.right + \"px\";\r\n                resultCmp.style.top = searchPosition.bottom + \"px\";\r\n                resultCmp.style.display = \"block\";        \r\n            }\r\n        },\r\n\r\n        /**\r\n        * Sự kiện khi nhấn vào nút Trang chủ\r\n        * @created : quyetkaito 22/10/2022\r\n        */\r\n        gotoTop(){\r\n            //di chuyển lên trên cùng và reload lại trang\r\n            this.$eventBus.emit(\"gotoTop\");\r\n            this.$router.push('/home');\r\n        },\r\n\r\n        logoClick(){\r\n            //move to top\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.navbar-component{\r\n    width: 100%;\r\n    height: 56px;\r\n    background:  #00BC2A;\r\n    box-sizing: border-box;\r\n    padding-right: 20px;\r\n    padding-left: 10px;\r\n    position: fixed;\r\n    z-index: 100;\r\n}\r\n.navbar__left{\r\n    padding: 10px;\r\n    .search-title{\r\n        margin-bottom: 5px;\r\n        .delete-cache{\r\n            color: red;\r\n            cursor: pointer;\r\n            font-size: 13px;\r\n        }\r\n        .search-cache{\r\n            font-weight: 600;\r\n        }\r\n    }\r\n    .search-result-item{        \r\n        cursor: pointer;\r\n        padding: 10px;\r\n        border-radius: 8px;\r\n        .icon-history{\r\n            color: var(--input-border);\r\n            margin-right: 5px;\r\n        }\r\n        .delete-icon{\r\n            color: var(--input-border);\r\n            cursor: pointer;\r\n        }\r\n        .delete-icon:hover{\r\n            color: black;\r\n        }\r\n    }\r\n    .search-result-item:hover{\r\n        background: var(--hover-card);\r\n    }\r\n}\r\n.navbar__left .logo-page{\r\n    width: 50px;\r\n    height: 50px;\r\n    cursor: pointer;\r\n}\r\n.navbar__left .search-input{\r\n    height: 40px;\r\n    border-radius: 30px;\r\n    font-size: 15px;\r\n    width: 250px;\r\n    outline: none;    \r\n    padding-left: 20px;\r\n    background: #f4f7fc;\r\n    margin-left: 10px;\r\n}\r\n.navbar-item-container{\r\n\r\n}\r\n.navbar-item{\r\n    height: 56px;\r\n    width: 111px;\r\n    box-sizing: border-box;    \r\n    padding: 10px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    cursor: pointer;\r\n    border-radius: 8px;\r\n    font-weight: 500;\r\n}\r\n.navbar-item:hover{\r\n    /* opacity: 50%; */\r\n    background: #dc9223;    \r\n    color: var(--bg-main);\r\n}\r\n.login-area{\r\n   justify-content: flex-end;\r\n   align-items: center;   \r\n}\r\n.login-button{\r\n    height: 30px;\r\n    border: 2px solid black;\r\n    box-shadow: #C7BFB7;\r\n    border-radius: 5px;\r\n    width: fit-content;\r\n    text-align: center;\r\n    margin-right: 10px;\r\n    cursor: pointer;\r\n    white-space: nowrap;\r\n    padding: 2px;\r\n}\r\n.login-button:hover{\r\n    background: var(--bg-main);\r\n}\r\n.register-button{\r\n    margin-right: 10px;\r\n    cursor: pointer;\r\n}\r\n.user-info{\r\n    margin-right: 10px;\r\n    cursor: pointer;\r\n}\r\n.search-preview-container {\r\n  position: relative;\r\n}\r\n.search-preview {\r\n  display: none;\r\n  width: 550px;\r\n  height: fit-content;\r\n  max-height: 400px;\r\n  @apply shadow-md;        \r\n  border: 2px solid #C7BFB7;\r\n  padding: 10px;\r\n  position: absolute;\r\n  z-index: 10;\r\n  background: #F4F7FC;\r\n  border-radius: 5px;\r\n}\r\n</style>\r\n\r\n"]},"metadata":{},"sourceType":"module"}