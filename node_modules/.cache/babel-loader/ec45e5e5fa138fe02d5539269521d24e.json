{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode, createCommentVNode as _createCommentVNode, withCtx as _withCtx, createBlock as _createBlock, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-1a55f9b4\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"m-popup-box h-625 w-800\"\n};\nconst _hoisted_2 = {\n  class: \"m-popup-header header-post\"\n};\nconst _hoisted_3 = {\n  class: \"popup-title-text\"\n};\nconst _hoisted_4 = {\n  class: \"category-container flex\"\n};\nconst _hoisted_5 = {\n  class: \"m-popup-body\"\n};\nconst _hoisted_6 = {\n  class: \"form-container\"\n};\nconst _hoisted_7 = {\n  class: \"m-card flex align-center mt-2\",\n  style: {\n    \"height\": \"250px\",\n    \"width\": \"100%\"\n  }\n};\nconst _hoisted_8 = {\n  class: \"mr-2\",\n  title: \"Chọn ảnh/ video\"\n};\n\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"Chọn ảnh/ video\", -1));\n\nconst _hoisted_10 = {\n  key: 1,\n  class: \"image-preview-container\"\n};\nconst _hoisted_11 = [\"src\"];\nconst _hoisted_12 = [\"onClick\"];\n\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-times-circle\"\n}, null, -1));\n\nconst _hoisted_14 = [_hoisted_13];\nconst _hoisted_15 = {\n  class: \"m-card more-info\"\n};\nconst _hoisted_16 = {\n  class: \"flex align-y-center\"\n};\n\nconst _hoisted_17 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"mr-2\"\n}, \"Thêm vào bài viết của bạn\", -1));\n\nconst _hoisted_18 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-images\",\n  title: \"Chọn ảnh\"\n}, null, -1));\n\nconst _hoisted_19 = [_hoisted_18];\n\nconst _hoisted_20 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-tags\"\n}, null, -1));\n\nconst _hoisted_21 = [_hoisted_20];\n\nconst _hoisted_22 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"attachment-plus location\",\n  title: \"Thêm địa điểm\"\n}, [/*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-map-marker-alt\"\n})], -1));\n\nconst _hoisted_23 = {\n  class: \"attachment\"\n};\nconst _hoisted_24 = {\n  class: \"rating m-card\"\n};\n\nconst _hoisted_25 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"rating-box-title font-bold\"\n}, \"Đánh giá chung\", -1));\n\nconst _hoisted_26 = {\n  class: \"rating-component\",\n  ref: \"ratingComponent1\"\n};\n\nconst _hoisted_27 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"rating-title mr-2\"\n}, \"Cảnh đẹp\", -1));\n\nconst _hoisted_28 = [\"onClick\"];\nconst _hoisted_29 = {\n  class: \"rating-description\"\n};\nconst _hoisted_30 = {\n  class: \"rating-component\",\n  ref: \"ratingComponent2\"\n};\n\nconst _hoisted_31 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"rating-title mr-2\"\n}, \"Dịch vụ\", -1));\n\nconst _hoisted_32 = [\"onClick\"];\nconst _hoisted_33 = {\n  class: \"rating-description\"\n};\nconst _hoisted_34 = {\n  class: \"footer-container flex-grow\"\n};\nconst _hoisted_35 = {\n  class: \"footer-line\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_m_input = _resolveComponent(\"m-input\");\n\n  const _component_slide = _resolveComponent(\"slide\");\n\n  const _component_navigation = _resolveComponent(\"navigation\");\n\n  const _component_pagination = _resolveComponent(\"pagination\");\n\n  const _component_Carousel = _resolveComponent(\"Carousel\");\n\n  const _component_m_button = _resolveComponent(\"m-button\");\n\n  const _component_category_detail = _resolveComponent(\"category-detail\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", {\n    class: _normalizeClass([\"m-popup\", {\n      show: $data.isShow\n    }]),\n    ref: \"dialog\"\n  }, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", null, [_createElementVNode(\"div\", _hoisted_3, _toDisplayString($data.formTitle), 1)]), _createElementVNode(\"div\", null, [_createElementVNode(\"div\", {\n    class: \"popup-close m-icon m-icon-24 m-close\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.hide && $options.hide(...args))\n  })])]), _createElementVNode(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.listCategory, category => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"post-category-item\",\n      key: category\n    }, _toDisplayString(category.category_name), 1);\n  }), 128))]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_m_input, {\n    ref: \"content\",\n    isTextArea: \"\",\n    height: 90,\n    maxHeight: 300,\n    showLabel: false,\n    placeholder: \"Viết bài...\",\n    modelValue: $data.currentItem.post_content,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.currentItem.post_content = $event)\n  }, null, 8, [\"modelValue\"]), _createElementVNode(\"div\", _hoisted_7, [!$data.hasImage && $data.editMode != 'Edit' || $data.listImage?.length == 0 ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: \"choose-image-button flex m-card-bottom\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.chooseImage && $options.chooseImage(...args))\n  }, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"i\", {\n    class: \"fas fa-images\",\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.chooseImage && $options.chooseImage(...args)),\n    title: \"Chọn ảnh\"\n  })]), _hoisted_9])) : _createCommentVNode(\"\", true), $data.listImage?.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createVNode(_component_Carousel, {\n    \"items-to-show\": 1\n  }, {\n    addons: _withCtx(() => [$data.listImage?.length > 1 ? (_openBlock(), _createBlock(_component_navigation, {\n      key: 0\n    })) : _createCommentVNode(\"\", true), $data.listImage?.length > 1 ? (_openBlock(), _createBlock(_component_pagination, {\n      key: 1\n    })) : _createCommentVNode(\"\", true)]),\n    default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.listImage, image => {\n      return _openBlock(), _createBlock(_component_slide, {\n        key: image\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"img\", {\n          src: $options.getSrc(image),\n          alt: \"\",\n          class: \"img-slide\",\n          onClick: _cache[4] || (_cache[4] = (...args) => _ctx.zoomImage && _ctx.zoomImage(...args))\n        }, null, 8, _hoisted_11), _createElementVNode(\"div\", {\n          class: \"delete-button m-icon-24\",\n          title: \"Xóa ảnh này\",\n          onClick: $event => $options.removeImage(image)\n        }, _hoisted_14, 8, _hoisted_12)]),\n        _: 2\n      }, 1024);\n    }), 128))]),\n    _: 1\n  })])) : _createCommentVNode(\"\", true)]), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"div\", _hoisted_16, [_hoisted_17, _createElementVNode(\"div\", {\n    class: \"attachment-plus\",\n    title: \"Chọn ảnh/ video\",\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.chooseImage && $options.chooseImage(...args))\n  }, _hoisted_19), _createElementVNode(\"div\", {\n    class: \"attachment-plus category\",\n    title: \"Thêm danh mục\",\n    onClick: _cache[6] || (_cache[6] = (...args) => $options.openCategory && $options.openCategory(...args))\n  }, _hoisted_21), _hoisted_22])]), _createElementVNode(\"div\", _hoisted_23, [_createElementVNode(\"input\", {\n    id: \"inputUpload\",\n    type: \"file\",\n    onChange: _cache[7] || (_cache[7] = (...args) => $options.uploadImage && $options.uploadImage(...args)),\n    style: {\n      \"display\": \"none\"\n    },\n    accept: \".gif,.jpg,.jpeg,.png,.jfif\"\n  }, null, 32)]), _createElementVNode(\"div\", _hoisted_24, [_hoisted_25, _createElementVNode(\"div\", _hoisted_26, [_hoisted_27, (_openBlock(), _createElementBlock(_Fragment, null, _renderList(5, index => {\n    return _createElementVNode(\"i\", {\n      class: \"rating-star fas fa-star mr-2\",\n      key: index,\n      onClick: $event => $options.starClick('Beauty', index)\n    }, null, 8, _hoisted_28);\n  }), 64)), _createElementVNode(\"div\", _hoisted_29, _toDisplayString($options.getRatingText($data.currentItem.beauty_star)), 1)], 512), _createElementVNode(\"div\", _hoisted_30, [_hoisted_31, (_openBlock(), _createElementBlock(_Fragment, null, _renderList(5, index => {\n    return _createElementVNode(\"i\", {\n      class: \"rating-star fas fa-star mr-2\",\n      key: index,\n      onClick: $event => $options.starClick('Service', index)\n    }, null, 8, _hoisted_32);\n  }), 64)), _createElementVNode(\"div\", _hoisted_33, _toDisplayString($options.getRatingText($data.currentItem.service_star)), 1)], 512)])]), _createElementVNode(\"div\", _hoisted_34, [_createElementVNode(\"div\", _hoisted_35, [_createVNode(_component_m_button, {\n    text: \"Đăng\",\n    class: \"w-full\",\n    disabled: !$data.currentItem.post_content,\n    btnClass: !$data.currentItem.post_content ? 'm-btn-second' : 'm-btn',\n    onClick: $options.saveFull\n  }, null, 8, [\"disabled\", \"btnClass\", \"onClick\"])])])])])], 2), _createVNode(_component_category_detail, {\n    ref: \"categoryDetail\",\n    onChangeValue: $options.getCategory\n  }, null, 8, [\"onChangeValue\"])], 64);\n}","map":{"version":3,"mappings":"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","names":["class","style","title","_createElementVNode","_hoisted_13","_hoisted_18","_hoisted_20","ref","show","$data","_toDisplayString","onClick","$options","_createElementBlock","_Fragment","_renderList","category","key","category_name","_createVNode","_component_m_input","isTextArea","height","maxHeight","showLabel","placeholder","post_content","$event","length","_hoisted_9","_component_Carousel","addons","_createBlock","_component_navigation","_component_pagination","image","_component_slide","src","alt","_ctx","_hoisted_17","_hoisted_22","id","type","onChange","accept","_hoisted_25","_hoisted_27","index","beauty_star","_hoisted_31","service_star","_component_m_button","text","disabled","btnClass","_component_category_detail","onChangeValue"],"sourceRoot":"","sources":["D:\\Traveller\\Traveller-Frontend\\traveller-ui\\src\\views\\post\\PostDetail.vue"],"sourcesContent":["<!--\r\nFile này là popup thêm mới bài viết\r\n-->\r\n<template>\r\n     <!-- Dialog thêm mới -->\r\n  <div class=\"m-popup\" v-bind:class=\"{ show: isShow }\" ref=\"dialog\">\r\n    <div class=\"m-popup-box h-625 w-800\">\r\n      <!-- Header -->\r\n      <div class=\"m-popup-header header-post\">\r\n        <div>\r\n            <div class=\"popup-title-text\">{{formTitle}}</div>            \r\n        </div>\r\n        <div>          \r\n            <div class=\"popup-close m-icon m-icon-24 m-close\" @click=\"hide\"></div>            \r\n        </div>\r\n      </div>\r\n      <!-- Header end-->\r\n      <div class=\"category-container flex\">\r\n            <div class=\"post-category-item\" v-for=\"category in listCategory\" v-bind:key=\"category\">{{category.category_name}}</div>            \r\n      </div>\r\n      <!-- Form -->\r\n      <div class=\"m-popup-body\">\r\n        <!-- Detail -->\r\n        <div class=\"form-container\">            \r\n           <m-input     \r\n                ref=\"content\"            \r\n                isTextArea\r\n                :height=\"90\"\r\n                :maxHeight=\"300\"\r\n                :showLabel=\"false\"\r\n                placeholder=\"Viết bài...\"\r\n                v-model=\"currentItem.post_content\"                \r\n           />\r\n           <div class=\"m-card flex align-center mt-2\" style=\"height: 250px; width:100%;\">\r\n                <div class=\"choose-image-button flex m-card-bottom\" @click=\"chooseImage\" v-if=\"!hasImage && editMode!='Edit' || listImage?.length == 0\">\r\n                    <div class=\"mr-2\" title=\"Chọn ảnh/ video\"> <i class=\"fas fa-images\" @click=\"chooseImage\" title=\"Chọn ảnh\"></i></div>\r\n                    <div>Chọn ảnh/ video</div>\r\n                </div>\r\n                <div class=\"image-preview-container\" v-if=\"listImage?.length > 0\">\r\n                    <Carousel :items-to-show=\"1\">\r\n                        <slide v-for=\"image in listImage\" :key=\"image\">                                        \r\n                            <img :src=\"getSrc(image)\" alt=\"\" class=\"img-slide\" @click=\"zoomImage\">     \r\n                            <div class=\"delete-button m-icon-24\" title=\"Xóa ảnh này\" @click=\"removeImage(image)\"><i class=\"fas fa-times-circle\"></i></div> \r\n                        </slide>                  \r\n                        <template #addons>\r\n                        <navigation v-if=\"listImage?.length > 1\" />\r\n                        <pagination v-if=\"listImage?.length > 1\" />\r\n                        </template>\r\n                    </Carousel>\r\n                </div>\r\n                <!-- <img id=\"imagePreview\" alt=\"image-preview\" class=\"image-upload\"> -->\r\n           </div>\r\n           <div class=\"m-card more-info\">\r\n                <div class=\"flex align-y-center\">\r\n                    <div class=\"mr-2\">Thêm vào bài viết của bạn</div>\r\n                    <div class=\"attachment-plus\" title=\"Chọn ảnh/ video\" @click=\"chooseImage\"><i class=\"fas fa-images\" title=\"Chọn ảnh\"></i></div>\r\n                    <div class=\"attachment-plus category\" title=\"Thêm danh mục\" @click=\"openCategory\"><i class=\"fas fa-tags\"></i></div>\r\n                    <div class=\"attachment-plus location\" title=\"Thêm địa điểm\"><i class=\"fas fa-map-marker-alt\"></i></div>\r\n                </div>\r\n           </div>\r\n           <div class=\"attachment\">                \r\n                <input id=\"inputUpload\" type=\"file\" @change=\"uploadImage\" style=\"display:none;\" accept=\".gif,.jpg,.jpeg,.png,.jfif\"/>\r\n           </div>    \r\n           <div class=\"rating m-card\">\r\n                <div class=\"rating-box-title font-bold\">Đánh giá chung</div>\r\n                <div class=\"rating-component\" ref=\"ratingComponent1\">\r\n                    <div class=\"rating-title mr-2\">Cảnh đẹp</div>\r\n                    <i class=\"rating-star fas fa-star mr-2\" v-for=\"index in 5\" :key=\"index\" @click=\"starClick('Beauty',index)\"></i>                    \r\n                    <div class=\"rating-description\">{{getRatingText(currentItem.beauty_star)}}</div>\r\n                </div>\r\n                <div class=\"rating-component\" ref=\"ratingComponent2\">\r\n                    <div class=\"rating-title mr-2\">Dịch vụ</div>\r\n                    <i class=\"rating-star fas fa-star mr-2\" v-for=\"index in 5\" :key=\"index\" @click=\"starClick('Service', index)\"></i>                    \r\n                    <div class=\"rating-description\">{{getRatingText(currentItem.service_star)}}</div>\r\n                </div>\r\n            </div>       \r\n        </div>\r\n        <!-- Detail end-->\r\n\r\n        <!-- Footer -->\r\n        <div class=\"footer-container flex-grow\">\r\n          <div class=\"footer-line\">\r\n            <m-button \r\n                text=\"Đăng\" \r\n                class=\"w-full\" \r\n                :disabled=\"!currentItem.post_content\" \r\n                :btnClass=\"!currentItem.post_content?'m-btn-second':'m-btn'\"\r\n                @click=\"saveFull\"\r\n            />            \r\n          </div>\r\n        </div>\r\n        <!-- Footer end-->\r\n      </div>\r\n      <!-- Form end -->\r\n    </div>\r\n  </div>\r\n  <category-detail ref=\"categoryDetail\" @changeValue=\"getCategory\"/>\r\n</template>\r\n\r\n<script>\r\nimport PostAPI from \"@/api/PostAPI\";\r\nimport { getStorage, ref, uploadBytes, getMetadata, getDownloadURL, list } from \"firebase/storage\";\r\nconst storage = getStorage();\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport 'vue3-carousel/dist/carousel.css'\r\nimport { Carousel, Slide, Pagination, Navigation } from 'vue3-carousel';\r\n//postcategory\r\nimport CategoryDetail from \"@/views/category/CategoryDetail.vue\";\r\n\r\nexport default {\r\n    components:{\r\n         /* eslint-disable vue/no-unused-components */        \r\n        Carousel,        \r\n        Slide,        \r\n        Pagination,        \r\n        Navigation,\r\n        \"category-detail\": CategoryDetail,\r\n    },\r\n    data() {\r\n        return {\r\n            //currentItem.post_content: \"\", //nội dung của bài viết\r\n            isShow: false, //popup có hiện ko\r\n            listImage: [], //danh sách ảnh của bài viết\r\n            hasImage: false,\r\n            listCategory: [], //danh sách danh mục của bài viết\r\n            formTitle: \"Tạo bài viết\",\r\n            editMode: 'Add',\r\n            currentItem: {}, //đối tượng post\r\n            ratingText1: 'Tuyệt vời', //nội dung đánh giá 1\r\n            ratingText2: 'Tuyệt vời'\r\n        }\r\n    },    \r\n    created(){\r\n        let me = this;\r\n        me.initStaticData();        \r\n    },\r\n    methods:{       \r\n        /**\r\n         * Hàm khởi tạo dữ liệu tĩnh\r\n         * @created : nvquyet\r\n         */\r\n        initStaticData(){\r\n            let me = this;\r\n            me.initNewItem();\r\n        },\r\n\r\n        initNewItem(){\r\n            let me = this;\r\n            me.currentItem.beauty_star = 5;\r\n            me.currentItem.service_star = 5;\r\n        },\r\n\r\n        /**\r\n         * Hàm xử lý rating\r\n         * @param {Number} index\r\n         * @param {String} key : đánh dấu là sao nào(dùng chung)\r\n         */\r\n        starClick(key, index){\r\n            if(index != null && typeof index != \"undefined\"){\r\n                let me = this;                  \r\n                let component = null;\r\n                if(key == 'Beauty') {\r\n                    me.currentItem.beauty_star = index;\r\n                    component = me.$refs.ratingComponent1 ;                    \r\n                }\r\n                if(key == 'Service') {\r\n                    me.currentItem.service_star = index;\r\n                    component = me.$refs.ratingComponent2;                      \r\n                }\r\n                if(component && component.querySelectorAll(`.rating-star`)){                    \r\n                    //tìm tất cả các star\r\n                    let listStar = component.querySelectorAll(`.rating-star`);\r\n                    //set full màu như ban đầu\r\n                    //set mất màu cho các index > index hiện tại\r\n                    if(listStar && listStar.length > 0){\r\n                        for(let i = 0; i < listStar.length; i++){\r\n                            listStar[i].classList.remove('unselected');\r\n                            if(i>index-1){\r\n                                listStar[i].classList.add('unselected');\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Lấy text theo số sao\r\n         * @param {Number} star : số sao\r\n         */\r\n        getRatingText(star){\r\n            switch (star) {\r\n                case 1:\r\n                    return 'Tệ';\r\n                case 2:\r\n                    return 'Chưa tốt';\r\n                case 3:\r\n                    return 'Bình thường';\r\n                case 4:\r\n                    return 'Tốt';\r\n                case 5:\r\n                    return 'Tuyệt với';\r\n                default:\r\n                    return '';\r\n            }\r\n        },\r\n\r\n        /**\r\n         * hàm xử lý xóa 1 ảnh khỏi danh sách ảnh hiện tại\r\n         */\r\n        removeImage(image){\r\n            if(image){\r\n                this.listImage.splice(this.listImage.indexOf(image),1);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Hàm nhận emit từ categoryDetail.\r\n         * @param {Array} list\r\n         */\r\n        getCategory(list){\r\n            if(list && list.length > 0){\r\n                this.listCategory = JSON.parse(JSON.stringify(list));\r\n            }else{\r\n                this.listCategory = [];\r\n            }\r\n        },\r\n\r\n        openCategory(){\r\n            this.$refs.categoryDetail.showQuickAdd();\r\n            //xử lý binding dữ liệu hiện có lên combo\r\n            if(this.listCategory && this.listCategory.length > 0){\r\n                this.$refs.categoryDetail.bindingData(this.listCategory);\r\n            }\r\n        },\r\n\r\n        chooseImage(){\r\n            document.getElementById(\"inputUpload\").click();\r\n        },\r\n\r\n        /**\r\n         * hàm xử lý up ảnh lên firebase\r\n         */\r\n        uploadImage(e){    \r\n            let me = this;\r\n            const metadata = {\r\n            contentType: 'image/jpeg',\r\n            };\r\n            if(me.$commonFunc.validateInputImage(e.target)){\r\n            const storageRef = ref(storage, `image/${uuidv4()}.jpeg`);\r\n            // Upload the file and metadata            \r\n            const uploadTask = uploadBytes(storageRef, e.target.files[0], metadata).then(()=>{\r\n                getDownloadURL(storageRef).then((x)=>{      \r\n                debugger               \r\n                this.listImage.push(x);\r\n                this.hasImage = true;\r\n                })            \r\n            });\r\n            // getMetadata(storageRef).then((metadata)=>{\r\n            //     debugger\r\n            // })\r\n\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Chỉnh sửa bài viết\r\n         */\r\n        async editPost(){\r\n            let me = this;\r\n            if(!me.currentItem.post_content && !me.listImage) return; //nếu bài viết ko nội dung hoặc ko có ảnh nào thì ko cho lưu      \r\n            me.$commonFunc.load();\r\n            let obj = {\r\n                post_id: me.currentItem.post_id,\r\n                post_content: me.currentItem.post_content,\r\n                author: me.$session.get('UserID'),                \r\n                post_image: JSON.stringify(this.listImage),                \r\n            }\r\n            let res = await PostAPI.request(PostAPI.urlName, 'PUT', obj);\r\n            if(res && res.data){\r\n                if(res.data.StatusCode == 200){\r\n                    console.log(\"Sua thành công\");\r\n                    //clear dữ liệu trong form và đóng popup\r\n                    me.afterInsert();\r\n                }else{\r\n                    console.log(\"Thêm mới thất bại\");\r\n                }\r\n            }\r\n            me.$commonFunc.unload();\r\n        },\r\n\r\n        /**\r\n         * Thêm mới bài viết\r\n         */\r\n        async savePost(){\r\n            let me = this;\r\n            if(!me.currentItem.post_content && !me.listImage) return;    \r\n            if(me.editMode == 'Add'){\r\n                me.$commonFunc.load();\r\n                let obj = {\r\n                    post_content: me.currentItem.post_content,\r\n                    author: me.$session.get('UserID'),\r\n                    posted_date: new Date(),\r\n                    post_image: JSON.stringify(this.listImage),\r\n                }\r\n                let res = await PostAPI.request(PostAPI.urlName, 'POST', obj);\r\n                if(res && res.data){\r\n                    if(res.data.StatusCode == 201){\r\n                        console.log(\"Thêm mới thành công\");\r\n                        //clear dữ liệu trong form và đóng popup\r\n                        me.afterInsert();\r\n                    }else{\r\n                        console.log(\"Thêm mới thất bại\");\r\n                    }\r\n                }\r\n                me.$commonFunc.unload();                           \r\n            }else{\r\n                me.editPost();\r\n            }        \r\n        },\r\n\r\n        /**\r\n         * Hàm thêm mới có cả danh mục\r\n         */\r\n        async saveFull(){\r\n            let me = this;\r\n            if(!me.currentItem.post_content && !me.listImage) return;    \r\n            if(me.editMode == 'Add'){\r\n                me.$commonFunc.load();\r\n                let obj = {\r\n                    post:{\r\n                        post_content: me.currentItem.post_content,\r\n                        author: me.$session.get('UserID'),\r\n                        posted_date: me.$commonFunc.setTimeZone(new Date()),\r\n                        post_image: JSON.stringify(this.listImage)\r\n                    },\r\n                    categories:this.listCategory\r\n                }\r\n                let res = await PostAPI.request(PostAPI.urlName+\"/save_full\", 'POST', obj);\r\n                if(res && res.data){\r\n                    if(res.data.StatusCode == 201){\r\n                        console.log(\"Thêm mới thành công\");\r\n                        //clear dữ liệu trong form và đóng popup\r\n                        me.afterInsert();\r\n                    }else{\r\n                        console.log(\"Thêm mới thất bại\");\r\n                    }\r\n                }\r\n                me.$commonFunc.unload();                           \r\n            }else{\r\n                me.editFull();\r\n            } \r\n        },\r\n\r\n        async editFull(){\r\n            let me = this;\r\n            me.$commonFunc.load();\r\n            let obj = {\r\n                post:Object.assign(this.currentItem,{\r\n                    post_content: me.currentItem.post_content,\r\n                    post_image: JSON.stringify(this.listImage)\r\n                }),\r\n                categories:this.listCategory\r\n            }\r\n            let res = await PostAPI.request(PostAPI.urlName+\"/save_full\", 'PUT', obj);\r\n            if(res && res.data){\r\n                debugger\r\n                if(res.data.StatusCode == 200){\r\n                    console.log(\"Sửa thành công\");\r\n                    //clear dữ liệu trong form và đóng popup\r\n                    me.afterInsert();\r\n                }else{\r\n                    console.log(\"Sửa thất bại\");\r\n                }\r\n            }\r\n            me.$commonFunc.unload();  \r\n        },\r\n\r\n        hide(){            \r\n            this.isShow = false;\r\n            if(this.editMode =='Edit'){\r\n                this.resetForm();\r\n            }\r\n        },\r\n\r\n        show(){\r\n            this.isShow = true;\r\n             this.editMode = 'Add';\r\n             this.formTitle = \"Tạo bài viết\";\r\n             this.listCategory = [];\r\n             this.initNewItem();\r\n            this.$nextTick(()=>{\r\n                this.$refs.content.focus();\r\n            })\r\n        },\r\n\r\n        /**\r\n         * Show edit\r\n         * @param {Object} post : thông tin bài viết\r\n         * @param {Array} listCategory : category của bài viết này\r\n         */\r\n        showEdit(object, listCategory){\r\n            this.isShow = true;\r\n            this.editMode = 'Edit';\r\n            this.$nextTick(()=>{\r\n                this.$refs.content.focus();\r\n            });            \r\n            this.formTitle = \"Chỉnh sửa bài viết\";\r\n            if(object){\r\n                this.currentItem = JSON.parse(JSON.stringify(object));\r\n                this.currentItem.post_content = object.post_content;\r\n                this.starClick('Beauty', this.currentItem.beauty_star);\r\n                this.starClick('Service', this.currentItem.service_star);\r\n                this.listImage = object.post_image? JSON.parse(object.post_image) : [];                                \r\n                this.listCategory = listCategory;\r\n            }\r\n        },\r\n\r\n        afterInsert(){            \r\n            this.currentItem = {};\r\n            this.currentItem.post_content = '';\r\n            this.hide();\r\n            //gọi parent load lại data\r\n            this.$parent.loadData(); \r\n            this.$eventBus.emit(\"gotoTop\");           \r\n        },\r\n\r\n        resetForm(){\r\n            this.currentItem = {};\r\n            this.currentItem.post_content = '';\r\n            this.listImage = [];\r\n            this.editMode = 'Add';\r\n        },\r\n\r\n        getSrc(src){\r\n            return src;\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import url(\"/src/style/common/dialog.css\");\r\n.form-container{\r\n    overflow: auto;\r\n    padding-right: 5px;\r\n    .attachment{\r\n        cursor: pointer;\r\n    }\r\n\r\n    .rating{\r\n        .rating-component{\r\n            display: flex;\r\n            align-items:center;\r\n            height: 40px;\r\n            .rating-title{\r\n                width: 70px;\r\n            }\r\n            .rating-star{\r\n                font-size: 24px;       \r\n                color: var(--warning-color);       \r\n                cursor: pointer;                  \r\n            }\r\n            .rating-star.unselected{\r\n                font-size: 24px;      \r\n                color: var(--disabled-color);                                     \r\n            }\r\n            .rating-description{\r\n                color: var(--warning-color);                         \r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n.form-container .fa-images{\r\n  color: var(--default-color);\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n}\r\n\r\n.form-container .choose-image{\r\n    cursor: pointer;\r\n}\r\n.form-container .more-info{\r\n    align-items: center;\r\n}\r\n.form-container .more-info .attachment-plus{\r\n    width: 40px;\r\n    height: 40px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;    \r\n    margin-left: 2px;\r\n    margin-right: 2px;\r\n    cursor: pointer;\r\n    border-radius: 10px;\r\n    background: var(--bg-main);\r\n}\r\n.form-container .more-info .attachment-plus:hover{\r\n    background: var(--input-border);\r\n}\r\n\r\n.attachment-plus.category{\r\n    color: var(--info-color);\r\n}\r\n\r\n.attachment-plus.location{\r\n    color: var(--warning-color);\r\n}\r\n.image-upload{\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: contain;\r\n}\r\n.choose-image-button{\r\n    cursor: pointer;\r\n}\r\n.choose-image-button:hover{\r\n    background: var(--disabled-color);\r\n}\r\n.image-preview-container{\r\n    height: 100%;\r\n    width:100%;\r\n}\r\n.image-preview-container .img-slide{\r\n    height: 230px!important;\r\n}\r\n.image-preview-container .carousel{\r\n    height: 100%;\r\n}\r\n.image-preview-container .carousel .carousel_viewport{\r\n    height: calc(100% - 15px);\r\n}\r\n.image-preview-container .carousel .carousel_viewport .carousel__slide{\r\n    width: fit-content;\r\n}\r\n.category-container{\r\n    margin-bottom: 3px;\r\n}\r\n.category-container .post-category-item{\r\n    border-radius: 3px;\r\n    background: #e5e5e5;\r\n    font-size: 11px;\r\n    cursor: pointer;\r\n    padding: 3px 5px 3px 5px;\r\n    margin-right: 2px;\r\n}\r\n.header-post{\r\n    height: 35px!important;\r\n}\r\n.delete-button{\r\n    position: absolute;\r\n    top: 0;\r\n    right: 10px;\r\n}\r\n.delete-button .fa-times-circle{\r\n    font-size: 24px;\r\n    color: red;\r\n    cursor: pointer;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}