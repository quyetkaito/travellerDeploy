{"ast":null,"code":"export default {\n  data() {\n    return {\n      isShow: false,\n      //show component\n      scale: 1,\n      //tỉ lệ phóng to\n      panning: false,\n      //có đang kéo thả ko\n      pointX: 0,\n      //vị trí chuột\n      pointY: 0,\n      start: {\n        x: 0,\n        y: 0\n      }\n    };\n  },\n\n  methods: {\n    getSrc(src) {\n      return src;\n    },\n\n    show(src) {\n      this.isShow = true;\n\n      if (src) {\n        if (this.$refs.imageViewer) {\n          this.$refs.imageViewer.src = src;\n        }\n      }\n\n      this.backToOriginSize();\n    },\n\n    hide() {\n      this.isShow = false;\n    },\n\n    setTransform() {\n      let zoom = this.$refs.imageViewerContainer;\n\n      if (zoom) {\n        zoom.style.transform = \"translate(\" + this.pointX + \"px, \" + this.pointY + \"px) scale(\" + this.scale + \")\";\n      }\n    },\n\n    /**\r\n    * Nhấn giữ chuột\r\n    * @created : quyetkaito 28/10/2022\r\n    */\n    mousedownListener(e) {\n      e.preventDefault();\n      this.start = {\n        x: e.clientX - this.pointX,\n        y: e.clientY - this.pointY\n      };\n      this.panning = true;\n    },\n\n    mouseupListener(e) {\n      this.panning = false;\n    },\n\n    /**\r\n    * Nhấn giữ chuột để kéo thả ảnh\r\n    * @created : quyetkaito 28/10/2022\r\n    */\n    mousemoveListener(e) {\n      e.preventDefault();\n\n      if (!this.panning) {\n        return;\n      }\n\n      this.pointX = e.clientX - this.start.x;\n      this.pointY = e.clientY - this.start.y;\n      this.setTransform();\n    },\n\n    /**\r\n     * Tính toán khi scroll để phóng to ảnh\r\n     * @created : quyetkaito 28/10/2022\r\n     */\n    scrollListener(e) {\n      e.preventDefault();\n      var xs = (e.clientX - this.pointX) / this.scale,\n          ys = (e.clientY - this.pointY) / this.scale,\n          delta = e.wheelDelta ? e.wheelDelta : -e.deltaY;\n      delta > 0 ? this.scale *= 1.2 : this.scale /= 1.2;\n      this.pointX = e.clientX - xs * this.scale;\n      this.pointY = e.clientY - ys * this.scale;\n      this.setTransform();\n    },\n\n    /**\r\n     * Quay trở về kích thước ban đầu\r\n     */\n    backToOriginSize() {\n      this.pointX = 0;\n      this.pointY = 0;\n      this.scale = 1;\n      this.setTransform();\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["data","isShow","scale","panning","pointX","pointY","start","x","y","methods","getSrc","src","show","$refs","imageViewer","backToOriginSize","hide","setTransform","zoom","imageViewerContainer","style","transform","mousedownListener","e","preventDefault","clientX","clientY","mouseupListener","mousemoveListener","scrollListener","xs","ys","delta","wheelDelta","deltaY"],"sourceRoot":"","sources":["D:\\Traveller\\Traveller-Frontend\\traveller-ui\\src\\views\\post\\ImageViewFull.vue"],"sourcesContent":["<!--\r\nFile xem hình ảnh khi click đúp vào ảnh trên bài viết\r\n-->\r\n<template>\r\n  <div class=\"image-viewer-fullscreen\" v-show=\"isShow\">\r\n     <div class=\"image-viewer__header\">\r\n         <div class=\"m-icon-48 icon-close flex align-center\" @click=\"backToOriginSize\"><i class=\"fas fa-expand\"></i></div>\r\n         <div class=\"m-icon-48 icon-close flex align-center\" @click=\"hide\"><i class=\"fas fa-times\"></i></div>\r\n     </div>\r\n     <div ref=\"imageViewerContainer\" id=\"imageViewerContainer\" class=\"image-viewer__container\" @mousedown=\"mousedownListener\" @mouseup=\"mouseupListener\" @mousemove=\"mousemoveListener\" @wheel=\"scrollListener\">\r\n        <img alt=\"\" src=\"https://picsum.photos/seed/picsum/200/300\" id=\"imageViewer\" ref=\"imageViewer\" class=\"image-preview\" @dblclick=\"backToOriginSize\">     \r\n     </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {   \r\n    data() {\r\n        return {\r\n            isShow: false, //show component\r\n            scale: 1, //tỉ lệ phóng to\r\n            panning: false, //có đang kéo thả ko\r\n            pointX: 0, //vị trí chuột\r\n            pointY: 0,\r\n            start: { x: 0, y: 0 }            \r\n        }\r\n    },\r\n\r\n    methods:{\r\n        getSrc(src){\r\n            return src;\r\n        },\r\n\r\n        show(src){\r\n            this.isShow = true;\r\n            if(src){                \r\n                if(this.$refs.imageViewer){\r\n                    this.$refs.imageViewer.src = src;\r\n                }                \r\n            }\r\n            this.backToOriginSize();\r\n        },\r\n\r\n        hide(){\r\n            this.isShow = false;\r\n        },\r\n\r\n        setTransform() {            \r\n            let zoom = this.$refs.imageViewerContainer;\r\n            if(zoom){\r\n                zoom.style.transform = \"translate(\" + this.pointX + \"px, \" + this.pointY + \"px) scale(\" + this.scale + \")\";\r\n            }\r\n        },\r\n        \r\n        /**\r\n        * Nhấn giữ chuột\r\n        * @created : quyetkaito 28/10/2022\r\n        */\r\n        mousedownListener(e){\r\n            e.preventDefault();\r\n            this.start = { x: e.clientX - this.pointX, y: e.clientY - this.pointY };\r\n            this.panning = true;\r\n        },\r\n\r\n        mouseupListener(e){\r\n            this.panning = false;\r\n        },\r\n\r\n        /**\r\n        * Nhấn giữ chuột để kéo thả ảnh\r\n        * @created : quyetkaito 28/10/2022\r\n        */\r\n        mousemoveListener(e){\r\n             e.preventDefault();\r\n            if (!this.panning) {\r\n             return;\r\n            }\r\n            this.pointX = (e.clientX - this.start.x);\r\n            this.pointY = (e.clientY - this.start.y);\r\n            this.setTransform();\r\n        },\r\n\r\n        /**\r\n         * Tính toán khi scroll để phóng to ảnh\r\n         * @created : quyetkaito 28/10/2022\r\n         */\r\n        scrollListener(e){\r\n            e.preventDefault();\r\n            var xs = (e.clientX - this.pointX) / this.scale,\r\n            ys = (e.clientY - this.pointY) / this.scale,\r\n            delta = (e.wheelDelta ? e.wheelDelta : - e.deltaY);\r\n            (delta > 0) ? (this.scale *= 1.2) : (this.scale /= 1.2);\r\n            this.pointX = e.clientX - xs * this.scale;\r\n            this.pointY = e.clientY - ys * this.scale;\r\n\r\n            this.setTransform();\r\n        },\r\n\r\n        /**\r\n         * Quay trở về kích thước ban đầu\r\n         */\r\n        backToOriginSize(){\r\n            this.pointX = 0;\r\n            this.pointY = 0;\r\n            this.scale = 1;\r\n            this.setTransform();\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n.image-viewer-fullscreen{\r\n    position: fixed;\r\n    z-index: 1000;\r\n    top:0;\r\n    left:0;\r\n    bottom: 0;\r\n    right:0;\r\n    width: 100;\r\n    background-color: rgba(0, 0, 0, 0.85);\r\n}\r\n\r\n/* #imageViewer{\r\n    height: auto;\r\n    max-height: 100vh;\r\n    cursor: grab;\r\n} */\r\n\r\n.image-viewer__header{\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: flex-end;\r\n}\r\n.image-viewer__header .icon-close{\r\n    color: white;    \r\n    font-size: 30px;\r\n    cursor: pointer;\r\n    z-index: 1001;\r\n}\r\n.image-viewer__container{\r\n    object-fit: contain;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    height: 100vh;\r\n    transform-origin: 0px 0px;\r\n    transform: scale(1) translate(0px, 0px);\r\n}\r\n.image-viewer__container .image-preview{\r\n    height: auto;\r\n    max-height: 100vh;\r\n    cursor: grab;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}